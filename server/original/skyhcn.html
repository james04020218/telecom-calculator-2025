<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SKY/HCN ê²°í•© í• ì¸ ê³„ì‚°ê¸°</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- 
        Application Structure Plan:
        - New calculator for SKY/HCN based on KT calculator UI/UX.
        - Provider selection (SKY/HCN) at the top.
        - Dynamic population of Internet and TV plans based on provider.
        - SKY: Differentiates standalone internet vs. internet bundled with TV. TV plans are add-ons. "30% discount (no gift)" option.
        - HCN: Lists available internet. TV plans are add-ons. "ë™ë“±ê²°í•© í• ì¸" for specific bundles.
        - WiFi, Installation, Gift logic adapted for SKY/HCN.
        - Removed KT-specific discount types, mobile inputs, and KT addons.
        - Simplified message scripts.
        - Added display for discount name.
    -->
    <style>
        body { font-family: 'Inter', sans-serif; background-color: #f8fafc; }
        .input-group { margin-bottom: 1.5rem; }
        .input-label { display: block; margin-bottom: 0.5rem; font-weight: 500; color: #334155; }
        .input-field, .select-field { width: 100%; padding: 0.5rem 0.75rem; border: 1px solid #cbd5e1; border-radius: 0.375rem; box-shadow: sm; }
        .input-field:focus, .select-field:focus { border-color: #0ea5e9; outline: none; box-shadow: 0 0 0 0.2rem rgba(14, 165, 233, 0.25); }
        .input-field:disabled, .select-field:disabled { background-color: #e2e8f0; cursor: not-allowed; }
        .btn-primary { background-color: #0ea5e9; color: white; padding: 0.75rem 1.5rem; border-radius: 0.375rem; font-weight: 600; }
        .btn-primary:hover { background-color: #0284c7; }
        .btn-secondary { background-color: #64748b; color: white; padding: 0.5rem 1rem; border-radius: 0.375rem; font-weight: 500; }
        .btn-secondary:hover { background-color: #475569; }
        .section-title { font-size: 1.5rem; font-weight: 700; color: #0369a1; margin-bottom: 1rem; padding-bottom: 0.5rem; border-bottom: 2px solid #38bdf8; }
        .result-card { background-color: white; padding: 1.5rem; border-radius: 0.5rem; box-shadow: 0 4px 6px -1px rgba(0,0,0,0.1), 0 2px 4px -1px rgba(0,0,0,0.06); margin-bottom: 1.5rem; }
        .result-label { color: #475569; }
        .result-value { color: #1e293b; font-weight: 600;}
        .total-value { color: #f59e0b; font-size: 1.5rem; font-weight: 700;}
        .radio-label { margin-right: 1rem; margin-bottom: 0.5rem; display: inline-flex; align-items: center; cursor: pointer;}
        .radio-input { margin-right: 0.5rem; accent-color: #0ea5e9; }
        .summary-item { margin-bottom: 0.25rem; }
        .message-script-area { width: 100%; min-height: 100px; padding: 0.5rem; border: 1px solid #cbd5e1; border-radius: 0.375rem; font-size: 0.875rem; white-space: pre-wrap; word-wrap: break-word; }
        .copy-button-container { text-align: right; margin-top: 0.5rem; }
        .copy-feedback { font-size: 0.75rem; color: green; margin-left: 0.5rem; }
    </style>
</head>
<body class="text-slate-800">
    <header class="bg-sky-700 text-white p-6 shadow-md">
        <div class="container mx-auto max-w-4xl">
            <h1 class="text-3xl font-bold text-center">SKY/HCN ê²°í•© í• ì¸ ê³„ì‚°ê¸°</h1>
            <p class="text-center text-sky-200 mt-1">ì„ íƒí•˜ì‹  ìƒí’ˆì˜ ì˜ˆìƒ ìš”ê¸ˆì„ ê³„ì‚°í•´ ë³´ì„¸ìš”.</p>
        </div>
    </header>

    <main class="container mx-auto max-w-4xl p-4 sm:p-6 lg:p-8">
        <section id="providerSelectionSection" class="mb-8">
            <h2 class="section-title">0. í†µì‹ ì‚¬ ì„ íƒ</h2>
            <div class="input-group">
                <div class="flex items-center space-x-4">
                    <label class="radio-label">
                        <input type="radio" name="serviceProvider" value="sky" class="radio-input" checked>
                        KT Skylife (SKY)
                    </label>
                    <label class="radio-label">
                        <input type="radio" name="serviceProvider" value="hcn" class="radio-input">
                        HCN (KT HCN)
                    </label>
                </div>
            </div>
        </section>

        <section id="inputSection" class="mb-8">
            <h2 class="section-title">1. ì„œë¹„ìŠ¤ ì„ íƒ (3ë…„ ì•½ì • ê¸°ì¤€, VAT í¬í•¨)</h2>
            
            <div id="skyInternetTypeGroup" class="input-group">
                <label class="input-label">SKY ì¸í„°ë„· ìœ í˜• ì„ íƒ</label>
                <div class="flex items-center space-x-4">
                    <label class="radio-label">
                        <input type="radio" name="skyInternetType" value="bundle_tv" class="radio-input" checked>
                        SKY ì¸í„°ë„· + TV ë²ˆë“¤
                    </label>
                    <label class="radio-label">
                        <input type="radio" name="skyInternetType" value="standalone" class="radio-input">
                        SKY ì¸í„°ë„· ë‹¨ë…
                    </label>
                </div>
            </div>

            <div class="grid md:grid-cols-2 gap-6">
                <div class="input-group">
                    <label for="internetPlan" class="input-label">ì¸í„°ë„· ìš”ê¸ˆì œ</label>
                    <select id="internetPlan" class="select-field">
                        </select>
                </div>
                
                <div class="input-group">
                    <label for="tvPlan" class="input-label">TV ìƒí’ˆ</label>
                    <select id="tvPlan" class="select-field">
                        <option value="none">TV ì„ íƒ ì•ˆí•¨</option>
                        </select>
                </div>

                <div class="input-group">
                    <label for="wifiRouter" class="input-label block mb-1">ì™€ì´íŒŒì´ ê³µìœ ê¸°</label>
                     <select id="wifiRouter" class="select-field">
                        </select>
                </div>
                
                <div id="skyGiftDiscountOptionGroup" class="input-group hidden">
                     <label for="skyNoGiftDiscount" class="input-label flex items-center cursor-pointer">
                        <input type="checkbox" id="skyNoGiftDiscount" class="radio-input h-5 w-5 mr-2">
                        ì‚¬ì€í’ˆ ë¯¸ì„ íƒ ì‹œ 30% í• ì¸ ì ìš© (100M/200M ì¸í„°ë„·)
                    </label>
                </div>
            </div>
        </section>

        <section id="installationSection" class="mb-8">
            <h2 class="section-title">2. ì„¤ì¹˜ ì˜µì…˜</h2>
            <div class="input-group bg-white p-6 rounded-lg shadow">
                <label class="input-label">ì„¤ì¹˜ í¬ë§ ì‹œì  (ì„¤ì¹˜ë¹„ ë³€ë™)</label>
                <div class="space-y-2">
                    <label class="radio-label"><input type="radio" name="installationTime" value="weekday" class="radio-input" checked> í‰ì¼ ì£¼ê°„</label>
                    <label class="radio-label"><input type="radio" name="installationTime" value="weekend" class="radio-input"> ì£¼ë§/ì•¼ê°„ (í• ì¦ ì ìš©)</label>
                </div>
            </div>
        </section>

        <div class="text-center mb-8">
            <button id="calculateButton" class="btn-primary text-lg">ì˜ˆìƒ ìš”ê¸ˆ ê³„ì‚°í•˜ê¸°</button>
        </div>

        <section id="resultSection" class="hidden">
            <h2 class="section-title">ğŸ“Š ê³„ì‚° ê²°ê³¼</h2>
            
            <div class="result-card">
                <h3 class="text-xl font-semibold text-sky-600 mb-3">ìš”ê¸ˆ ìš”ì•½ (VAT í¬í•¨)</h3>
                <div class="grid md:grid-cols-2 gap-4">
                    <div>
                        <p class="result-label summary-item">ì„ íƒ í†µì‹ ì‚¬: <span id="selectedProviderDisplay" class="result-value"></span></p>
                        <p class="result-label summary-item">ì„ íƒ ì¸í„°ë„·: <span id="selectedInternet" class="result-value"></span></p>
                        <p class="result-label summary-item">ì„ íƒ TV: <span id="selectedTv" class="result-value"></span></p>
                    </div>
                    <div>
                        <p class="result-label summary-item">ì›” ì¸í„°ë„· ê¸°ë³¸ë£Œ: <span id="totalBaseInternetCost" class="result-value">0</span> ì›</p>
                        <p class="result-label summary-item">ì›” TV ì¶”ê°€ìš”ê¸ˆ: <span id="tvAddonCostDisplay" class="result-value">0</span> ì›</p>
                        <p class="result-label summary-item">ì›” ì™€ì´íŒŒì´ ê³µìœ ê¸° ì„ëŒ€ë£Œ: <span id="wifiRouterRentalCostDisplay" class="result-value">0</span> ì›</p>
                        <!-- MODIFIED: Added display for discount name -->
                        <p class="result-label summary-item">ì ìš©ëœ í• ì¸ëª…: <span id="discountNameDisplay" class="result-value text-green-600"></span></p>
                        <p class="result-label summary-item">ì›” í• ì¸ ê¸ˆì•¡: <span id="totalDiscountAmount" class="result-value text-green-600">0</span> ì›</p>
                        <hr class="my-1 border-sky-300">
                        <p class="mt-2 text-lg font-semibold">ìµœì¢… ì˜ˆìƒ ì›” ë‚©ë¶€ì•¡: <span id="finalMonthlyCost" class="total-value">0</span> ì›</p>
                    </div>
                </div>
            </div>

            <div class="result-card">
                <h3 class="text-xl font-semibold text-sky-600 mb-3">ğŸ ì‚¬ì€í’ˆ í˜œíƒ (ì˜ˆìƒ)</h3>
                <p class="result-label summary-item">ì‚¬ì€í’ˆ: <span id="giftValue" class="result-value">0</span> ì›</p>
                <p id="giftNote" class="text-xs text-slate-500 mt-1"></p>
            </div>

            <div class="result-card">
                <h3 class="text-xl font-semibold text-sky-600 mb-3">ì´ˆê¸° ì„¤ì¹˜ ë¹„ìš©</h3>
                <p class="result-label">ì˜ˆìƒ ì´ ì„¤ì¹˜ë¹„: <span id="installationCostResult" class="result-value text-lg">0</span> ì›</p>
            </div>
        </section>
        
        <section id="messageScriptSection" class="hidden mt-12">
            <h2 class="section-title">ğŸ“„ ê³ ê° ì•ˆë‚´ ë¬¸ì ìŠ¤í¬ë¦½íŠ¸ (ìƒë‹´ì› ì°¸ê³ ìš©)</h2>
            <div class="result-card">
                <h3 class="text-xl font-semibold text-sky-600 mb-3">1. ìƒë‹´ ë©”ëª¨</h3>
                <textarea id="memoScript" class="message-script-area" readonly></textarea>
                <div class="copy-button-container">
                    <button onclick="copyToClipboard('memoScript', 'copyFeedbackMemo')" class="btn-secondary text-xs">ë³µì‚¬í•˜ê¸°</button>
                    <span id="copyFeedbackMemo" class="copy-feedback"></span>
                </div>
            </div>
             <div class="result-card">
                <h3 class="text-xl font-semibold text-sky-600 mb-3">2. ë¯¼ê°ì •ë³´ ì „ì†¡ìš© ë§í¬ (ê³ ê° ë°œì†¡ìš©)</h3>
                <textarea id="sensitiveInfoLinkScriptSkyHcn" class="message-script-area" readonly></textarea>
                <div class="copy-button-container">
                    <button onclick="copyToClipboard('sensitiveInfoLinkScriptSkyHcn', 'copyFeedbackSensitiveInfoSkyHcn')" class="btn-secondary text-xs">ë³µì‚¬í•˜ê¸°</button>
                    <span id="copyFeedbackSensitiveInfoSkyHcn" class="copy-feedback"></span>
                </div>
            </div>
        </section>
    </main>

    <footer class="text-center p-6 mt-12 bg-sky-800 text-sky-200 text-sm">
        <p>ë³¸ ê³„ì‚°ê¸°ëŠ” ë¯¸ì†Œì—ì„œ ì œê³µí•©ë‹ˆë‹¤.</p>
        <p>&copy; 2024 SKY/HCN ê²°í•© í• ì¸ ê³„ì‚°ê¸°. ëª¨ë“  ì •ë³´ëŠ” ì°¸ê³ ìš©ì…ë‹ˆë‹¤.</p>
    </footer>

    <script>
        const providerData = {
          "kt_skylife": {
            "service_provider": "KT Skylife (SKY)",
            "currency": "KRW",
            "general_notes": [
              "ëª¨ë“  ì›” ìš”ê¸ˆì€ ë¶€ê°€ì„¸ í¬í•¨ ê°€ê²©ì¼ ìˆ˜ ìˆìœ¼ë©°, ì•½ì • ì¡°ê±´ì— ë”°ë¼ ë‹¬ë¼ì§ˆ ìˆ˜ ìˆìŠµë‹ˆë‹¤."
            ],
            "internet_plans": {
              "standalone": [
                { "speed": "100Mbps", "monthly_fee": 22000, "description": "SKYì¸í„°ë„·(ë‹¨ë…) 100mb", "id": "sky_inet_s_100" },
                { "speed": "200Mbps", "monthly_fee": 24200, "description": "SKYì¸í„°ë„·(ë‹¨ë…) 200mb", "id": "sky_inet_s_200" },
                { "speed": "500Mbps", "monthly_fee": 33000, "description": "SKYì¸í„°ë„·(ë‹¨ë…) 500mb", "id": "sky_inet_s_500" },
                { "speed": "1000Mbps", "monthly_fee": 36300, "description": "SKYì¸í„°ë„·(ë‹¨ë…) 1gb", "id": "sky_inet_s_1000" }
              ],
              "bundle_tv": [
                { "speed": "100Mbps", "monthly_fee": 22000, "description": "SKYì¸í„°ë„·(TVê²°í•©) 100mb", "id": "sky_inet_b_100" },
                { "speed": "200Mbps", "monthly_fee": 24200, "description": "SKYì¸í„°ë„·(TVê²°í•©) 200mb", "id": "sky_inet_b_200" },
                { "speed": "500Mbps", "monthly_fee": 33000, "description": "SKYì¸í„°ë„·(TVê²°í•©) 500mb", "id": "sky_inet_b_500" },
                { "speed": "1000Mbps", "monthly_fee": 36300, "description": "SKYì¸í„°ë„·(TVê²°í•©) 1gb", "id": "sky_inet_b_1000" }
              ]
            },
            "tv_plans": [
              { "name": "KT Skylife ë² ì´ì§", "monthly_fee": 16500, "description": "ë² ì´ì§", "id": "sky_tv_basic" },
              { "name": "KT Skylife í”„ë¦¬ë¯¸ì—„", "monthly_fee": 24200, "description": "í”„ë¦¬ë¯¸ì—„", "id": "sky_tv_premium" },
              { "name": "KT Skylife ë¬´ë¹™TV", "monthly_fee": 27500, "description": "ë¬´ë¹™TV", "id": "sky_tv_moving" }
            ],
            "equipment": {
              "wifi_router": [
                { "name": "ì¼ë°˜í˜•", "monthly_fee": 0, "description": "ì¼ë°˜í˜• (ë¬´ë£Œ)", "id": "sky_wifi_basic" },
                { "name": "ê³ ê¸‰í˜•", "monthly_fee": 3300, "description": "ê³ ê¸‰í˜• 3,300ì›", "id": "sky_wifi_premium" }
              ]
            },
            "discounts": {
              "no_gift_discount_100_200": {
                "name": "ì‚¬ì€í’ˆ ë¯¸ì„ íƒ 30% í• ì¸",
                "description": "100M/200M ìƒí’ˆ ëŒ€ìƒ",
                "percentage": 0.30,
                "applicable_plans": ["sky_inet_s_100", "sky_inet_s_200", "sky_inet_b_100", "sky_inet_b_200"]
              }
            },
            "gifts": {
              "default": { "value": 30000, "note": "í˜„ê¸ˆ, ìƒí’ˆê¶Œ, ê¸°íƒ€ ì‚¬ì€í’ˆ" }
            },
            "installation_costs": {
              "weekday": { "base_cost": 33000, "tv_addon_cost": 11000, "note": "í‰ì¼ ì£¼ê°„ ì„¤ì¹˜" },
              "weekend": { "base_cost": 49500, "tv_addon_cost": 16500, "note": "ì£¼ë§/ì•¼ê°„ í• ì¦" }
            }
          },
          "kt_hcn": {
            "service_provider": "HCN (KT HCN)",
            "currency": "KRW",
            "general_notes": [
              "ëª¨ë“  ì›” ìš”ê¸ˆì€ ë¶€ê°€ì„¸ í¬í•¨ ê°€ê²©ì¼ ìˆ˜ ìˆìœ¼ë©°, ì•½ì • ì¡°ê±´ì— ë”°ë¼ ë‹¬ë¼ì§ˆ ìˆ˜ ìˆìŠµë‹ˆë‹¤."
            ],
            "internet_plans": {
              "internet": [
                { "speed": "100Mbps", "monthly_fee": 22000, "description": "HCN ì¸í„°ë„· 100mb", "id": "hcn_inet_100" },
                { "speed": "200Mbps", "monthly_fee": 24200, "description": "HCN ì¸í„°ë„· 200mb", "id": "hcn_inet_200" },
                { "speed": "500Mbps", "monthly_fee": 33000, "description": "HCN ì¸í„°ë„· 500mb", "id": "hcn_inet_500" },
                { "speed": "1000Mbps", "monthly_fee": 36300, "description": "HCN ì¸í„°ë„· 1gb", "id": "hcn_inet_1000" }
              ]
            },
            "tv_plans": [
              { "name": "HCN TV ë² ì´ì§", "monthly_fee": 13200, "description": "ë² ì´ì§", "id": "hcn_tv_basic" },
              { "name": "HCN TV í”„ë¦¬ë¯¸ì—„", "monthly_fee": 19800, "description": "í”„ë¦¬ë¯¸ì—„", "id": "hcn_tv_premium" },
              { "name": "HCN TV Plus", "monthly_fee": 26400, "description": "Plus", "id": "hcn_tv_plus" }
            ],
            "equipment": {
              "wifi_router": [
                { "name": "ì¼ë°˜í˜•", "monthly_fee": 0, "description": "ì¼ë°˜í˜• (ë¬´ë£Œ)", "id": "hcn_wifi_basic" },
                { "name": "ê³ ê¸‰í˜•", "monthly_fee": 3300, "description": "ê³ ê¸‰í˜• 3,300ì›", "id": "hcn_wifi_premium" }
              ]
            },
            "discounts": {
              "equal_bundle_discount": {
                "name": "ë™ë“±ê²°í•© í• ì¸",
                "description": "ì¸í„°ë„·+TV ê²°í•© ì‹œ ì ìš©",
                "fixed_amount": 3300,
                "applicable_plans": "all"
              }
            },
            "gifts": {
              "default": { "value": 30000, "note": "í˜„ê¸ˆ, ìƒí’ˆê¶Œ, ê¸°íƒ€ ì‚¬ì€í’ˆ" }
            },
            "installation_costs": {
              "weekday": { "base_cost": 33000, "tv_addon_cost": 11000, "note": "í‰ì¼ ì£¼ê°„ ì„¤ì¹˜" },
              "weekend": { "base_cost": 49500, "tv_addon_cost": 16500, "note": "ì£¼ë§/ì•¼ê°„ í• ì¦" }
            }
          }
        };

        let currentProvider = "kt_skylife";

        function init() {
            setupEventListeners();
            updateProviderSelection();
        }

        function setupEventListeners() {
            // Provider selection change
            document.querySelectorAll('input[name="serviceProvider"]').forEach(radio => {
                radio.addEventListener('change', updateProviderSelection);
            });

            // SKY Internet type change
            document.querySelectorAll('input[name="skyInternetType"]').forEach(radio => {
                radio.addEventListener('change', updateInternetPlans);
            });

            // Calculate button
            document.getElementById('calculateButton').addEventListener('click', calculateResults);
        }

        function updateProviderSelection() {
            const selectedProvider = document.querySelector('input[name="serviceProvider"]:checked').value;
            currentProvider = selectedProvider === "sky" ? "kt_skylife" : "kt_hcn";
            
            updateUIForProvider();
            updateInternetPlans();
            updateTVPlans();
            updateWiFiRouters();
        }

        function updateUIForProvider() {
            const skyInternetTypeGroup = document.getElementById('skyInternetTypeGroup');
            const skyGiftDiscountOptionGroup = document.getElementById('skyGiftDiscountOptionGroup');
            
            if (currentProvider === "kt_skylife") {
                skyInternetTypeGroup.style.display = 'block';
                skyGiftDiscountOptionGroup.style.display = 'block';
            } else {
                skyInternetTypeGroup.style.display = 'none';
                skyGiftDiscountOptionGroup.style.display = 'none';
            }
        }

        function updateInternetPlans() {
            const internetPlanSelect = document.getElementById('internetPlan');
            internetPlanSelect.innerHTML = '<option value="">ì¸í„°ë„· ìš”ê¸ˆì œë¥¼ ì„ íƒí•˜ì„¸ìš”</option>';
            
            let plans = [];
            
            if (currentProvider === "kt_skylife") {
                const skyInternetType = document.querySelector('input[name="skyInternetType"]:checked').value;
                plans = providerData[currentProvider].internet_plans[skyInternetType];
            } else {
                plans = providerData[currentProvider].internet_plans.internet;
            }
            
            plans.forEach(plan => {
                const option = document.createElement('option');
                option.value = plan.id;
                option.textContent = `${plan.description} - ${plan.monthly_fee.toLocaleString()}ì›`;
                option.dataset.speed = plan.speed;
                option.dataset.monthlyFee = plan.monthly_fee;
                option.dataset.description = plan.description;
                internetPlanSelect.appendChild(option);
            });
        }

        function updateTVPlans() {
            const tvPlanSelect = document.getElementById('tvPlan');
            tvPlanSelect.innerHTML = '<option value="none">TV ì„ íƒ ì•ˆí•¨</option>';
            
            const tvPlans = providerData[currentProvider].tv_plans;
            tvPlans.forEach(plan => {
                const option = document.createElement('option');
                option.value = plan.id;
                option.textContent = `${plan.description} - ${plan.monthly_fee.toLocaleString()}ì›`;
                option.dataset.monthlyFee = plan.monthly_fee;
                option.dataset.description = plan.description;
                tvPlanSelect.appendChild(option);
            });
        }

        function updateWiFiRouters() {
            const wifiRouterSelect = document.getElementById('wifiRouter');
            wifiRouterSelect.innerHTML = '';
            
            const wifiRouters = providerData[currentProvider].equipment.wifi_router;
            wifiRouters.forEach(router => {
                const option = document.createElement('option');
                option.value = router.id;
                option.textContent = router.description;
                option.dataset.monthlyFee = router.monthly_fee;
                option.dataset.description = router.description;
                wifiRouterSelect.appendChild(option);
            });
        }

        function calculateResults() {
            const internetPlan = document.getElementById('internetPlan');
            const tvPlan = document.getElementById('tvPlan');
            const wifiRouter = document.getElementById('wifiRouter');
            const installationTime = document.querySelector('input[name="installationTime"]:checked').value;

            if (!internetPlan.value) {
                alert('ì¸í„°ë„· ìš”ê¸ˆì œë¥¼ ì„ íƒí•´ì£¼ì„¸ìš”.');
                return;
            }

            // Get selected values
            const selectedInternet = internetPlan.options[internetPlan.selectedIndex];
            const selectedTv = tvPlan.value !== 'none' ? tvPlan.options[tvPlan.selectedIndex] : null;
            const selectedWifi = wifiRouter.options[wifiRouter.selectedIndex];

            // Calculate costs
            const internetCost = parseInt(selectedInternet.dataset.monthlyFee);
            const tvCost = selectedTv ? parseInt(selectedTv.dataset.monthlyFee) : 0;
            const wifiCost = parseInt(selectedWifi.dataset.monthlyFee);

            // Calculate discounts
            let discountAmount = 0;
            let discountName = "í• ì¸ ì—†ìŒ";

            if (currentProvider === "kt_skylife") {
                const skyNoGiftDiscount = document.getElementById('skyNoGiftDiscount').checked;
                if (skyNoGiftDiscount) {
                    const discountData = providerData[currentProvider].discounts.no_gift_discount_100_200;
                    if (discountData.applicable_plans.includes(internetPlan.value)) {
                        discountAmount = internetCost * discountData.percentage;
                        discountName = discountData.name;
                    }
                }
            } else if (currentProvider === "kt_hcn") {
                if (selectedTv) {
                    const discountData = providerData[currentProvider].discounts.equal_bundle_discount;
                    discountAmount = discountData.fixed_amount;
                    discountName = discountData.name;
                }
            }

            const finalMonthlyCost = internetCost + tvCost + wifiCost - discountAmount;

            // Calculate installation costs
            const installationData = providerData[currentProvider].installation_costs[installationTime];
            const installationCost = installationData.base_cost + (selectedTv ? installationData.tv_addon_cost : 0);

            // Calculate gifts
            const giftValue = providerData[currentProvider].gifts.default.value;
            const giftNote = providerData[currentProvider].gifts.default.note;

            // Update UI
            updateResultsUI({
                provider: providerData[currentProvider].service_provider,
                internetPlan: selectedInternet.dataset.description,
                tvPlan: selectedTv ? selectedTv.dataset.description : "ì„ íƒ ì•ˆí•¨",
                internetCost,
                tvCost,
                wifiCost,
                discountAmount,
                discountName,
                finalMonthlyCost,
                installationCost,
                giftValue,
                giftNote
            });

            generateMessageScripts({
                provider: providerData[currentProvider].service_provider,
                internetPlan: selectedInternet.dataset.description,
                tvPlan: selectedTv ? selectedTv.dataset.description : "ì„ íƒ ì•ˆí•¨",
                finalMonthlyCost,
                installationCost,
                giftValue
            });

            // Show results
            document.getElementById('resultSection').classList.remove('hidden');
            document.getElementById('messageScriptSection').classList.remove('hidden');
        }

        function updateResultsUI(results) {
            document.getElementById('selectedProviderDisplay').textContent = results.provider;
            document.getElementById('selectedInternet').textContent = results.internetPlan;
            document.getElementById('selectedTv').textContent = results.tvPlan;
            document.getElementById('totalBaseInternetCost').textContent = results.internetCost.toLocaleString();
            document.getElementById('tvAddonCostDisplay').textContent = results.tvCost.toLocaleString();
            document.getElementById('wifiRouterRentalCostDisplay').textContent = results.wifiCost.toLocaleString();
            document.getElementById('discountNameDisplay').textContent = results.discountName;
            document.getElementById('totalDiscountAmount').textContent = results.discountAmount.toLocaleString();
            document.getElementById('finalMonthlyCost').textContent = results.finalMonthlyCost.toLocaleString();
            document.getElementById('installationCostResult').textContent = results.installationCost.toLocaleString();
            document.getElementById('giftValue').textContent = results.giftValue.toLocaleString();
            document.getElementById('giftNote').textContent = results.giftNote;
        }

        function generateMessageScripts(data) {
            const memoScript = `[${data.provider} ìƒë‹´ ë©”ëª¨]
- ì„ íƒ ì¸í„°ë„·: ${data.internetPlan}
- ì„ íƒ TV: ${data.tvPlan}
- ì›” ë‚©ë¶€ì•¡: ${data.finalMonthlyCost.toLocaleString()}ì›
- ì„¤ì¹˜ë¹„: ${data.installationCost.toLocaleString()}ì›
- ì‚¬ì€í’ˆ: ${data.giftValue.toLocaleString()}ì›`;

            const sensitiveInfoLinkScript = `ì•ˆë…•í•˜ì„¸ìš”. ${data.provider} ìƒë‹´ì‚¬ì…ë‹ˆë‹¤.

ì„ íƒí•˜ì‹  ìƒí’ˆ:
- ${data.internetPlan}
- ${data.tvPlan}
- ì›” ë‚©ë¶€ì•¡: ${data.finalMonthlyCost.toLocaleString()}ì›

ì‹ ì²­ì„ ìœ„í•´ ê°œì¸ì •ë³´ê°€ í•„ìš”í•©ë‹ˆë‹¤.
ì•„ë˜ ë§í¬ë¥¼ í†µí•´ ì•ˆì „í•˜ê²Œ ì „ì†¡í•´ ì£¼ì„¸ìš”:

https://forms.gle/example

ê°ì‚¬í•©ë‹ˆë‹¤.`;

            document.getElementById('memoScript').textContent = memoScript;
            document.getElementById('sensitiveInfoLinkScriptSkyHcn').textContent = sensitiveInfoLinkScript;
        }

        function copyToClipboard(elementId, feedbackId) {
            const element = document.getElementById(elementId);
            element.select();
            element.setSelectionRange(0, 99999);
            
            try {
                document.execCommand('copy');
                const feedback = document.getElementById(feedbackId);
                feedback.textContent = 'ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤!';
                setTimeout(() => {
                    feedback.textContent = '';
                }, 2000);
            } catch (err) {
                console.error('ë³µì‚¬ ì‹¤íŒ¨:', err);
            }
        }

        // Initialize when page loads
        document.addEventListener('DOMContentLoaded', init);
    </script>
</body>
</html>