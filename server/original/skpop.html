<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SKB B tv pop ê²°í•© í• ì¸ ê³„ì‚°ê¸°</title>
    <link rel="stylesheet" href="/src/index.css">
    <style>
        body { font-family: 'Inter', sans-serif; background-color: #f8fafc; /* slate-50 */ }
        .input-group { margin-bottom: 1.5rem; }
        .input-label { display: block; margin-bottom: 0.5rem; font-weight: 500; color: #334155; /* slate-700 */ }
        .input-field, .select-field { width: 100%; padding: 0.5rem 0.75rem; border: 1px solid #cbd5e1; /* slate-300 */ border-radius: 0.375rem; box-shadow: sm; transition: border-color 0.15s ease-in-out, box-shadow 0.15s ease-in-out; }
        .input-field:focus, .select-field:focus { border-color: #ef4444; /* red-500 */ outline: none; box-shadow: 0 0 0 0.2rem rgba(239, 68, 68, 0.25); } /* SK Red focus */
        .select-field:disabled, .input-field:disabled { background-color: #e9e9e9; /* Slightly darker gray for disabled */ cursor: not-allowed; opacity: 0.7; }
        .btn-primary { background-color: #ef4444; /* red-500 */ color: white; padding: 0.75rem 1.5rem; border-radius: 0.375rem; font-weight: 600; transition: background-color 0.3s ease; }
        .btn-primary:hover { background-color: #dc2626; /* red-600 */ }
        .btn-secondary { background-color: #f97316; /* orange-500 */ color: white; padding: 0.5rem 1rem; border-radius: 0.375rem; font-weight: 500; transition: background-color 0.3s ease; }
        .btn-secondary:hover { background-color: #ea580c; /* orange-600 */ }
        .section-title { font-size: 1.5rem; font-weight: 700; color: #c2410c; /* orange-700 */ margin-bottom: 1rem; padding-bottom: 0.5rem; border-bottom: 2px solid #fb923c /* orange-400 */;}
        .result-card { background-color: white; padding: 1.5rem; border-radius: 0.5rem; box-shadow: 0 4px 6px -1px rgba(0,0,0,0.1), 0 2px 4px -1px rgba(0,0,0,0.06); margin-bottom: 1.5rem; }
        .result-label { color: #475569; /* slate-600 */ }
        .result-value { color: #1e293b; /* slate-800 */ font-weight: 600;}
        .total-value { color: #ef4444; /* red-500 */ font-size: 1.5rem; font-weight: 700;}
        .mobile-line-item { border: 1px solid #e2e8f0; /* slate-200 */ padding: 1rem; border-radius: 0.375rem; margin-bottom: 0.75rem; }
        .radio-label { margin-right: 1rem; margin-bottom: 0.5rem; display: inline-flex; align-items: center; cursor: pointer;}
        .radio-input { margin-right: 0.5rem; accent-color: #ef4444; /* red-500 */ }
        .info-box { background-color: #fff7ed; /* orange-50 */ border-left: 4px solid #f97316; /* orange-500 */ padding: 1rem; margin-top:0.5rem; margin-bottom:1rem; font-size: 0.875rem; color: #9a3412; /* orange-800 */}
        .info-box ul { padding-left: 1.25rem; list-style-type: disc; }
        .info-box ul ul { padding-left: 1rem; list-style-type: circle;}
        .sensitive-info-box { background-color: #fffbeb; /* yellow-50 */ border-left: 4px solid #f59e0b; /* yellow-500 */ padding: 1rem; margin-bottom: 1.5rem; font-size: 0.875rem; color: #b45309; /* yellow-700 */}
        .sensitive-info-box a { color: #0ea5e9; /* sky-500 */ text-decoration: underline;}
        .sensitive-info-box a:hover { color: #0284c7; /* sky-600 */}
        .toggle-switch { position: relative; display: inline-block; width: 40px; height: 20px; margin-left: 10px; vertical-align: middle;}
        .toggle-switch input { opacity: 0; width: 0; height: 0; }
        .slider { position: absolute; cursor: pointer; top: 0; left: 0; right: 0; bottom: 0; background-color: #ccc; transition: .4s; border-radius: 20px;}
        .slider:before { position: absolute; content: ""; height: 16px; width: 16px; left: 2px; bottom: 2px; background-color: white; transition: .4s; border-radius: 50%;}
        input:checked + .slider { background-color: #ef4444; /* red-500 */ }
        input:checked + .slider:before { transform: translateX(20px); }
        .discount-details { background-color: #ffe4e6; border: 1px solid #ffb3b3; padding: 0.75rem; border-radius: 0.375rem; font-size:0.875rem; } /* Light red for SKT */
        .discount-details ul { padding-left: 1.25rem; }
        .discount-details ul ul { padding-left: 1rem; }
        .discount-details h4 { font-weight: 600; margin-top: 0.75rem; margin-bottom: 0.25rem; color: #be123c; } /* Darker red for subheadings */
        .discount-details strong { color: #dc2626; } /* SKT Red for emphasis */
        .summary-item { margin-bottom: 0.25rem; }
        .message-script-area { width: 100%; min-height: 150px; padding: 0.5rem; border: 1px solid #cbd5e1; border-radius: 0.375rem; font-size: 0.875rem; white-space: pre-wrap; word-wrap: break-word; }
        .copy-button-container { text-align: right; margin-top: 0.5rem; }
        .copy-feedback { font-size: 0.75rem; color: green; margin-left: 0.5rem; }
        .cost-qualifier {font-size: 0.875rem; color: #475569; margin-left: 0.25rem;}
    </style>
</head>
<body class="text-slate-800">
    <header class="bg-red-600 text-white p-6 shadow-md">
        <div class="container mx-auto max-w-4xl">
            <h1 class="text-3xl font-bold text-center">SKB B tv pop ê²°í•© í• ì¸ ê³„ì‚°ê¸°</h1>
            <p class="text-center text-red-200 mt-1">ì„ íƒí•˜ì‹  ì„œë¹„ìŠ¤ì™€ í• ì¸ ìœ í˜•ì— ë”°ë¥¸ ì˜ˆìƒ ìš”ê¸ˆì„ ê³„ì‚°í•´ ë³´ì„¸ìš”.</p>
        </div>
    </header>

    <main class="container mx-auto max-w-4xl p-4 sm:p-6 lg:p-8">
        <section id="inputSection" class="mb-8">
            <h2 class="section-title">1. ì„œë¹„ìŠ¤ ì„ íƒ (3ë…„ ì•½ì • ê¸°ì¤€, VAT í¬í•¨)</h2>
            
            <div class="info-box">
                <p class="font-semibold">ì•ˆë‚´ì‚¬í•­:</p>
                <ul>
                    <li>SKB pop ì¸í„°ë„·ì€ ë‹¨ë… ê°€ì…ì´ ë¶ˆê°€ëŠ¥í•˜ë©°, ë°˜ë“œì‹œ TVì™€ í•¨ê»˜ ë²ˆë“¤ë¡œ ì œê³µë©ë‹ˆë‹¤.</li>
                    <li>B tv pop ì„œë¹„ìŠ¤ì—ëŠ” ì¼ë°˜ì „í™” ë˜ëŠ” ì¸í„°ë„· ì „í™”ê°€ í¬í•¨ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤.</li>
                </ul>
            </div>

            <div class="sensitive-info-box">
                <p class="font-semibold text-yellow-800">âš ï¸ ë¯¼ê°ì •ë³´</p>
                <p class="mt-1">
                    <a href="https://miso.kr/booking/forms/secure-details?querystring=ê³ ê°ë‹˜ ì „í™”ë²ˆí˜¸" target="_blank">https://miso.kr/booking/forms/secure-details?querystring=ê³ ê°ë‹˜ ì „í™”ë²ˆí˜¸</a>
                </p>
                <p class="mt-1">ã„´&gt; ìœ„ ë§í¬ë¥¼ ê³ ê°ì—ê²Œ ë¬¸ìë¡œ ì „ì†¡í•´ì£¼ì„¸ìš”. (ì•„ë˜ ìŠ¤í¬ë¦½íŠ¸ ë³µì‚¬ ê¸°ëŠ¥ ì´ìš©)</p>
            </div>

            <p class="mb-6 text-sm text-slate-600">ì•„ë˜ í•­ëª©ë“¤ì„ ì„ íƒí•˜ê±°ë‚˜ ì…ë ¥í•´ì£¼ì„¸ìš”. ëª¨ë“  ìš”ê¸ˆì€ SKë¸Œë¡œë“œë°´ë“œ í‘œì¤€ 3ë…„ ì•½ì •, ë¶€ê°€ì„¸ í¬í•¨ ê¸ˆì•¡ì„ ê¸°ì¤€ìœ¼ë¡œ í•©ë‹ˆë‹¤.</p>

            <div class="grid md:grid-cols-2 gap-6">
                <div class="input-group">
                    <label for="internetPlan" class="input-label">SKB pop ì¸í„°ë„· ìš”ê¸ˆì œ (TV ë²ˆë“¤)</label>
                    <select id="internetPlan" class="select-field">
                        </select>
                </div>
                
                <div class="input-group">
                    <label for="wifiRouter" class="input-label block mb-1">ì™€ì´íŒŒì´ ê³µìœ ê¸° (ì„ íƒ)</label>
                    <select id="wifiRouter" class="select-field">
                        </select>
                </div>

                <div class="input-group">
                    <label for="tvPlan" class="input-label">B tv pop ìš”ê¸ˆì œ (1ë²ˆì§¸ TV)</label>
                    <select id="tvPlan" class="select-field">
                         </select>
                </div>

                <div class="input-group">
                    <label for="tvStb" class="input-label">AI/íŠ¹ìˆ˜ ì…‹í†±ë°•ìŠ¤ ì¶”ê°€ (ì„ íƒ)</label>
                    <select id="tvStb" class="select-field">
                        <option value="none" data-price="0">ì„ íƒ ì•ˆí•¨ (ê¸°ë³¸ì…‹í†± ì‚¬ìš©)</option>
                    </select>
                     <p class="text-xs text-slate-500 mt-1">B tv pop ìš”ê¸ˆì œì— ê¸°ë³¸ ì…‹í†±ì´ í¬í•¨ë˜ì–´ ìˆìŠµë‹ˆë‹¤. í•„ìš” ì‹œ ì¶”ê°€ ì„ íƒí•©ë‹ˆë‹¤.</p>
                </div>

                <div class="input-group">
                    <label for="additionalTvPlan" class="input-label">ì¶”ê°€ TV ì„ íƒ (2ë²ˆì§¸ TV)</label>
                    <select id="additionalTvPlan" class="select-field">
                         </select>
                </div>
            </div>
            
            <div class="input-group mt-6">
                <label class="input-label">ëª¨ë°”ì¼ íšŒì„  ì •ë³´ (ìµœëŒ€ 5íšŒì„ , ìš”ì¦˜ ê°€ì¡±ê²°í•© ì‹œ)</label>
                <div class="flex items-center mb-2">
                    <label for="mobileLinesCount" class="mr-2 text-sm text-slate-700">ê²°í•©í•  SKT ëª¨ë°”ì¼ íšŒì„  ìˆ˜:</label>
                    <input type="number" id="mobileLinesCount" min="0" max="5" value="0" class="input-field w-20 text-center">
                </div>
                <div id="mobileLinesContainer" class="space-y-3"></div>
            </div>
        </section>

        <section id="discountTypeSection" class="mb-8">
            <h2 class="section-title">2. ê²°í•© í• ì¸ ìœ í˜• ì„ íƒ</h2>
            <div class="bg-white p-6 rounded-lg shadow">
                <p class="mb-4 text-sm text-slate-600">ê°€ì¥ ìœ ë¦¬í•œ í• ì¸ ìœ í˜•ì„ ì„ íƒí•˜ê±°ë‚˜, ê° ìœ í˜•ë³„ ì˜ˆìƒ ìš”ê¸ˆì„ ë¹„êµí•´ë³´ì„¸ìš”.</p>
                <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-x-4 gap-y-2">
                    <div class="flex items-center">
                        <label class="radio-label"><input type="radio" name="discountType" value="noBundleDiscount" class="radio-input" checked> ê²°í•© í• ì¸ ì—†ìŒ</label>
                        </div>
                    <div class="flex items-center">
                        <label class="radio-label"><input type="radio" name="discountType" value="ìš”ì¦˜ ê°€ì¡±ê²°í•©" class="radio-input"> ìš”ì¦˜ ê°€ì¡±ê²°í•©</label>
                        <label class="toggle-switch"><input type="checkbox" id="yozoomGajokDetailsToggle"><span class="slider"></span></label>
                        <span class="ml-1 text-xs text-slate-500">(ìƒì„¸ë³´ê¸°)</span>
                    </div>
                     <div class="flex items-center">
                        <label class="radio-label"><input type="radio" name="discountType" value="íŒ¨ë°€ë¦¬ê²°í•© (pop ì—°ê³„)" class="radio-input"> íŒ¨ë°€ë¦¬ê²°í•© (pop ì—°ê³„)</label>
                        <label class="toggle-switch"><input type="checkbox" id="familySktDetailsToggle"><span class="slider"></span></label>
                        <span class="ml-1 text-xs text-slate-500">(ìƒì„¸ë³´ê¸°)</span>
                    </div>
                    <div class="flex items-center">
                        <label class="radio-label"><input type="radio" name="discountType" value="ì•Œëœ°í•œ ê²°í•©" class="radio-input"> ì•Œëœ°í•œ ê²°í•©</label>
                        <label class="toggle-switch"><input type="checkbox" id="mvnoSktDetailsToggle"><span class="slider"></span></label>
                        <span class="ml-1 text-xs text-slate-500">(ìƒì„¸ë³´ê¸°)</span>
                    </div>
                </div>
                <div class="input-group mt-6">
                    <label class="input-label">ê²°í•© ì ìš© ì‹œì  (ì›” ì²­êµ¬ìš”ê¸ˆ í‘œì‹œ ë°©ì‹)</label>
                    <div class="space-y-2">
                        <label class="radio-label">
                            <input type="radio" name="bundleApplicationTime" value="pre" class="radio-input" checked> ì„ ê²°í•© (ì›” ì²­êµ¬ì•¡ì— í• ì¸ ì¦‰ì‹œ ë°˜ì˜)
                        </label>
                        <label class="radio-label">
                            <input type="radio" name="bundleApplicationTime" value="post" class="radio-input"> í›„ê²°í•© (ì›” ì²­êµ¬ì•¡ì— í• ì¸ ë¯¸ë°˜ì˜, ì¶”í›„ ì ìš©)
                        </label>
                    </div>
                    <p class="text-xs text-slate-500 mt-1">í›„ê²°í•© ì„ íƒ ì‹œ, ìµœì¢… ì›” ë‚©ë¶€ì•¡ì€ í• ì¸ ì „ ê¸ˆì•¡ìœ¼ë¡œ í‘œì‹œë©ë‹ˆë‹¤.</p>
                </div>

                <div id="yozoomGajokDetailsContainer" class="mt-3 hidden discount-details">
                    <p class="font-semibold mb-1">ìš”ì¦˜ ê°€ì¡±ê²°í•© ìƒì„¸ (ìƒë‹´ì› ì°¸ê³ ìš©):</p>
                    <p>ì¸í„°ë„· í• ì¸: <span id="detailYgInternetDiscount" class="font-bold">0</span>ì› <span id="detailYgInternetType" class="text-xs"></span></p>
                    <p>íœ´ëŒ€í° ì´ í• ì¸ (ì°¸ê³ ìš©): <span id="detailYgMobileDiscount" class="font-bold">0</span>ì›</p>
                    <hr class="my-2 border-red-300">
                    <div class="text-xs mt-2 mb-1 text-red-700 font-semibold skt-summary-details">
                        <p class="font-bold">ì£¼ìš” íŠ¹ì§•:</p><ul><li>ì¸í„°ë„· ëª…ì˜ì ë³¸ì¸ ëª¨ë°”ì¼ 1íšŒì„  í•„ìˆ˜ í¬í•¨, ìµœëŒ€ 5ëŒ€ ê°€ì¡± ëª¨ë°”ì¼ ê²°í•©.</li></ul>
                        <p class="font-bold mt-2">ì¸í„°ë„· í• ì¸ (JSON ê¸°ë°˜):</p><ul id="yozoomGajokInternetDiscountTiers"></ul>
                        <p class="font-bold mt-2">íœ´ëŒ€í° í• ì¸ (ì¸í„°ë„· ì†ë„ ë° íšŒì„  ìˆ˜ ê¸°ë°˜, ì°¸ê³ ìš©):</p><ul id="yozoomGajokMobileDiscountTiers"></ul>
                        <p class="mt-2 text-red-500 font-bold">ì°¸ê³ : ëª¨ë°”ì¼ í• ì¸ì•¡ì€ ì„ íƒì•½ì • ë“± íƒ€ í• ì¸ê³¼ ì¤‘ë³µ ì—¬ë¶€ SKT í™•ì¸ í•„ìš”.</p>
                    </div>
                </div>
                <div id="familySktDetailsContainer" class="mt-3 hidden discount-details">
                    <p class="font-semibold mb-1">íŒ¨ë°€ë¦¬ê²°í•© (pop ì—°ê³„) ìƒì„¸ (ìƒë‹´ì› ì°¸ê³ ìš©):</p>
                    <p>ìíšŒì„  ì¸í„°ë„· í• ì¸: <span id="detailFsInternetDiscount" class="font-bold">0</span>ì›</p>
                    <hr class="my-2 border-red-300">
                    <div class="text-xs mt-2 mb-1 text-red-700 font-semibold skt-summary-details">
                        <p class="font-bold">ì£¼ìš” íŠ¹ì§•:</p><ul><li>ë³¸ì¸ ë˜ëŠ” ì§ê³„ê°€ì¡±ì˜ SKB ì¸í„°ë„·(ëª¨íšŒì„ )ì´ ë‹¤ë¥¸ ì¥ì†Œì— ìˆì„ ê²½ìš°, ì‹ ê·œ ì¶”ê°€ ì¸í„°ë„·(ìíšŒì„ ) í• ì¸.</li><li>ëª¨íšŒì„  B tv ì—¬ë¶€ í•„ìˆ˜ í™•ì¸.</li></ul>
                        <p class="font-bold mt-2">í• ì¸ì•¡ (JSON ê¸°ë°˜, ìíšŒì„  ê¸°ì¤€):</p><ul id="familyInternetDiscountTiers"></ul>
                    </div>
                </div>
                <div id="mvnoSktDetailsContainer" class="mt-3 hidden discount-details">
                    <p class="font-semibold mb-1">ì•Œëœ°í•œ ê²°í•© ìƒì„¸ (ìƒë‹´ì› ì°¸ê³ ìš©):</p>
                    <p>ì¸í„°ë„· í• ì¸: <span id="detailMsInternetDiscount" class="font-bold">0</span>ì›</p>
                    <hr class="my-2 border-red-300">
                    <div class="text-xs mt-2 mb-1 text-red-700 font-semibold skt-summary-details">
                        <p class="font-bold">ì£¼ìš” íŠ¹ì§•:</p><ul><li>SKB ì¸í„°ë„· + ë³¸ì¸ ëª…ì˜ ì•Œëœ°í° 1:1 ê²°í•©.</li><li>SK ì•Œëœ°í° í†µì‹ ì‚¬ ë° ìš”ê¸ˆì œ í™•ì¸ í•„ìˆ˜.</li></ul>
                        <p class="font-bold mt-2">í• ì¸ì•¡ (JSON ê¸°ë°˜, ì¸í„°ë„· ì†ë„ë³„):</p><ul id="mvnoInternetDiscountTiers"></ul>
                    </div>
                </div>
                </div>
        </section>

        <section id="installationSection" class="mb-8">
            <h2 class="section-title">3. ì„¤ì¹˜ ì˜µì…˜ (SKB ì„¤ì¹˜ë¹„ ì •ì±… í™•ì¸ í•„ìš”)</h2>
            <div class="input-group bg-white p-6 rounded-lg shadow">
                <label class="input-label">ì„¤ì¹˜ í¬ë§ ì‹œì  (ì„¤ì¹˜ë¹„ ë³€ë™ ê°€ëŠ¥)</label>
                <div class="space-y-2">
                    <label class="radio-label"><input type="radio" name="installationTime" value="weekday" class="radio-input" checked> í‰ì¼ ì£¼ê°„</label>
                    <label class="radio-label"><input type="radio" name="installationTime" value="weekend" class="radio-input"> ì£¼ë§/ì•¼ê°„ (í• ì¦ ì ìš© ê°€ëŠ¥ì„±)</label>
                </div>
                <p class="text-xs text-red-500 mt-2">* ì•„ë˜ í‘œì‹œë˜ëŠ” ì„¤ì¹˜ë¹„ëŠ” JSON ë°ì´í„°ë¥¼ ê¸°ì¤€ìœ¼ë¡œ í•˜ë©°, ì‹¤ì œ SKB ì„¤ì¹˜ë¹„ëŠ” ì„œë¹„ìŠ¤ ì¡°í•© ë° ì •ì±…ì— ë”°ë¼ ë‹¤ë¦…ë‹ˆë‹¤. ê°€ì… ì‹œ ê¼­ í™•ì¸í•˜ì„¸ìš”.</p>
            </div>
        </section>

        <div class="text-center mb-8">
            <button id="calculateButton" class="btn-primary text-lg">ì˜ˆìƒ ìš”ê¸ˆ ê³„ì‚°í•˜ê¸°</button>
        </div>

        <section id="resultSection" class="hidden">
            <h2 class="section-title">ğŸ“Š ê³„ì‚° ê²°ê³¼</h2>
            
            <div class="result-card">
                <h3 class="text-xl font-semibold text-orange-600 mb-3">ìš”ê¸ˆ ìš”ì•½ (VAT í¬í•¨)</h3>
                <div class="grid md:grid-cols-2 gap-4">
                    <div>
                        <p class="result-label summary-item">ì„ íƒ ì¸í„°ë„·: <span id="selectedInternet" class="result-value"></span></p>
                        <p class="result-label summary-item">ì„ íƒ TV (1ë²ˆì§¸): <span id="selectedTv" class="result-value"></span></p>
                        <p class="result-label summary-item">ì„ íƒ ì¶”ê°€ AI/íŠ¹ìˆ˜ ì…‹í†± (1ë²ˆì§¸ TV): <span id="selectedStb" class="result-value"></span></p>
                        <p class="result-label summary-item">ì„ íƒ ì¶”ê°€ TV (2ë²ˆì§¸): <span id="selectedAdditionalTv" class="result-value"></span></p>
                        <p class="result-label summary-item">ì„ íƒ ì™€ì´íŒŒì´: <span id="selectedWifi" class="result-value"></span></p>
                        <p class="result-label summary-item">ëª¨ë°”ì¼ íšŒì„  ìˆ˜: <span id="selectedMobileCount" class="result-value"></span></p>
                        <p class="result-label summary-item">ì ìš© í• ì¸ ìœ í˜•: <span id="selectedDiscountType" class="result-value"></span></p>
                    </div>
                    <div>
                        <p class="result-label summary-item">ì›” ì¸í„°ë„· ê¸°ë³¸ë£Œ (TVê²°í•© ê¸°ì¤€): <span id="totalBaseInternetCost" class="result-value">0</span> ì›</p>
                        <p class="result-label text-green-600 summary-item">ì›” ì´ ì¸í„°ë„· ê²°í•© í• ì¸ì•¡ (ì˜ˆìƒ): <span id="totalInternetDiscountAmount" class="result-value text-green-600">0</span> ì›</p>
                        <p class="text-xs text-slate-500 ml-2 mb-1" id="internetDiscountBreakdown"></p>
                        
                        <p class="result-label summary-item">ì›” ì™€ì´íŒŒì´ ê³µìœ ê¸° ì„ëŒ€ë£Œ: <span id="wifiRouterRentalCostDisplay" class="result-value">0</span> ì›</p>
                        
                        <div id="tvCostSummaryContainer" class="hidden"> 
                            <hr class="my-1 border-slate-200">
                            <p class="result-label summary-item">ì›” TV ìš”ê¸ˆ (1ë²ˆì§¸, ê¸°ë³¸ì…‹í†± í¬í•¨): <span id="tvBaseCostDisplay" class="result-value">0</span> ì›</p>
                            <p class="result-label summary-item">ì›” ì¶”ê°€ AI/íŠ¹ìˆ˜ ì…‹í†± ì„ëŒ€ë£Œ (1ë²ˆì§¸): <span id="stbRentalCostDisplay" class="result-value">0</span> ì›</p>
                        </div>
                         <div id="additionalTvCostSummaryContainer" class="hidden">
                            <hr class="my-1 border-slate-200">
                            <p class="result-label summary-item">ì›” ì¶”ê°€ TV ìš”ê¸ˆ (2ë²ˆì§¸): <span id="additionalTvCostDisplay" class="result-value">0</span> ì›</p>
                        </div>
                        <hr class="my-1 border-red-300">
                        <p class="mt-2 text-lg font-semibold">
                            <span id="finalCostLabelText">ìµœì¢… ì˜ˆìƒ ì›” ë‚©ë¶€ì•¡</span><span id="finalCostLabelQualifier" class="cost-qualifier"></span>: <span id="finalMonthlyCost" class="total-value">0</span> ì›
                        </p>
                    </div>
                </div>
            </div>

            <div class="result-card">
                <h3 class="text-xl font-semibold text-orange-600 mb-3">ğŸ ì‚¬ì€í’ˆ í˜œíƒ (ì˜ˆìƒ)</h3>
                <p class="result-label summary-item">ì´ ì‚¬ì€í’ˆ ê°€ì¹˜ (ì˜ˆìƒ): <span id="giftTotal" class="result-value text-green-600">0</span> ì›</p>
                <p class="text-xs text-red-500 mt-2">* ìœ„ ì‚¬ì€í’ˆ ì •ë³´ëŠ” ì œê³µëœ ì •ë³´ë¥¼ ê¸°ì¤€ìœ¼ë¡œ í•˜ë©°, ì‹¤ì œ SKB ì •ì±… ë° ì‹œì ì— ë”°ë¼ ë³€ë™ë  ìˆ˜ ìˆìœ¼ë‹ˆ ê°€ì… ì‹œì ì— ë°˜ë“œì‹œ ì¬í™•ì¸ ë°”ëë‹ˆë‹¤.</p>
            </div>

            <div class="result-card">
                <h3 class="text-xl font-semibold text-orange-600 mb-3">ì´ˆê¸° ì„¤ì¹˜ ë¹„ìš© (SKB ì •ì±… í™•ì¸ í•„ìš”)</h3>
                <p class="result-label">ì˜ˆìƒ ì´ ì„¤ì¹˜ë¹„ (JSON ë°ì´í„° ê¸°ì¤€): <span id="installationCostResult" class="result-value text-lg">0</span> ì›</p>
                <p class="text-xs text-slate-500 mt-1" id="installationCostDescription"></p>
                <p class="text-xs text-slate-500 mt-1">* ì„ íƒí•˜ì‹  ì„¤ì¹˜ ì‹œì (í‰ì¼/ì£¼ë§) ë° ì„œë¹„ìŠ¤ ì¡°í•©ì— ë”°ë¼ ê³„ì‚°ë©ë‹ˆë‹¤. ì‹¤ì œ SKB ì„¤ì¹˜ë¹„ëŠ” í¬ê²Œ ë‹¤ë¥¼ ìˆ˜ ìˆìœ¼ë©°, í”„ë¡œëª¨ì…˜ìœ¼ë¡œ ë©´ì œë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
            </div>
            
             <div class="result-card mt-6">
                <h3 class="text-xl font-semibold text-orange-600 mb-2">ì¶”ê°€ ì•ˆë‚´ì‚¬í•­</h3>
                <ul class="list-disc list-inside text-sm text-slate-600 space-y-1">
                    <li>ë³¸ ê³„ì‚°ê¸°ëŠ” ì œê³µëœ SKB B tv pop ê²°í•©ìƒí’ˆ ì •ë³´ë¥¼ ë°”íƒ•ìœ¼ë¡œ í•œ ì¶”ì •ì¹˜ì…ë‹ˆë‹¤.</li>
                    <li>ì‹¤ì œ ìš”ê¸ˆì€ SKBì˜ ìµœì‹  ì •ì±…, ê°€ì… ì‹œì ì˜ í”„ë¡œëª¨ì…˜, ì¶”ê°€ ì„ íƒ ì‚¬í•­ì— ë”°ë¼ ë‹¬ë¼ì§ˆ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</li>
                    <li>ì•½ì • ê¸°ê°„ ë‚´ í•´ì§€ ì‹œ ìœ„ì•½ê¸ˆì´ ë°œìƒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</li>
                    <li>ë” ì •í™•í•œ ì •ë³´ëŠ” SKB ê³µì‹ í™ˆí˜ì´ì§€ ë˜ëŠ” ê³ ê°ì„¼í„°(êµ­ë²ˆì—†ì´ 106)ë¥¼ í†µí•´ í™•ì¸í•˜ì‹œê¸° ë°”ëë‹ˆë‹¤.</li>
                </ul>
            </div>
        </section>
        
        <section id="messageScriptSection" class="hidden mt-12">
            <h2 class="section-title">ğŸ“„ ê³ ê° ì•ˆë‚´ ë¬¸ì ìŠ¤í¬ë¦½íŠ¸ (ìƒë‹´ì› ì°¸ê³ ìš©)</h2>
            <div class="result-card">
                <h3 class="text-xl font-semibold text-orange-600 mb-3">1. ì „ì‚° ë©”ëª¨</h3>
                <textarea id="memoScript" class="message-script-area" readonly></textarea>
                <div class="copy-button-container"><button onclick="copyToClipboard('memoScript', 'copyFeedbackMemo')" class="btn-secondary text-xs">ë³µì‚¬í•˜ê¸°</button><span id="copyFeedbackMemo" class="copy-feedback"></span></div>
            </div>
            <div class="result-card">
                <h3 class="text-xl font-semibold text-orange-600 mb-3">2. ìƒí’ˆ ì•ˆë‚´ ë¬¸ì</h3>
                <textarea id="infoScript" class="message-script-area" readonly></textarea>
                <div class="copy-button-container"><button onclick="copyToClipboard('infoScript', 'copyFeedbackInfo')" class="btn-secondary text-xs">ë³µì‚¬í•˜ê¸°</button><span id="copyFeedbackInfo" class="copy-feedback"></span></div>
            </div>
            <div class="result-card">
                <h3 class="text-xl font-semibold text-orange-600 mb-3">3. ê°€ì… ì™„ë£Œ ë¬¸ì</h3>
                <textarea id="completeScript" class="message-script-area" readonly></textarea>
                <div class="copy-button-container"><button onclick="copyToClipboard('completeScript', 'copyFeedbackComplete')" class="btn-secondary text-xs">ë³µì‚¬í•˜ê¸°</button><span id="copyFeedbackComplete" class="copy-feedback"></span></div>
            </div>
            <div class="result-card">
                <h3 class="text-xl font-semibold text-orange-600 mb-3">4. ë¯¼ê°ì •ë³´ ì „ì†¡ìš© ë§í¬ (ê³ ê° ë°œì†¡ìš©)</h3>
                <textarea id="sensitiveInfoLinkScript" class="message-script-area" readonly></textarea>
                <div class="copy-button-container">
                    <button onclick="copyToClipboard('sensitiveInfoLinkScript', 'copyFeedbackSensitiveInfo')" class="btn-secondary text-xs">ë³µì‚¬í•˜ê¸°</button>
                    <span id="copyFeedbackSensitiveInfo" class="copy-feedback"></span>
                </div>
            </div>
        </section>
    </main>

    <footer class="text-center p-6 mt-12 bg-red-700 text-red-100 text-sm">
        <p>ë³¸ ê³„ì‚°ê¸°ëŠ” SKB ë¯¸ì†Œì—ì„œ ì œê³µí•©ë‹ˆë‹¤.</p>
        <p>&copy; 2024 SKB B tv pop ê²°í•© í• ì¸ ê³„ì‚°ê¸°. ëª¨ë“  ì •ë³´ëŠ” ì°¸ê³ ìš©ì…ë‹ˆë‹¤.</p>
    </footer>

    <script>
        // --- SKB B tv pop JSON Data ---
        const jsonData = {
            "service_provider": "SKB (SK Broadband)",
            "service_name": "B tv pop",
            "general_notes": [
                "SKB pop ì¸í„°ë„·ì€ ë‹¨ë… ê°€ì…ì´ ë¶ˆê°€ëŠ¥í•˜ë©°, ë°˜ë“œì‹œ TVì™€ í•¨ê»˜ ë²ˆë“¤ë¡œ ì œê³µë©ë‹ˆë‹¤.",
                "B tv pop ì„œë¹„ìŠ¤ì—ëŠ” ì¼ë°˜ì „í™” ë˜ëŠ” ì¸í„°ë„· ì „í™”ê°€ í¬í•¨ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤."
            ],
            "internet_plans_when_bundled_with_tv": [
                { "id": "pop_internet_100m", "speed": "100Mbps", "monthly_fee": 19800, "currency": "KRW", "name": "100M pop ì¸í„°ë„· (TV ê²°í•©)" },
                { "id": "pop_internet_500m", "speed": "500Mbps", "monthly_fee": 27500, "currency": "KRW", "name": "500M pop ì¸í„°ë„· (TV ê²°í•©)" },
                { "id": "pop_internet_1g", "speed": "1Gbps", "monthly_fee": 33000, "currency": "KRW", "name": "1G pop ì¸í„°ë„· (TV ê²°í•©)" }
            ],
            "tv_pop_plans": [
                { "id": "pop_100", "plan_name": "pop 100", "monthly_fee": 6050, "currency": "KRW", "note": "TV ì¶”ê°€/ë¶€ê°€ì„œë¹„ìŠ¤ ì„¹ì…˜ì—ì„œ ì œê³µëœ ê°€ê²©ì…ë‹ˆë‹¤.", "channels": 100 }, 
                { "id": "pop_180_primary", "plan_name": "pop 180", "monthly_fee": 9900, "currency": "KRW", "note": "ê¸°ë³¸ TV ì„¹ì…˜ì—ì„œ ì œê³µëœ ê°€ê²©ì…ë‹ˆë‹¤.", "channels": 180 },
                { "id": "pop_230_primary", "plan_name": "pop 230", "monthly_fee": 12100, "currency": "KRW", "note": "ê¸°ë³¸ TV ì„¹ì…˜ì—ì„œ ì œê³µëœ ê°€ê²©ì…ë‹ˆë‹¤.", "channels": 230 }
            ],
            "additional_tv_pop_plans": [ 
                { "id": "pop_100_add", "plan_name": "ì¶”ê°€TV pop 100", "monthly_fee": 6050, "currency": "KRW", "channels": 100 },
                { "id": "pop_180_add", "plan_name": "ì¶”ê°€TV pop 180", "monthly_fee": 7700, "currency": "KRW", "channels": 180 },
                { "id": "pop_230_add", "plan_name": "ì¶”ê°€TV pop 230", "monthly_fee": 8800, "currency": "KRW", "channels": 230 }
            ],
            "promotional_gifts_for_internet_tv_bundle": [
                { "internet_speed": "100Mbps", "tv_pop_plan_id": "pop_180_primary", "gift_value": 300000 },
                { "internet_speed": "100Mbps", "tv_pop_plan_id": "pop_230_primary", "gift_value": 300000 },
                { "internet_speed": "500Mbps", "tv_pop_plan_id": "pop_180_primary", "gift_value": 350000 },
                { "internet_speed": "500Mbps", "tv_pop_plan_id": "pop_230_primary", "gift_value": 350000 },
                { "internet_speed": "1Gbps", "tv_pop_plan_id": "pop_180_primary", "gift_value": 350000 },
                { "internet_speed": "1Gbps", "tv_pop_plan_id": "pop_230_primary", "gift_value": 350000 }
            ],
            "bundle_discounts": {
                "ìš”ì¦˜ ê°€ì¡±ê²°í•©": { 
                    "name_kr": "ìš”ì¦˜ ê°€ì¡±ê²°í•©",
                    "discounts": [
                        { "internet_speed_tier": "100Mbps", "discount_amount": 2200 }, 
                        { "internet_speed_tier": "500Mbps", "discount_amount": 5500 },
                        { "internet_speed_tier": "1Gbps", "discount_amount": 7700 }
                    ]
                },
                "ì•Œëœ°í•œ ê²°í•©": {
                    "name_kr": "ì•Œëœ°í•œ ê²°í•©",
                    "note": "SK ì•Œëœ°í° ê²°í•© ì‹œ, í†µì‹ ì‚¬ ë° ìš”ê¸ˆì œ í™•ì¸ í•„ìˆ˜",
                    "discounts": [
                        { "internet_speed_tier": "100Mbps", "discount_amount": 2200 },
                        { "internet_speed_tier": "500Mbps", "discount_amount": 5500 },
                        { "internet_speed_tier": "1Gbps", "discount_amount": 7700 }
                    ]
                },
                "íŒ¨ë°€ë¦¬ê²°í•© (pop ì—°ê³„)": {
                    "name_kr": "íŒ¨ë°€ë¦¬ê²°í•© (pop ì—°ê³„)",
                    "note": "ëª¨íšŒì„  B tv ì—¬ë¶€ í•„ìˆ˜ í™•ì¸",
                    "discounts": [
                        { "internet_speed_tier": "100Mbps", "discount_amount": 5500 },
                        { "internet_speed_tier": "500Mbps", "discount_amount": 11000 },
                        { "internet_speed_tier": "1Gbps", "discount_amount": 11000 }
                    ]
                }
            },
            "installation_fees": { 
                "internet_plus_tv_weekday": { "description": "ì¸í„°ë„· + TV (í‰ì¼)", "price": 56100 },
                "internet_plus_tv_weekend": { "description": "ì¸í„°ë„· + TV (ì£¼ë§/ì•¼ê°„)", "price": 70125 },
                "internet_plus_tv_plus_addTv_weekday": { "description": "ì¸í„°ë„· + TV + TVì¶”ê°€ (í‰ì¼)", "price": 73700 },
                "internet_plus_tv_plus_addTv_weekend": { "description": "ì¸í„°ë„· + TV + TVì¶”ê°€ (ì£¼ë§/ì•¼ê°„)", "price": 92125 },
                "internet_plus_tv_plus_addTv_plus_addTv_weekday": { "description": "ì¸í„°ë„· + TV + TVì¶”ê°€ + TVì¶”ê°€ (í‰ì¼)", "price": 91300 },
                "internet_plus_tv_plus_addTv_plus_addTv_weekend": { "description": "ì¸í„°ë„· + TV + TVì¶”ê°€ + TVì¶”ê°€ (ì£¼ë§/ì•¼ê°„)", "price": 114125 }
            },
            "additional_services_fees": [ 
                { "id": "wifi_router_pop", "name": "ì™€ì´íŒŒì´ ê³µìœ ê¸° (pop)", "price": 1100, "type": "WIFI" },
                { "id": "wings_amplifier_pop", "name": "WINGS (ì¦í­ê¸°) (pop)", "price": 1650, "type": "ETC" }
            ]
        };
        
        // ì˜¨ê°€ì¡±í• ì¸ ì„¤ì • (SKB pop ìƒí’ˆì—ëŠ” ëª…ì‹œì ìœ¼ë¡œ ì—†ìœ¼ë¯€ë¡œ, ê¸°ì¡´ SKT ê³„ì‚°ê¸° ì°¸ê³ ìš©ìœ¼ë¡œ ë‚¨ê²¨ë‘ë˜, UIì—ì„œ ì„ íƒ ëª»í•˜ê²Œ í•¨)
        const onGajokConfigPop = { 
            internetDiscountRate: {"0_9": 0.10, "10_19": 0.20, "20_29": 0.30, "30_plus": 0.50},
        };

        // Helper function to find an item by ID or name
        function findItemById(itemList, itemId, idField = 'id') {
            if (!itemId || itemId === 'none') return null;
            return itemList.find(item => item[idField] === itemId) || null;
        }


        // DOM Elements 
        const internetPlanEl = document.getElementById('internetPlan');
        const wifiRouterEl = document.getElementById('wifiRouter');
        const tvPlanEl = document.getElementById('tvPlan');
        const tvStbEl = document.getElementById('tvStb'); 
        const additionalTvPlanEl = document.getElementById('additionalTvPlan');
        const mobileLinesCountEl = document.getElementById('mobileLinesCount');
        const mobileLinesContainerEl = document.getElementById('mobileLinesContainer');
        const discountTypeRadios = document.querySelectorAll('input[name="discountType"]');
        const bundleApplicationTimeRadios = document.querySelectorAll('input[name="bundleApplicationTime"]');

        const yozoomGajokDetailsToggleEl = document.getElementById('yozoomGajokDetailsToggle');
        const yozoomGajokDetailsContainerEl = document.getElementById('yozoomGajokDetailsContainer');
        const detailYgInternetDiscountEl = document.getElementById('detailYgInternetDiscount');
        const detailYgInternetTypeEl = document.getElementById('detailYgInternetType');
        const detailYgMobileDiscountEl = document.getElementById('detailYgMobileDiscount'); 
        const yozoomGajokInternetDiscountTiersEl = document.getElementById('yozoomGajokInternetDiscountTiers');
        const yozoomGajokMobileDiscountTiersEl = document.getElementById('yozoomGajokMobileDiscountTiers');
        
        const familySktDetailsToggleEl = document.getElementById('familySktDetailsToggle');
        const familySktDetailsContainerEl = document.getElementById('familySktDetailsContainer');
        const detailFsInternetDiscountEl = document.getElementById('detailFsInternetDiscount');
        const familyInternetDiscountTiersEl = document.getElementById('familyInternetDiscountTiers');

        const mvnoSktDetailsToggleEl = document.getElementById('mvnoSktDetailsToggle');
        const mvnoSktDetailsContainerEl = document.getElementById('mvnoSktDetailsContainer');
        const detailMsInternetDiscountEl = document.getElementById('detailMsInternetDiscount');
        const mvnoInternetDiscountTiersEl = document.getElementById('mvnoInternetDiscountTiers');
        
        const calculateButton = document.getElementById('calculateButton');
        const resultSection = document.getElementById('resultSection');
        const selectedInternetEl = document.getElementById('selectedInternet');
        const selectedTvEl = document.getElementById('selectedTv');
        const selectedStbEl = document.getElementById('selectedStb');
        const selectedAdditionalTvEl = document.getElementById('selectedAdditionalTv');
        const selectedWifiEl = document.getElementById('selectedWifi');
        const selectedMobileCountEl = document.getElementById('selectedMobileCount');
        const selectedDiscountTypeEl = document.getElementById('selectedDiscountType');
        const totalBaseInternetCostEl = document.getElementById('totalBaseInternetCost');
        const totalInternetDiscountAmountEl = document.getElementById('totalInternetDiscountAmount');
        const internetDiscountBreakdownEl = document.getElementById('internetDiscountBreakdown');
        const wifiRouterRentalCostDisplayEl = document.getElementById('wifiRouterRentalCostDisplay');
        const tvCostSummaryContainerEl = document.getElementById('tvCostSummaryContainer');
        const tvBaseCostDisplayEl = document.getElementById('tvBaseCostDisplay');
        const stbRentalCostDisplayEl = document.getElementById('stbRentalCostDisplay');
        const additionalTvCostSummaryContainerEl = document.getElementById('additionalTvCostSummaryContainer');
        const additionalTvCostDisplayEl = document.getElementById('additionalTvCostDisplay');
        const finalMonthlyCostEl = document.getElementById('finalMonthlyCost');
        const finalCostLabelTextEl = document.getElementById('finalCostLabelText');
        const finalCostLabelQualifierEl = document.getElementById('finalCostLabelQualifier');
        const installationCostResultEl = document.getElementById('installationCostResult');
        const installationCostDescriptionEl = document.getElementById('installationCostDescription');
        const giftTotalEl = document.getElementById('giftTotal');
        const messageScriptSectionEl = document.getElementById('messageScriptSection');
        const memoScriptEl = document.getElementById('memoScript');
        const infoScriptEl = document.getElementById('infoScript');
        const completeScriptEl = document.getElementById('completeScript');
        const sensitiveInfoLinkScriptEl = document.getElementById('sensitiveInfoLinkScript');

        // --- Populate Select Options ---
        function populateInternetPlansDropdown() {
            const plansToShow = jsonData.internet_plans_when_bundled_with_tv;
            populateSelectWithOptions(internetPlanEl, plansToShow, "ì¸í„°ë„· ì„ íƒ", 'id', 'name', 'monthly_fee');
            if (plansToShow.length > 0) {
                internetPlanEl.value = plansToShow[0].id; 
            }
            handleServiceChange();
        }


        function populateSelectWithOptions(selectElement, items, defaultOptionText = "ì„ íƒ ì•ˆí•¨", valueField = 'id', nameField = 'name', priceField = 'monthly_fee', noteField = 'note') {
            if (!selectElement) {
                console.error("Select element not found for population:", selectElement);
                return;
            }
            selectElement.innerHTML = ''; 
            if (defaultOptionText) { 
                const defaultOpt = document.createElement('option');
                defaultOpt.value = 'none';
                defaultOpt.textContent = defaultOptionText;
                selectElement.appendChild(defaultOpt);
            }
            items.forEach(item => {
                const option = document.createElement('option');
                option.value = item[valueField];
                let displayText = item[nameField] || item.plan_name || item.speed; 
                
                if (item[priceField] !== undefined && item[priceField] > 0) { 
                    displayText += ` (ì›” ${item[priceField].toLocaleString()}ì›)`;
                } else if (item[noteField]) { 
                    displayText += ` (${item[noteField]})`;
                }
                
                option.textContent = displayText;
                option.dataset.price = item[priceField] !== undefined ? item[priceField] : 0;
                if(item.speed) option.dataset.speed_mbps_str = item.speed; // Store original speed string like "100Mbps"
                if(item.speed) option.dataset.speed_mbps = parseInt(item.speed.replace('Mbps','').replace('Gbps','000')); 
                if(item.channels) option.dataset.channels = item.channels;
                if(item.note) option.dataset.note = item.note;
                
                selectElement.appendChild(option);
            });
        }

        function initializeSelects() {
            populateInternetPlansDropdown(); 
            
            const wifiOptions = jsonData.additional_services_fees.filter(s => s.service_name_en && s.service_name_en.toLowerCase().includes("wifi"));
            populateSelectWithOptions(wifiRouterEl, wifiOptions, "ê³µìœ ê¸° ì„ íƒ ì•ˆí•¨", 'id', 'name', 'monthly_fee'); // Use ID for value
             if (wifiOptions.length > 0) {
                wifiRouterEl.value = wifiOptions[0].id; // Default to first wifi option by ID
            }


            populateSelectWithOptions(tvPlanEl, jsonData.tv_pop_plans, "TV ìš”ê¸ˆì œ ì„ íƒ", 'id', 'plan_name', 'monthly_fee');
             if (jsonData.tv_pop_plans.length > 0) { 
                const defaultTv = jsonData.tv_pop_plans.find(p => p.id === "pop_180_primary") || jsonData.tv_pop_plans[0];
                tvPlanEl.value = defaultTv.id;
            }

            populateSelectWithOptions(additionalTvPlanEl, jsonData.additional_tv_pop_plans, "ì¶”ê°€ TV ì„ íƒ ì•ˆí•¨", 'id', 'plan_name', 'monthly_fee');
            
            tvStbEl.innerHTML = '<option value="none" data-price="0">ì„ íƒ ì•ˆí•¨ (ê¸°ë³¸ì…‹í†± ì‚¬ìš©)</option>';
            tvStbEl.disabled = true; 
        }
        
        function handleServiceChange() {
            updateTvSubOptionsState();
            if (!resultSection.classList.contains('hidden')) { calculateAndDisplayResults(); }
        }
        
        function updateTvSubOptionsState() {
            // B tv popì€ í•­ìƒ ì¸í„°ë„·ê³¼ TVê°€ ë²ˆë“¤ì´ë¯€ë¡œ, ì¸í„°ë„· ìœ í˜• ì„ íƒì— ë”°ë¥¸ TV ì˜µì…˜ ë¹„í™œì„±í™” ë¡œì§ ì œê±°
            const isFirstTvPlanSelected = tvPlanEl.value !== 'none';
            additionalTvPlanEl.disabled = !isFirstTvPlanSelected;
            if (!isFirstTvPlanSelected) {
                additionalTvPlanEl.value = 'none';
            }
        }


        // Event Listeners
        internetPlanEl.addEventListener('change', handleServiceChange);
        tvPlanEl.addEventListener('change', handleServiceChange);


        mobileLinesCountEl.addEventListener('input', updateMobileLinesInputs);
        calculateButton.addEventListener('click', calculateAndDisplayResults);
        
        
        const allDetailSectionsSkt = [
            { radioValue: 'ìš”ì¦˜ ê°€ì¡±ê²°í•©', toggleEl: yozoomGajokDetailsToggleEl, containerEl: yozoomGajokDetailsContainerEl, updateFn: updateYozoomGajokDetails },
            { radioValue: 'íŒ¨ë°€ë¦¬ê²°í•© (pop ì—°ê³„)', toggleEl: familySktDetailsToggleEl, containerEl: familySktDetailsContainerEl, updateFn: updateFamilySktDetails },
            { radioValue: 'ì•Œëœ°í•œ ê²°í•©', toggleEl: mvnoSktDetailsToggleEl, containerEl: mvnoSktDetailsContainerEl, updateFn: updateMvnoSktDetails },
            { radioValue: 'noBundleDiscount', toggleEl: null, containerEl: null, updateFn: null } 
        ];

        discountTypeRadios.forEach(radio => {
            radio.addEventListener('change', function() {
                if (this.value === 'noBundleDiscount' || this.value === 'íŒ¨ë°€ë¦¬ê²°í•© (pop ì—°ê³„)') {
                    mobileLinesCountEl.value = 0;
                    mobileLinesCountEl.disabled = true;
                } else { 
                    mobileLinesCountEl.disabled = false;
                    if (this.value === 'ìš”ì¦˜ ê°€ì¡±ê²°í•©' || this.value === 'ì•Œëœ°í•œ ê²°í•©') { 
                         if (parseInt(mobileLinesCountEl.value) === 0) {
                            mobileLinesCountEl.value = 1;
                        }
                    }
                }
                updateMobileLinesInputs(); 

                allDetailSectionsSkt.forEach(section => {
                    if (section.containerEl) { 
                        let isVisible = false;
                        if (this.value === section.radioValue) { 
                            if (section.toggleEl) { 
                                isVisible = section.toggleEl.checked; 
                                if (isVisible && section.updateFn) {
                                    section.updateFn();
                                }
                            }
                        } else { 
                            if(section.toggleEl) section.toggleEl.checked = false; 
                            isVisible = false; 
                        }
                        section.containerEl.classList.toggle('hidden', !isVisible);
                    } else if (this.value !== section.radioValue && section.toggleEl) { 
                        section.toggleEl.checked = false;
                        if(section.containerEl) section.containerEl.classList.add('hidden');
                    }
                });
                 if (!resultSection.classList.contains('hidden')) { calculateAndDisplayResults(); } 
            });
        });
        
        allDetailSectionsSkt.forEach(section => {
            if (section.toggleEl) {
                section.toggleEl.addEventListener('change', function() {
                    const selectedRadio = document.querySelector(`input[name="discountType"][value="${section.radioValue}"]`);
                    if (selectedRadio && selectedRadio.checked) { 
                        section.containerEl.classList.toggle('hidden', !this.checked);
                        if (this.checked && section.updateFn) {
                            section.updateFn();
                        }
                    }
                });
            }
        });
        

         [wifiRouterEl, tvStbEl, additionalTvPlanEl].forEach(el => { 
            if(el) el.addEventListener('change', () => {
                 if (!resultSection.classList.contains('hidden')) { calculateAndDisplayResults(); }
            });
        });
        bundleApplicationTimeRadios.forEach(radio => {
            radio.addEventListener('change', () => {
                if (!resultSection.classList.contains('hidden')) { calculateAndDisplayResults(); }
            });
        });


        // Functions
        function updateMobileLinesInputs() {
            const count = parseInt(mobileLinesCountEl.value) || 0;
            mobileLinesContainerEl.innerHTML = '';
            for (let i = 0; i < count; i++) {
                const div = document.createElement('div');
                div.className = 'mobile-line-item'; 
                div.innerHTML = `
                    <div>
                        <label for="mobileCost${i}" class="block text-sm font-medium text-slate-600">íšŒì„  ${i + 1} ì›”ì •ì•¡ (VATí¬í•¨, í• ì¸ ì „)</label>
                        <input type="number" id="mobileCost${i}" class="input-field mt-1" placeholder="ì˜ˆ: 55000" value="0">
                    </div>
                `;
                mobileLinesContainerEl.appendChild(div);
            }
             if (!resultSection.classList.contains('hidden')) { calculateAndDisplayResults(); }
        }
        
        function updateYozoomGajokDetails() {
            const selectedInternetId = internetPlanEl.value;
            const internetPlanInfo = findItemById(jsonData.internet_plans_when_bundled_with_tv, selectedInternetId) || { speed: "0Mbps", monthly_fee: 0 };
            const numMobileLines = parseInt(mobileLinesCountEl.value) || 0;

            let currentInternetDiscountAmount = 0;
            const discountTier = jsonData.bundle_discounts["ìš”ì¦˜ ê°€ì¡±ê²°í•©"].discounts.find(d => d.internet_speed_tier.includes(internetPlanInfo.speed.replace('Gbps','G').replace('Mbps','M')));
            if(discountTier) {
                currentInternetDiscountAmount = discountTier.discount_amount;
            }
            
            detailYgInternetDiscountEl.textContent = currentInternetDiscountAmount.toLocaleString();
            detailYgInternetTypeEl.textContent = `(${internetPlanInfo.name} ì ìš© ì‹œ)`;

            let detailMobileD = 0; // ëª¨ë°”ì¼ í• ì¸ì€ SKT ê¸°ì¤€ì´ë¯€ë¡œ B tv popì—ì„œëŠ” 0 ë˜ëŠ” ì°¸ê³ ìš©ìœ¼ë¡œ í‘œì‹œ
            detailYgMobileDiscountEl.textContent = detailMobileD.toLocaleString();

            if(yozoomGajokInternetDiscountTiersEl) {
                yozoomGajokInternetDiscountTiersEl.innerHTML = '';
                jsonData.bundle_discounts["ìš”ì¦˜ ê°€ì¡±ê²°í•©"].discounts.forEach(tier => {
                    const li = document.createElement('li');
                    li.textContent = `${tier.internet_speed_tier}: ${tier.discount_amount.toLocaleString()}ì› í• ì¸`;
                    yozoomGajokInternetDiscountTiersEl.appendChild(li);
                });
            }
             if(yozoomGajokMobileDiscountTiersEl) { // ëª¨ë°”ì¼ í• ì¸ ì •ë³´ëŠ” B tv popì— ì—†ìœ¼ë¯€ë¡œ ë¹„ì›Œë‘ê±°ë‚˜ ì•ˆë‚´ ë¬¸êµ¬
                yozoomGajokMobileDiscountTiersEl.innerHTML = '<li>SKT ëª¨ë°”ì¼ ê²°í•© ì‹œ í• ì¸ (ë³„ë„ ë¬¸ì˜)</li>';
            }
        }


        function updateFamilySktDetails() { 
            const selectedInternetId = internetPlanEl.value;
            const internetPlanInfo = findItemById(jsonData.internet_plans_when_bundled_with_tv, selectedInternetId) || { speed: "0Mbps" };
            
            let currentInternetDiscountAmount = 0;
            const discountTier = jsonData.bundle_discounts["íŒ¨ë°€ë¦¬ê²°í•© (pop ì—°ê³„)"].discounts.find(d => d.internet_speed_tier.includes(internetPlanInfo.speed.replace('Gbps','G').replace('Mbps','M')));
            if(discountTier) {
                currentInternetDiscountAmount = discountTier.discount_amount;
            }
            
            detailFsInternetDiscountEl.textContent = currentInternetDiscountAmount.toLocaleString();
             if(familyInternetDiscountTiersEl) {
                familyInternetDiscountTiersEl.innerHTML = '';
                jsonData.bundle_discounts["íŒ¨ë°€ë¦¬ê²°í•© (pop ì—°ê³„)"].discounts.forEach(tier => {
                     const li = document.createElement('li');
                    li.textContent = `${tier.internet_speed_tier}: ${tier.discount_amount.toLocaleString()}ì› í• ì¸`;
                    familyInternetDiscountTiersEl.appendChild(li);
                });
            }
        }

        function updateMvnoSktDetails() { 
            const selectedInternetId = internetPlanEl.value;
            const internetPlanInfo = findItemById(jsonData.internet_plans_when_bundled_with_tv, selectedInternetId) || { speed: "0Mbps" };
            
            let currentInternetDiscountAmount = 0;
            const discountTier = jsonData.bundle_discounts["ì•Œëœ°í•œ ê²°í•©"].discounts.find(d => d.internet_speed_tier.includes(internetPlanInfo.speed.replace('Gbps','G').replace('Mbps','M')));
             if(discountTier) {
                currentInternetDiscountAmount = discountTier.discount_amount;
            }
            
            detailMsInternetDiscountEl.textContent = currentInternetDiscountAmount.toLocaleString();
            if(mvnoInternetDiscountTiersEl) {
                mvnoInternetDiscountTiersEl.innerHTML = '';
                 jsonData.bundle_discounts["ì•Œëœ°í•œ ê²°í•©"].discounts.forEach(tier => {
                    const li = document.createElement('li');
                    li.textContent = `${tier.internet_speed_tier}: ${tier.discount_amount.toLocaleString()}ì› í• ì¸`;
                    mvnoInternetDiscountTiersEl.appendChild(li);
                });
            }
        }

        // --- Main Calculation Logic ---
        function calculateAndDisplayResults() {
            const selectedInternetId = internetPlanEl.value;
            const selectedInternetTypeRadio = 'bundle'; // SKB popì€ í•­ìƒ ë²ˆë“¤
            
            const selectedWifiId = wifiRouterEl.value; 
            let selectedTvPackageId = tvPlanEl.value;
            let selectedAdditionalStbId = tvStbEl.value; 
            let selectedAdditionalTvId = additionalTvPlanEl.value;
            
            const numMobileLines = parseInt(mobileLinesCountEl.value) || 0;
            const discountType = document.querySelector('input[name="discountType"]:checked').value; 
            const selectedBundleApplicationTime = document.querySelector('input[name="bundleApplicationTime"]:checked').value;
            const installationTime = document.querySelector('input[name="installationTime"]:checked').value; 

            let internetPriceAsSelectedByDropdown = 0; 
            let internetDiscountAmount = 0;
            let internetDiscountBreakdownText = "";

            let finalInternetPlan = findItemById(jsonData.internet_plans_when_bundled_with_tv, selectedInternetId);
            const tvPackage = findItemById(jsonData.tv_pop_plans, selectedTvPackageId);

            if (finalInternetPlan) { 
                internetPriceAsSelectedByDropdown = finalInternetPlan.monthly_fee;
            } else { 
                finalInternetPlan = { monthly_fee: 0, speed: "0Mbps", name: "ë¯¸ì„ íƒ" }; 
            }
            
            let displayInternetBasePrice = internetPriceAsSelectedByDropdown; 
            
            const wifiAddon = findItemById(jsonData.additional_services_fees, selectedWifiId, 'id'); // idë¡œ ê²€ìƒ‰
            let originalWifiPrice = 0; 
            let currentWifiComponentCost = 0; 
            if (wifiAddon) {
                originalWifiPrice = wifiAddon.monthly_fee; 
                currentWifiComponentCost = wifiAddon.monthly_fee;
            }

            let tvComponentCost = 0;
            if (tvPackage) {
                tvComponentCost = tvPackage.monthly_fee;
            }

            let additionalStbComponentCost = 0; 
            
            let additionalTvComponentCost = 0;
            const additionalTvPackage = findItemById(jsonData.additional_tv_pop_plans, selectedAdditionalTvId);
            if (additionalTvPackage) {
                additionalTvComponentCost = additionalTvPackage.monthly_fee;
            }

            let phoneComponentCost = 0; 

            // Calculate Internet Discount
            if (finalInternetPlan && finalInternetPlan.monthly_fee > 0 && discountType !== "noBundleDiscount") {
                const currentDiscountConfig = jsonData.bundle_discounts[discountType];
                if (currentDiscountConfig) {
                    const internetSpeedForDiscount = finalInternetPlan.speed.replace('Gbps','G').replace('Mbps','M');
                    const discountTier = currentDiscountConfig.discounts.find(d => d.internet_speed_tier.includes(internetSpeedForDiscount));
                    if (discountTier) {
                        internetDiscountAmount = discountTier.discount_amount;
                        internetDiscountBreakdownText = `(${discountType} ${internetSpeedForDiscount} í• ì¸ ì ìš©)`;
                    } else {
                        internetDiscountBreakdownText = `(${discountType} ì¡°ê±´ ë¶ˆì¼ì¹˜)`;
                    }
                }
                internetDiscountAmount = Math.min(displayInternetBasePrice, internetDiscountAmount); 
            } else { 
                internetDiscountBreakdownText = discountType === "noBundleDiscount" ? "(ê²°í•© í• ì¸ ì—†ìŒ)" : "";
            }

            let effectiveInternetDiscount = internetDiscountAmount;
            if (selectedBundleApplicationTime === 'post' && discountType !== "noBundleDiscount") { 
                effectiveInternetDiscount = 0;
            }
            
            let actualInternetCostComponent = displayInternetBasePrice - effectiveInternetDiscount;
            let actualWifiCostComponent = currentWifiComponentCost; 
            
            // Calculate total sum of base prices for all selected services
            let totalSumBeforeDiscountForAllServices = 
                internetPriceAsSelectedByDropdown + 
                originalWifiPrice + 
                (tvPackage ? tvPackage.monthly_fee : 0) +
                additionalStbComponentCost + 
                (additionalTvPackage ? additionalTvPackage.monthly_fee : 0) +
                phoneComponentCost;

            let totalActualDiscountIfApplied = internetDiscountAmount; // B tv popì—ì„œëŠ” ì™€ì´íŒŒì´ ë³„ë„ í• ì¸ ì—†ìŒ

            let finalMonthlyCostCalculated = totalSumBeforeDiscountForAllServices - totalActualDiscountIfApplied;
            
            let uiFinalMonthlyCostToDisplay;
            if (selectedBundleApplicationTime === 'pre') {
                uiFinalMonthlyCostToDisplay = finalMonthlyCostCalculated;
            } else { 
                uiFinalMonthlyCostToDisplay = totalSumBeforeDiscountForAllServices;
            }

            totalBaseInternetCostEl.textContent = displayInternetBasePrice.toLocaleString(); 
            totalInternetDiscountAmountEl.textContent = internetDiscountAmount.toLocaleString(); 
            internetDiscountBreakdownEl.textContent = internetDiscountBreakdownText;
            
            wifiRouterRentalCostDisplayEl.textContent = actualWifiCostComponent.toLocaleString();
            selectedWifiEl.textContent = wifiAddon ? wifiAddon.name : "ë¯¸ì„ íƒ";

            tvCostSummaryContainerEl.classList.toggle('hidden', !tvPackage);
            if (tvPackage) {
                tvBaseCostDisplayEl.textContent = tvPackage.monthly_fee.toLocaleString();
            }
            stbRentalCostDisplayEl.textContent = additionalStbComponentCost.toLocaleString(); 
            selectedStbEl.textContent = "ê¸°ë³¸ ì…‹í†± ì‚¬ìš©";


            additionalTvCostSummaryContainerEl.classList.toggle('hidden', !additionalTvPackage);
            if (additionalTvPackage) {
                additionalTvCostDisplayEl.textContent = additionalTvPackage.monthly_fee.toLocaleString();
            }

            finalMonthlyCostEl.textContent = uiFinalMonthlyCostToDisplay.toLocaleString();
            finalCostLabelTextEl.textContent = "ìµœì¢… ì˜ˆìƒ ì›” ë‚©ë¶€ì•¡";
             if (selectedBundleApplicationTime === 'post' && totalActualDiscountIfApplied > 0) {
                 finalCostLabelQualifierEl.textContent = ` (í• ì¸ ì „)`; 
            } else if (totalActualDiscountIfApplied > 0) {
                finalCostLabelQualifierEl.textContent = "(í• ì¸ ì ìš©)";
            } else {
                 finalCostLabelQualifierEl.textContent = "(í• ì¸ ì—†ìŒ)";
            }

            let calculatedInstallationFee = 0;
            let feeDescription = "ì„ íƒëœ ì„œë¹„ìŠ¤ ì—†ìŒ";
            const isWeekend = installationTime === 'weekend';
            const hasInternetService = !!finalInternetPlan && finalInternetPlan.monthly_fee > 0;
            const hasTvService = !!tvPackage;
            const hasAdditionalTvService = !!additionalTvPackage;

            if (hasInternetService && hasTvService) {
                let feeKey = "";
                if (hasAdditionalTvService) { // TV 2ëŒ€
                    const tvCount = 1 + (additionalTvPlanEl.querySelectorAll('option:checked:not([value="none"])').length);
                    if (tvCount === 3) { // TV 3ëŒ€
                         feeKey = isWeekend ? 'internet_plus_tv_plus_addTv_plus_addTv_weekend' : 'internet_plus_tv_plus_addTv_plus_addTv_weekday';
                    } else { // TV 2ëŒ€
                         feeKey = isWeekend ? 'internet_plus_tv_plus_addTv_weekend' : 'internet_plus_tv_plus_addTv_weekday';
                    }
                } else { // TV 1ëŒ€
                    feeKey = isWeekend ? 'internet_plus_tv_weekend' : 'internet_plus_tv_weekday';
                }
                const feeInfo = jsonData.installation_fees[feeKey];
                if (feeInfo) {
                    calculatedInstallationFee = feeInfo.price;
                    feeDescription = feeInfo.description;
                }
            }
            
            installationCostResultEl.textContent = calculatedInstallationFee.toLocaleString();
            installationCostDescriptionEl.textContent = feeDescription ? `(${feeDescription})` : "";

            selectedInternetEl.textContent = finalInternetPlan && finalInternetPlan.monthly_fee > 0 ? `${finalInternetPlan.name} (${finalInternetPlan.monthly_fee.toLocaleString()}ì›)` : 'ë¯¸ì„ íƒ';
            selectedTvEl.textContent = tvPackage ? tvPackage.plan_name : 'ë¯¸ì„ íƒ';
            selectedAdditionalTvEl.textContent = additionalTvPackage ? additionalTvPackage.plan_name : 'ë¯¸ì„ íƒ';
            selectedMobileCountEl.textContent = numMobileLines;
            
            const discountTypeMapSkt = {"ìš”ì¦˜ ê°€ì¡±ê²°í•©": "ìš”ì¦˜ ê°€ì¡±ê²°í•©", "íŒ¨ë°€ë¦¬ê²°í•© (pop ì—°ê³„)": "íŒ¨ë°€ë¦¬ê²°í•© (pop ì—°ê³„)", "ì•Œëœ°í•œ ê²°í•©": "ì•Œëœ°í•œ ê²°í•©", "noBundleDiscount": "ê²°í•© í• ì¸ ì—†ìŒ"};
            selectedDiscountTypeEl.textContent = discountTypeMapSkt[discountType] || discountType;

            let totalGiftValue = 0;
            if (finalInternetPlan && tvPackage) {
                const giftInfo = jsonData.promotional_gifts_for_internet_tv_bundle.find(g => 
                    g.internet_speed === finalInternetPlan.speed && g.tv_pop_plan_id === tvPackage.id
                );
                if (giftInfo) {
                    totalGiftValue = giftInfo.gift_value;
                }
            }
            giftTotalEl.textContent = totalGiftValue.toLocaleString();
            
            allDetailSectionsSkt.forEach(section => {
                if (document.querySelector(`input[name="discountType"][value="${section.radioValue}"]`)?.checked && section.toggleEl && section.toggleEl.checked && section.updateFn) {
                    section.updateFn();
                }
            });

            resultSection.classList.remove('hidden');
            messageScriptSectionEl.classList.remove('hidden');
            generateMessageScriptsSkt(selectedBundleApplicationTime, selectedWifiId, selectedTvPackageId, selectedAdditionalStbId, selectedAdditionalTvId, null, totalSumBeforeDiscountForAllServices, finalMonthlyCostCalculated); 
        }
        
        function generateMessageScriptsSkt(currentSelectedBundleApplicationTime, currentSelectedWifiId, currentSelectedTvPackageId, currentSelectedAdditionalStbId, currentSelectedAdditionalTvId, currentSelectedPhonePlanId, totalBaseSumForScripts, finalMonthlyCostForScripts) { 
            const selectedInternetId = internetPlanEl.value;
            const internetOption = internetPlanEl.options[internetPlanEl.selectedIndex];
            const internetPlanText = internetOption.value !== 'none' ? internetOption.textContent.split(' (ì›”')[0] : 'ì¸í„°ë„· ë¯¸ì„ íƒ';

            const tvPackage = findItemById(jsonData.tv_pop_plans, currentSelectedTvPackageId);
            let firstTvText = tvPackage ? tvPackage.plan_name : "ë¯¸ì„ íƒ"; 
            
            const additionalStb = findItemById(jsonData.additional_services_fees, currentSelectedAdditionalStbId, 'id'); 
            let additionalStbText = ""; 

            const additionalTvPackage = findItemById(jsonData.additional_tv_pop_plans, currentSelectedAdditionalTvId);
            const additionalTvTextForScript = additionalTvPackage ? ` + (ì¶”ê°€TV) ${additionalTvPackage.plan_name}` : "";

            const phoneText = ""; 

            const wifiPackage = jsonData.additional_services_fees.find(s => s.id === currentSelectedWifiId); 
            const wifiText = wifiPackage && wifiPackage.monthly_fee > 0 ? ` + ${wifiPackage.name}` : (wifiPackage && wifiPackage.id === 'wifi_router_not_selected' ? "" : (wifiPackage ? ` + ${wifiPackage.name}`: ""));

            const monthlyFeeTextForMemo = `ì›” ${totalBaseSumForScripts.toLocaleString()}ì›(í• ì¸ì ìš©ì „ê¸ˆì•¡)${currentSelectedBundleApplicationTime === 'pre' && (totalBaseSumForScripts - finalMonthlyCostForScripts > 0) ? ` / ì›” ${finalMonthlyCostForScripts.toLocaleString()}ì›(í• ì¸ì ìš©ê¸ˆì•¡)` : ''}`;

            let descriptiveMonthlyFeeText = "";
            const totalCalculatedDiscountForScript = totalBaseSumForScripts - finalMonthlyCostForScripts;

            if (currentSelectedBundleApplicationTime === 'pre') {
                descriptiveMonthlyFeeText = `ì›” ${finalMonthlyCostForScripts.toLocaleString()}ì› (í• ì¸ì ìš©) (ì„ ê²°í•©)`;
                 if (totalCalculatedDiscountForScript <= 0) { 
                     descriptiveMonthlyFeeText = `ì›” ${finalMonthlyCostForScripts.toLocaleString()}ì› (í• ì¸ ì—†ìŒ) (ì„ ê²°í•©)`;
                 }
            } else { 
                 descriptiveMonthlyFeeText = `ì›” ${totalBaseSumForScripts.toLocaleString()}ì› (í• ì¸ì ìš©ì „) (í›„ê²°í•©)`;
            }


            const totalGift = giftTotalEl.textContent; 
            let giftBreakdown = `ì´ ${totalGift}ì›`; 

            const installFee = installationCostResultEl.textContent; 
            const installFeeDesc = installationCostDescriptionEl.textContent;
            const installTime = document.querySelector('input[name="installationTime"]:checked').value;


            let productDescriptionMemo = internetPlanText;
            productDescriptionMemo += wifiText;
            if (firstTvText !== "ë¯¸ì„ íƒ") productDescriptionMemo += ` + ${firstTvText}`;
            productDescriptionMemo += additionalTvTextForScript;
            
            memoScriptEl.value = `[SKB B tv pop ë¯¸ì†Œ ìƒë‹´ ë©”ëª¨]
1. ìƒí’ˆ : ${productDescriptionMemo}
2. ìš”ê¸ˆ : ${monthlyFeeTextForMemo}
3. ì‚¬ì€í’ˆ ì´ì•¡ : ${giftBreakdown} (ì˜ˆìƒ)
4. ì„¤ì¹˜ë¹„ : ${installFee}ì› ${installFeeDesc} (SKB ì‹¤ì œ ë¹„ìš© í™•ì¸ í•„ìš”, ì£¼ë§/ì•¼ê°„ í• ì¦ ê°€ëŠ¥)
5. ê²°í•©ì ìš©ì‹œì : ${currentSelectedBundleApplicationTime === 'pre' ? 'ì„ ê²°í•©' : 'í›„ê²°í•©'}
6. ê¸°íƒ€ : ì´ì‚¬ ì—¬ë¶€ [ ] / í¬ë§ì„¤ì¹˜ì¼ì [    ë…„   ì›”   ì¼]
7. í• ì¸ìœ í˜•: ${selectedDiscountTypeEl.textContent}
8. ëª¨ë°”ì¼ê²°í•©íšŒì„ : ${selectedMobileCountEl.textContent}ê°œ`;
            
            let productDescriptionInfo = `â–¶ï¸ ${internetPlanText}`;
            if (wifiText) productDescriptionInfo += `\nâ–¶ï¸ ${wifiPackage.name}`;
            if (firstTvText !== "ë¯¸ì„ íƒ") productDescriptionInfo += `\nâ–¶ï¸ ${firstTvText}`;
            if(additionalTvTextForScript) productDescriptionInfo += `\nâ–¶ï¸ ${additionalTvPackage.plan_name}`;
            
            infoScriptEl.value = `[SKB B tv pop ë¯¸ì†Œ] ìƒí’ˆ & ì‚¬ì€í’ˆ ìš”ì•½ ì•ˆë‚´
ì•ˆë…•í•˜ì„¸ìš”, ë¯¸ì†Œ ì¸í„°ë„·ì…ë‹ˆë‹¤.
ê³ ê°ë‹˜ê»˜ì„œ ì˜¤ëŠ˜ ìƒë‹´ ë°›ìœ¼ì‹  SKë¸Œë¡œë“œë°´ë“œ B tv pop ìƒí’ˆ ì•ˆë‚´ë“œë¦½ë‹ˆë‹¤.
${productDescriptionInfo}
â–¶ï¸ ${descriptiveMonthlyFeeText}
â–¶ï¸ ì´ ì‚¬ì€í’ˆ ${giftBreakdown} (ì˜ˆìƒ)
* í˜œíƒì€ ì‹¤ì‹œê°„ìœ¼ë¡œ ë°”ë€” ìˆ˜ ìˆë‹¤ëŠ” ì  ì•ˆë‚´ë“œë¦½ë‹ˆë‹¤.
* 3ë…„ ì•½ì • ê¸°ì¤€, VAT í¬í•¨
ë¯¸ì†Œ ë“œë¦¼.`;
            
            let productDescriptionComplete = `â–¶ï¸ ${internetPlanText}`;
            if (wifiText) productDescriptionComplete += `\nâ–¶ï¸ ${wifiPackage.name}`;
            if (firstTvText !== "ë¯¸ì„ íƒ") productDescriptionComplete += `\nâ–¶ï¸ ${firstTvText}`;
            if(additionalTvTextForScript) productDescriptionComplete += `\nâ–¶ï¸ ${additionalTvPackage.plan_name}`;

            completeScriptEl.value = `[SKB B tv pop ë¯¸ì†Œ] ê°€ì… ì™„ë£Œ ì•ˆë‚´
ì•ˆë…•í•˜ì„¸ìš”, ê³ ê°ë‹˜. ë¯¸ì†Œ SKë¸Œë¡œë“œë°´ë“œ B tv pop ë¶€ì„œì…ë‹ˆë‹¤.
âœ… ê³„ì•½ì´ ì™„ë£Œë˜ì—ˆì–´ìš”, ì•„ë˜ ë‚´ìš©ì€ ê³„ì•½ì„œì™€ ë™ì¼í•œ íš¨ë ¥ì´ ìˆìœ¼ë‹ˆ ê¼¼ê¼¼íˆ ì½ì–´ì£¼ì„¸ìš”.
âš ï¸ 3ë…„ ì•½ì •ì´ë©°, ì•„ë˜ì™€ ê°™ì€ ìƒí™©ì— í•´ë‹¹í•˜ë©´ ë°›ìœ¼ì…¨ë˜ ì‚¬ì€í’ˆì€ í™˜ìˆ˜ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤:
â‘  1ë…„ ì´ë‚´ í•´ì§€ â‘¡ 3ê°œì›”(90ì¼) ì´ìƒ ì •ì§€ â‘¢ 1ë…„ ì´ë‚´ ìš”ê¸ˆì œ í•˜í–¥ â‘£ 3ê°œì›” ì´ë‚´ ëª…ì˜ë³€ê²½ â‘¤ ê°œí†µ 1ê°œì›” ì´ë‚´ ê²°ì œìˆ˜ë‹¨ ì§€ë¡œ ë³€ê²½
âš ï¸ ì‹ ê·œ ê°€ì… í›„ ê¸°ì¡´ ì¸í„°ë„·ì€ ê¼­ ì§ì ‘ í•´ì§€í•´ì£¼ì„¸ìš”. ìë™í•´ì§€ë˜ì§€ ì•Šì•„ ìš”ê¸ˆì´ ì´ì¤‘ ë¶€ê³¼ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
âš ï¸ 3ë…„ ì´ë‚´ í•´ì§€ ì‹œ í†µì‹ ì‚¬ ë³¸ì‚¬ì— ìœ„ì•½ê¸ˆ(í• ì¸ ë°˜í™˜ê¸ˆ) ë° ë©´ì œëœ ì¥ë¹„ ì„ëŒ€ë£Œ/ì„¤ì¹˜ë¹„ ë“±ì´ ë¶€ê³¼ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
âœ… ê°€ì… ìƒí’ˆ ì•ˆë‚´
${productDescriptionComplete}
â–¶ï¸ ${descriptiveMonthlyFeeText}
â–¶ï¸ ì„¤ì¹˜ë¹„ ${installFee}ì› ${installFeeDesc} ì²« ë‹¬ ë¶€ê³¼ ${installTime === 'weekday' ? '' : `(ì£¼ë§/ì•¼ê°„ ì„¤ì¹˜ ì‹œ í• ì¦ëœ ì„¤ì¹˜ë¹„ ë¶€ê³¼ ê°€ëŠ¥ì„± - SKB í™•ì¸)`}
â–¶ï¸ ì´ ì‚¬ì€í’ˆ ${giftBreakdown} (ì˜ˆìƒ)
âœ…ì‚¬ì€í’ˆì€ ì„¤ì¹˜ í›„ 7ì¼ ì´ë‚´ ìë™ìœ¼ë¡œ ì§€ê¸‰ë˜ë‚˜ í‰ì¼ê¸°ì¤€ 5ì‹œ ì´ì „ ê°œí†µ ë°›ì•˜ë‹¤ê³  ë¬¸ì ì£¼ì‹œë©´ ë‹¹ì¼ì…ê¸ˆ ë„ì›€ë“œë¦¬ê² ìŠµë‹ˆë‹¤.
${installTime !== 'weekday' ? `-> ì£¼ë§/ì•¼ê°„ ì„¤ì¹˜ ì‹œ í• ì¦ëœ ì„¤ì¹˜ë¹„ëŠ” ${installFee}ì› ë¶€ê³¼ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤ (SKB í™•ì¸ í•„ìš”).` : ''}
ğŸ”Š í•´ë‹¹ ì—°ë½ì²˜ë¡œ ì—°ë½ì´ ì–´ë ¤ìš¸ ê²½ìš° ê±±ì •í•˜ì§€ ë§ˆì„¸ìš”! ì•„ë˜ ëŒ€í‘œë²ˆí˜¸ë¡œ ë¬¸ì˜ì£¼ì‹œë©´ í™•ì¸í•˜ì—¬ ì—°ë½ë“œë¦¬ê² ìŠµë‹ˆë‹¤.
[ë¯¸ì†Œë¥¼ ì†Œê°œí•´ì£¼ì„¸ìš”]
ì§€ì¸ì´ ë¯¸ì†Œì—ì„œ ì¸í„°ë„·/TV ì„¤ì¹˜í•˜ë©´ ì†Œê°œí•´ì£¼ì‹  ë¶„ì—ê²Œ í˜„ê¸ˆ í˜œíƒì„ ë“œë ¤ìš”! (ìì„¸í•œ ë‚´ìš©ì€ ë¬¸ì˜)
ë¯¸ì†Œ ë“œë¦¼.`;

            if (sensitiveInfoLinkScriptEl) {
                sensitiveInfoLinkScriptEl.value = `[SKB] ì•„ë˜ ë§í¬ì— ê³ ê°ë‹˜ì˜ ë¯¼ê°ì •ë³´ë¥¼ ì…ë ¥í•˜ì‹œë©´ SKBë¡œ ê³ ê°ë‹˜ì˜ ë¯¼ê°ì •ë³´ê°€ ì§ì ‘ ì „ì†¡ë©ë‹ˆë‹¤.
https://miso.kr/booking/forms/secure-details?querystring=ê³ ê°ë‹˜ ì „í™”ë²ˆí˜¸`;
            }
        }

        function copyToClipboard(elementId, feedbackElementId) {
            const textarea = document.getElementById(elementId);
            textarea.select();
            textarea.setSelectionRange(0, 99999); 
            try {
                document.execCommand('copy');
                const feedbackEl = document.getElementById(feedbackElementId);
                feedbackEl.textContent = 'ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤!';
                setTimeout(() => { feedbackEl.textContent = ''; }, 2000);
            } catch (err) {
                const feedbackEl = document.getElementById(feedbackElementId);
                feedbackEl.textContent = 'ë³µì‚¬ ì‹¤íŒ¨';
                setTimeout(() => { feedbackEl.textContent = ''; }, 2000);
            }
            window.getSelection().removeAllRanges(); 
        }
        
        // Initialize
        function setInitialDefaults() {
            initializeSelects(); 

            const noBundleDiscountRadio = document.querySelector('input[name="discountType"][value="noBundleDiscount"]');
            if (noBundleDiscountRadio) {
                noBundleDiscountRadio.checked = true;
                const discountChangeEvent = new Event('change', { bubbles: true });
                noBundleDiscountRadio.dispatchEvent(discountChangeEvent);
            }
            
            // SKB popì€ í•­ìƒ ë²ˆë“¤ì´ë¯€ë¡œ, ì¸í„°ë„· ìœ í˜• ì„ íƒ ë¼ë””ì˜¤ ë²„íŠ¼ì€ ì˜ë¯¸ê°€ ì—†ìŒ. ê¸°ë³¸ì ìœ¼ë¡œ bundleë¡œ ê°€ì •.
            const bundleRadio = document.querySelector('input[name="internetType"][value="bundle"]');
            if (bundleRadio) bundleRadio.checked = true;
            const standaloneRadio = document.querySelector('input[name="internetType"][value="standalone"]');
            if (standaloneRadio) standaloneRadio.disabled = true; 

            populateInternetPlansDropdown(); 
            
            if (jsonData.internet_plans_when_bundled_with_tv.length > 0) {
                internetPlanEl.value = jsonData.internet_plans_when_bundled_with_tv[0].id;
            }
            
            if (jsonData.tv_pop_plans.length > 0) {
                const defaultTv = jsonData.tv_pop_plans.find(p => p.id === "pop_180_primary") || jsonData.tv_pop_plans[0];
                tvPlanEl.value = defaultTv.id;
            }
            
            const defaultWifi = jsonData.additional_services_fees.find(s => s.id === "wifi_router_pop");
            if (defaultWifi) {
                wifiRouterEl.value = defaultWifi.id;
            } else if (jsonData.additional_services_fees.length > 0) {
                 wifiRouterEl.value = jsonData.additional_services_fees[0].id;
            } else {
                 wifiRouterEl.value = "none";
            }
            
            tvStbEl.value = 'none'; 
            additionalTvPlanEl.value = 'none';
            
            updateTvSubOptionsState();


            allDetailSectionsSkt.forEach(section => {
                let isVisible = false; 
                if (section.containerEl) {
                    const isSelected = document.querySelector(`input[name="discountType"][value="${section.radioValue}"]`)?.checked;
                    if (isSelected) { 
                        if (section.toggleEl) isVisible = section.toggleEl.checked;
                    } else { 
                        if (section.toggleEl) section.toggleEl.checked = false;
                    }
                    section.containerEl.classList.toggle('hidden', !isVisible);
                    if (isVisible && section.updateFn) section.updateFn();
                }
            });
        }
        
        window.onload = setInitialDefaults;

    </script>
</body>
</html>
