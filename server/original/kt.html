<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>KT κ²°ν•© ν• μΈ κ³„μ‚°κΈ°</title>
    <link rel="stylesheet" href="/src/index.css">
    <!-- Application Structure Plan: 
        Single-page interactive calculator for KT.
        Updates:
        1. Corrected internet discount calculation for MVNO Bundle with 100M internet in `calculateAndDisplayResults`.
        2. Ensured `updateMvnoDetails` also uses consistent key lookup for 100M MVNO discount.
    -->
    <style>
        body { font-family: 'Inter', sans-serif; background-color: #f8fafc; /* slate-50 */ }
        .input-group { margin-bottom: 1.5rem; }
        .input-label { display: block; margin-bottom: 0.5rem; font-weight: 500; color: #334155; /* slate-700 */ }
        .input-field, .select-field { width: 100%; padding: 0.5rem 0.75rem; border: 1px solid #cbd5e1; /* slate-300 */ border-radius: 0.375rem; box-shadow: sm; transition: border-color 0.15s ease-in-out, box-shadow 0.15s ease-in-out; }
        .input-field:focus, .select-field:focus { border-color: #0ea5e9; /* sky-500 */ outline: none; box-shadow: 0 0 0 0.2rem rgba(14, 165, 233, 0.25); }
        .input-field:disabled, .select-field:disabled { background-color: #e2e8f0; /* slate-200 */ cursor: not-allowed; }
        .btn-primary { background-color: #0ea5e9; /* sky-500 */ color: white; padding: 0.75rem 1.5rem; border-radius: 0.375rem; font-weight: 600; transition: background-color 0.3s ease; }
        .btn-primary:hover { background-color: #0284c7; /* sky-600 */ }
        .btn-secondary { background-color: #64748b; /* slate-500 */ color: white; padding: 0.5rem 1rem; border-radius: 0.375rem; font-weight: 500; transition: background-color 0.3s ease; }
        .btn-secondary:hover { background-color: #475569; /* slate-600 */ }
        .section-title { font-size: 1.5rem; font-weight: 700; color: #0369a1; /* sky-700 */ margin-bottom: 1rem; padding-bottom: 0.5rem; border-bottom: 2px solid #38bdf8 /* sky-400 */;}
        .result-card { background-color: white; padding: 1.5rem; border-radius: 0.5rem; box-shadow: 0 4px 6px -1px rgba(0,0,0,0.1), 0 2px 4px -1px rgba(0,0,0,0.06); margin-bottom: 1.5rem; }
        .result-label { color: #475569; /* slate-600 */ }
        .result-value { color: #1e293b; /* slate-800 */ font-weight: 600;}
        .total-value { color: #f59e0b; /* amber-500 */ font-size: 1.5rem; font-weight: 700;}
        .mobile-line-item { border: 1px solid #e2e8f0; /* slate-200 */ padding: 1rem; border-radius: 0.375rem; margin-bottom: 0.75rem; }
        .radio-label { margin-right: 1rem; margin-bottom: 0.5rem; display: inline-flex; align-items: center; cursor: pointer;}
        .radio-input { margin-right: 0.5rem; accent-color: #0ea5e9; /* sky-500 */ }
        .info-box { background-color: #eff6ff; /* blue-50 */ border-left: 4px solid #3b82f6; /* blue-500 */ padding: 1rem; margin-top:0.5rem; margin-bottom:1rem; font-size: 0.875rem; color: #1e40af; /* blue-800 */}
        .info-box ul { padding-left: 1.25rem; list-style-type: disc; }
        .info-box ul ul { padding-left: 1rem; list-style-type: circle;}
        .toggle-switch { position: relative; display: inline-block; width: 40px; height: 20px; margin-left: 10px; vertical-align: middle;}
        .toggle-switch input { opacity: 0; width: 0; height: 0; }
        .slider { position: absolute; cursor: pointer; top: 0; left: 0; right: 0; bottom: 0; background-color: #ccc; transition: .4s; border-radius: 20px;}
        .slider:before { position: absolute; content: ""; height: 16px; width: 16px; left: 2px; bottom: 2px; background-color: white; transition: .4s; border-radius: 50%;}
        input:checked + .slider { background-color: #2196F3; } /* KT Sky Blue for toggle */
        input:checked + .slider:before { transform: translateX(20px); }
        .discount-details { background-color: #e0f2fe; border: 1px solid #7dd3fc; padding: 0.75rem; border-radius: 0.375rem; font-size:0.875rem; }
        .discount-details ul { padding-left: 1.25rem; }
        .discount-details ul ul { padding-left: 1rem; }
        .summary-item { margin-bottom: 0.25rem; }
        .message-script-area { width: 100%; min-height: 100px; padding: 0.5rem; border: 1px solid #cbd5e1; border-radius: 0.375rem; font-size: 0.875rem; white-space: pre-wrap; word-wrap: break-word; }
        .copy-button-container { text-align: right; margin-top: 0.5rem; }
        .copy-feedback { font-size: 0.75rem; color: green; margin-left: 0.5rem; }
    </style>
</head>
<body class="text-slate-800">
    <header class="bg-sky-700 text-white p-6 shadow-md">
        <div class="container mx-auto max-w-4xl">
            <h1 class="text-3xl font-bold text-center">KT κ²°ν•© ν• μΈ κ³„μ‚°κΈ°</h1>
            <p class="text-center text-sky-200 mt-1">μ„ νƒν•μ‹  μ„λΉ„μ¤μ™€ ν• μΈ μ ν•μ— λ”°λ¥Έ μμƒ μ”κΈμ„ κ³„μ‚°ν•΄ λ³΄μ„Έμ”.</p>
        </div>
    </header>

    <main class="container mx-auto max-w-4xl p-4 sm:p-6 lg:p-8">
        <section id="inputSection" class="mb-8">
            <h2 class="section-title">1. μ„λΉ„μ¤ μ„ νƒ (3λ…„ μ•½μ • κΈ°μ¤€, VAT ν¬ν•¨)</h2>
            <p class="mb-3 text-sm text-slate-600">μ•„λ ν•­λ©λ“¤μ„ μ„ νƒν•κ±°λ‚ μ…λ ¥ν•΄μ£Όμ„Έμ”. λ¨λ“  μ”κΈμ€ KT ν‘μ¤€ 3λ…„ μ•½μ •, λ¶€κ°€μ„Έ ν¬ν•¨ κΈμ•΅μ„ κΈ°μ¤€μΌλ΅ ν•©λ‹λ‹¤. TV, μ „ν™”, λ¨λ°”μΌ μ„ νƒμ€ μΈν„°λ„· μ”κΈ ν• μΈ κ³„μ‚°μ— μν–¥μ„ λ―ΈμΉ©λ‹λ‹¤.</p>
            
            <div class="mb-2 text-sm">
                <p class="font-semibold text-red-600">β οΈ λ―Όκ°μ •λ³΄</p>
                <p><a href="https://miso.kr/booking/forms/secure-details?querystring=κ³ κ°λ‹ μ „ν™”λ²νΈ" target="_blank" class="text-red-500 hover:text-red-700 underline font-medium break-all">https://miso.kr/booking/forms/secure-details?querystring=κ³ κ°λ‹ μ „ν™”λ²νΈ</a></p>
                <p class="text-slate-600">γ„΄> μ„ λ§ν¬λ¥Ό κ³ κ°μ—κ² λ¬Έμλ΅ μ „μ†΅ν•΄μ£Όμ„Έμ”. (μ•„λ μ¤ν¬λ¦½νΈ λ³µμ‚¬ κΈ°λ¥ μ΄μ©)</p>
            </div>
            <div class="mb-2 text-sm">
                <span class="font-semibold text-sky-700">μ°Έκ³  μ¤ν”„λ λ“μ‹νΈ:</span>
                <a href="https://docs.google.com/spreadsheets/d/10d21RrhIPBiJr7RZIHnk0h1dB4GvTEcHCuXSyFYw1M4/edit?gid=0#gid=0" target="_blank" class="text-blue-600 hover:text-blue-700 underline font-medium">λ°”λ΅κ°€κΈ°</a>
            </div>
            <div class="mb-4 text-sm">
                <span class="font-semibold text-sky-700">KT μΈν„°λ„· μƒν’μ²­μ•½ λ³ΈμΈμΈμ¦ λ§ν¬:</span>
                <a href="https://online.kt.com/smart/simple/simpleCustomerInfoPop.do?prdcId=0F0BA335-ACD6-459E-BDB3-95CE61EEFE35" target="_blank" class="text-blue-600 hover:text-blue-700 underline font-medium">λ°”λ΅κ°€κΈ° (PASS λλ” μ‹ μ©μΉ΄λ“ μΈμ¦)</a>
            </div>

            <div class="input-group">
                <label class="input-label">μΈν„°λ„· μ ν• μ„ νƒ</label>
                <div class="flex items-center space-x-4">
                    <label class="radio-label">
                        <input type="radio" name="internetType" value="bundle" class="radio-input" checked>
                        μΈν„°λ„· + TV λ²λ“¤
                    </label>
                    <label class="radio-label">
                        <input type="radio" name="internetType" value="standalone" class="radio-input">
                        μΈν„°λ„· λ‹¨λ…
                    </label>
                </div>
            </div>

            <div class="grid md:grid-cols-2 gap-6">
                <div class="input-group">
                    <label for="internetPlan" class="input-label">μΈν„°λ„· μ”κΈμ </label>
                    <select id="internetPlan" class="select-field">
                        </select>
                </div>
                
                <div class="input-group">
                    <label for="wifiRouterRental" class="input-label block mb-1">μ™€μ΄νμ΄ κ³µμ κΈ°</label>
                     <select id="wifiRouterRental" class="select-field">
                        <option value="1100" data-name="KTκ³µμ κΈ°">KTκ³µμ κΈ° (μ›” 1,100μ›)</option>
                        <option value="0" data-name="KTκ³µμ κΈ° λ¬΄λ£ (μΈλ‹¨λ… 1GB)">KTκ³µμ κΈ° λ¬΄λ£ (μΈλ‹¨λ… 1GB μ‹)</option>
                        <option value="0" data-name="KTκ³µμ κΈ° X">KTκ³µμ κΈ° X (λ―Έμ‚¬μ©)</option>
                    </select>
                </div>

                <div class="input-group">
                    <label for="tvPlan" class="input-label">TV μ”κΈμ  (1λ²μ§Έ TV, κΈ°κ°€μ§€λ‹A ν¬ν•¨κ°€)</label>
                    <select id="tvPlan" class="select-field">
                        <option value="none" data-category="μ—†μ" data-stb-included-price="0">μ„ νƒ μ•ν•¨</option>
                        <option value="KTTVλ² μ΄μ§" data-price="15400" data-category="λ² μ΄μ§" data-stb-included-price="15400">KTTVλ² μ΄μ§ (236μ±„λ„) + κΈ°κ°€μ§€λ‹A (μ›” 15,400μ›)</option>
                        <option value="KTTVλΌμ΄νΈ" data-price="16500" data-category="λΌμ΄νΈ" data-stb-included-price="16500">KTTVλΌμ΄νΈ (240μ±„λ„) + κΈ°κ°€μ§€λ‹A (μ›” 16,500μ›)</option>
                        <option value="KTTVμ—μ„Όμ¤" data-price="19800" data-category="μ—μ„Όμ¤" data-stb-included-price="19800">KTTVμ—μ„Όμ¤ (266μ±„λ„) + κΈ°κ°€μ§€λ‹A (μ›” 19,800μ›)</option>
                        <option value="KTTVμ—μ„Όμ¤ ν”λ¬μ¤" data-price="24200" data-category="μ—μ„Όμ¤ ν”λ¬μ¤" data-stb-included-price="24200">KTTVμ—μ„Όμ¤ ν”λ¬μ¤ (266+μ±„λ„) (μ›” 24,200μ›)</option>
                        <option value="KTTVλ„·ν”λ¦­μ¤ HD" data-price="31100" data-category="λ„·ν”λ¦­μ¤ HD" data-stb-included-price="31100">KTTVλ„·ν”λ¦­μ¤ HD (267μ±„λ„) (μ›” 31,100μ›)</option>
                        <option value="KTTVλ„·ν”λ¦­μ¤ UHD" data-price="34600" data-category="λ„·ν”λ¦­μ¤ UHD" data-stb-included-price="34600">KTTVλ„·ν”λ¦­μ¤ UHD (267μ±„λ„) (μ›” 34,600μ›)</option>
                        <option value="KTTVν‚¤μ¦λλ“ν©μ΄μ΄μ¤" data-price="20900" data-category="ν‚¤μ¦λλ“" data-stb-included-price="20900">KTTVν‚¤μ¦λλ“ν©μ΄μ΄μ¤ (μ›” 20,900μ›)</option>
                    </select>
                </div>

                <div class="input-group">
                    <label for="additionalTvPlan" class="input-label">μ¶”κ°€ TV μ„ νƒ (2λ²μ§Έ TV)</label>
                    <select id="additionalTvPlan" class="select-field">
                        <option value="none" data-price="0" data-name="μ„ νƒ μ•ν•¨">μ„ νƒ μ•ν•¨</option>
                        <option value="KTTV μ¶”κ°€λ² μ΄μ§" data-price="10670" data-name="λ² μ΄μ§ (236μ±„λ„) + κΈ°κ°€μ§€λ‹A">KTTV μ¶”κ°€λ² μ΄μ§ (236μ±„λ„) + κΈ°κ°€μ§€λ‹A (μ›” 10,670μ›)</option>
                        <option value="KTTV μ¶”κ°€λΌμ΄νΈ" data-price="11220" data-name="λΌμ΄νΈ (240μ±„λ„) + κΈ°κ°€μ§€λ‹A">KTTV μ¶”κ°€λΌμ΄νΈ (240μ±„λ„) + κΈ°κ°€μ§€λ‹A (μ›” 11,220μ›)</option>
                        <option value="KTTV μ¶”κ°€μ—μ„Όμ¤" data-price="13420" data-name="μ—μ„Όμ¤ (266μ±„λ„) + κΈ°κ°€μ§€λ‹A">KTTV μ¶”κ°€μ—μ„Όμ¤ (266μ±„λ„) + κΈ°κ°€μ§€λ‹A (μ›” 13,420μ›)</option>
                    </select>
                </div>
                
                <div class="input-group">
                    <label for="phonePlan" class="input-label">μ§‘μ „ν™” μ”κΈμ </label>
                    <select id="phonePlan" class="select-field">
                        <option value="none">μ„ νƒ μ•ν•¨</option>
                        <option value="KTμΌλ° μ „ν™”μΌλ° μ „ν™”" data-price="6050">KTμΌλ° μ „ν™”μΌλ° μ „ν™” (μ›” 6,050μ›)</option>
                        <option value="KTμΌλ° μ „ν™”μΈν„°λ„· μ „ν™” (λ¨μ„μ¤ν†¤)" data-price="5940">KTμΌλ° μ „ν™”μΈν„°λ„· μ „ν™” (λ¨μ„μ¤ν†¤) (μ›” 5,940μ›)</option>
                        <option value="KTμΌλ° μ „ν™”μΈν„°λ„· (λ‹¨λ…) 500mb μ΄μƒ + μΈν„°λ„· μ „ν™”" data-price="3850">KTμΌλ° μ „ν™”μΈν„°λ„· (λ‹¨λ…) 500mb μ΄μƒ + μΈν„°λ„· μ „ν™” (μ›” 3,850μ›, ν¨λ°€λ¦¬ μ¤‘λ³µλ¶κ°€)</option>
                    </select>
                </div>
            </div>
            
            <div class="input-group">
                <label class="input-label">KT λ¶€κ°€μ„λΉ„μ¤ (μ„ νƒ)</label>
                <div id="addonServicesContainer" class="grid grid-cols-1 sm:grid-cols-2 gap-2">
                    <label class="flex items-center"><input type="checkbox" name="addonService" value="κΈ°κ°€μ§€λ‹3A" data-price="1100" class="radio-input mr-2">κΈ°κ°€μ§€λ‹3A (AI μ…‹ν†±λ°•μ¤) (μ›” 1,100μ›)</label>
                    <label class="flex items-center"><input type="checkbox" name="addonService" value="AI μ§€λ‹ TV μ¬μΈμ› μ‚¬μ΄λ“λ°”" data-price="5500" class="radio-input mr-2">AI μ§€λ‹ TV μ¬μΈμ› μ‚¬μ΄λ“λ°” (μ›” 5,500μ›)</label>
                    <label class="flex items-center"><input type="checkbox" name="addonService" value="λ²„λ””μ¦ν­κΈ°" data-price="1650" class="radio-input mr-2">λ²„λ””μ¦ν­κΈ° (μ›” 1,650μ›)</label>
                    <label class="flex items-center"><input type="checkbox" name="addonService" value="κΈ°κ°€μ§€λ‹ 4A" data-price="3300" class="radio-input mr-2">κΈ°κ°€μ§€λ‹ 4A (μ›” 3,300μ›)</label>
                </div>
            </div>


            <div class="input-group mt-6">
                <label class="input-label">λ¨λ°”μΌ νμ„  μ •λ³΄ (μµλ€ 5νμ„ )</label>
                <div class="flex items-center mb-2">
                    <label for="mobileLinesCount" class="mr-2 text-sm text-slate-700">κ²°ν•©ν•  λ¨λ°”μΌ νμ„  μ:</label>
                    <input type="number" id="mobileLinesCount" min="0" max="5" value="0" class="input-field w-20 text-center">
                </div>
                <div id="mobileLinesContainer" class="space-y-3"></div>
            </div>
             <div class="input-group mt-6">
                <label for="dongpanSalesCheckKt" class="input-label flex items-center cursor-pointer">
                    <input type="checkbox" id="dongpanSalesCheckKt" class="radio-input h-5 w-5 mr-2">
                    KT λ™νμ μ‹¬ νλ§¤ μ‹ μ¶”κ°€ μ‚¬μ€ν’ μ μ© λ° μ•λ‚΄ λ³΄κΈ°
                </label>
                <div id="dongpanPolicyDetailsContainerKt" class="mt-3 hidden info-box">
                    <h4 class="font-semibold text-sm mb-2">KT μΈν„°λ„· μ μ‹¬ κ°ν†µ μ μ°¨ μ•λ‚΄ (μƒλ‹΄μ› μ°Έκ³ μ©)</h4>
                    <p class="text-xs mb-1"><strong>μ‹ μ²­ λ° μΈμ¦:</strong></p>
                    <ul class="list-disc list-inside text-xs space-y-0.5 mb-2">
                        <li>KT μΈν„°λ„· μ μ‹¬ κ°ν†µ μ‹ μ²­μ„ λ§ν¬: <a href="http://online.kt.com/index.jsp?prdcID=6C463388-3BDF-4E68-BE73-975E05BDA182" target="_blank" class="text-blue-700 font-bold hover:text-blue-800 underline text-lg">λ°”λ΅κ°€κΈ°</a> (PASS λλ” μ‹ μ©μΉ΄λ“ μΈμ¦ ν•„μ”)</li>
                        <li>KT λ™ν κ²°ν•© λ³ΈμΈμΈμ¦ λ§ν¬ (κ²°ν•©λ§ μ²΄ν¬): <a href="https://online.kt.com/smart/simple/simpleCustomerInfoPop.do?prdcId=65278B4C-20F1-47FA-9EEF-56E9B574D346" target="_blank" class="text-blue-600 hover:underline font-semibold">λ°”λ΅κ°€κΈ°</a></li>
                    </ul>
                    <p class="text-xs mb-1"><strong>κ²°ν•© κ°€λ¥ νμ„ :</strong> μΈν„°λ„· + μ μ‹¬ λ™ν + κ°€μ΅± μ μ‹¬ 2νμ„  (μ΄ 3νμ„ κΉμ§€ κ°€λ¥)</p>
                    <p class="text-xs mb-1"><strong>μ ‘μ κ³Όμ •:</strong> λ°±λ©”κ°€ μ ‘μμ›Ή(speedonline.kr) KT(μΌλ°) > λ¨λ°”μΌ νƒ­μΌλ΅ μ ‘μ</p>
                    <p class="text-xs mb-1"><strong>μ ‘μ μ‹ ν•„μ κΈ°μ¬ μ‚¬ν•­ (κΈ°νƒ€λ©”λ¨ μ–‘μ‹):</strong></p>
                    <ul class="list-disc list-inside text-xs space-y-0.5 mb-2">
                        <li>μΈν„°λ„· κ°ν†µ μ™„λ£ μ‹: "[κ°ν†µ μ™„λ£ / μ μ‹¬ λ°μ†΅ μ”μ²­]"</li>
                        <li>μ΄λ―Έ κ°ν†µλ κ³ κ° 30μΌ μ΄λ‚΄ λ™ν μ‹: "[κ°ν†µμ™„λ£ μΌμ, κ°ν†µλ²νΈ κΈ°μ¬ / μ μ‹¬ λ°μ†΅ μ”μ²­]"</li>
                        <li>κ³ κ° μ μ‹¬ μλ Ή ν›„ κ°ν†µ μ”μ²­ μ‹: "[κ³ κ° μ μ‹¬ μλ Ή μ™„λ£ / κ°ν†µ μ§„ν–‰ μ”μ²­]"</li>
                    </ul>
                    <p class="text-xs mb-1"><strong>κ°ν†µ μ§„ν–‰ λ° μ μμ‚¬ν•­:</strong></p>
                    <ul class="list-disc list-inside text-xs space-y-0.5 mb-2">
                        <li>κ³ κ°μ—κ² μ„μ•½κΈ ν™•μΈ λ° λ™μ λ¬Έμ λ°μ†΅ ν›„ μ²λ¦¬. λ―Έλ™μ μ‹ 10λ¶„ ν›„ κ°•μ  λ™μ μ²λ¦¬ κ°€λ¥.</li>
                        <li>USIM κµμ²΄ λ° μ „μ› ON μ„±κ³µ ν›„ μ„ νƒμ•½μ • λ° μ λ¬΄μ„  κ²°ν•© ν•„μ (μ™„λ£ μ‹ κ°ν†µ μ™„λ£ μ²λ¦¬).</li>
                        <li>μ μ‹¬ κ°ν†µ μµλ€ 4μ‹κ°„ μ†μ” κ°€λ¥. μ‚¬μ „ λ™μ λ¬Έμ μ²λ¦¬ μ‹ λΉ λ¥Έ κ°ν†µ.</li>
                        <li>KT USIM κ°ν†µ μ „κΉμ§€ κΈ°μ΅΄ USIM μ‚¬μ©, μ‹ νΈ λκΈ°λ©΄ κµμ²΄. κΈ°κΈ° μν μ¬μ‹λ™ ν•„μ”.</li>
                    </ul>
                    <p class="text-xs mb-1"><strong>λΉ„μ© λ° μμλ£ μ£Όμμ‚¬ν•­:</strong></p>
                    <ul class="list-disc list-inside text-xs space-y-0.5">
                        <li>μ μ‹¬ λ‹ΉμΌ λ°μ†΅ λ§κ° 15μ‹.</li>
                        <li>μ μ‹¬ λΉ„μ© 7,700μ› / λ²νΈμ΄λ™ μμλ£ 800μ› μ²« λ‹¬ μ²­κµ¬.</li>
                        <li>μΈν„°λ„·/μ μ‹¬ μ¤‘ ν•λ‚λΌλ„ μ„¤μΉ/κ°ν†µ λ¶κ°€ μ‹ μμλ£ μ§€κΈ‰ λ¶κ°€.</li>
                        <li>μΈν„°λ„· κ°ν†µμ›” κΈ°μ¤€ μµμ›” λ§κΉμ§€ μ μ‹¬ κ°ν†µ μ‹ μμλ£ μΈμ •.</li>
                        <li>μ„ νƒμ•½μ • λ―Έμ μ© μ‹ μμλ£ μ§€κΈ‰ λ¶κ°€.</li>
                        <li>μΈν„°λ„·/μ μ‹¬ λ…μμ μƒμ΄ν•΄λ„ μ μ‹¬ μμλ£ μ§€κΈ‰ κ°€λ¥.</li>
                    </ul>
                </div>
            </div>
        </section>

        <section id="discountTypeSection" class="mb-8">
            <h2 class="section-title">2. κ²°ν•© ν• μΈ μ ν• μ„ νƒ</h2>
            <div class="bg-white p-6 rounded-lg shadow">
                <p class="mb-4 text-sm text-slate-600">κ°€μ¥ μ λ¦¬ν• ν• μΈ μ ν•μ„ μ„ νƒν•κ±°λ‚, κ° μ ν•λ³„ μμƒ μ”κΈμ„ λΉ„κµν•΄λ³΄μ„Έμ”.</p>
                <div class="grid grid-cols-1 sm:grid-cols-2 gap-x-4 gap-y-2">
                     <label class="radio-label"><input type="radio" name="discountType" value="none" class="radio-input"> κ²°ν•© ν• μΈ μ—†μ</label>
                    <div class="flex items-center">
                        <label class="radio-label"><input type="radio" name="discountType" value="totalAmountBundle" class="radio-input" checked> μ΄μ•΅ κ²°ν•©ν• μΈ</label>
                        <label class="toggle-switch">
                            <input type="checkbox" id="totalAmountDetailsToggle">
                            <span class="slider"></span>
                        </label>
                        <span class="ml-1 text-xs text-slate-500">(μƒμ„Έλ³΄κΈ°)</span>
                    </div>
                    <div class="flex items-center">
                        <label class="radio-label"><input type="radio" name="discountType" value="premiumFamilyBundle" class="radio-input"> ν”„λ¦¬λ―Έμ—„ κ°€μ΅±κ²°ν•©</label>
                        <label class="toggle-switch">
                            <input type="checkbox" id="premiumFamilyDetailsToggle">
                            <span class="slider"></span>
                        </label>
                        <span class="ml-1 text-xs text-slate-500">(μƒμ„Έλ³΄κΈ°)</span>
                    </div>
                    <div class="flex items-center">
                        <label class="radio-label"><input type="radio" name="discountType" value="premiumSingleBundle" class="radio-input"> ν”„λ¦¬λ―Έμ—„ μ‹±κΈ€κ²°ν•©</label>
                        <label class="toggle-switch">
                            <input type="checkbox" id="premiumSingleDetailsToggle">
                            <span class="slider"></span>
                        </label>
                        <span class="ml-1 text-xs text-slate-500">(μƒμ„Έλ³΄κΈ°)</span>
                    </div>
                    <div class="flex items-center">
                        <label class="radio-label"><input type="radio" name="discountType" value="mvnoBundle" class="radio-input"> μ•λ°ν° κ²°ν•©</label>
                        <label class="toggle-switch">
                            <input type="checkbox" id="mvnoDetailsToggle">
                            <span class="slider"></span>
                        </label>
                        <span class="ml-1 text-xs text-slate-500">(μƒμ„Έλ³΄κΈ°)</span>
                    </div>
                    <div class="flex items-center">
                        <label class="radio-label"><input type="radio" name="discountType" value="familyBundle" class="radio-input"> ν¨λ°€λ¦¬ κ²°ν•© (μΈν„°λ„· μ¶”κ°€νμ„ )</label>
                        <label class="toggle-switch">
                            <input type="checkbox" id="familyBundleDetailsToggle">
                            <span class="slider"></span>
                        </label>
                        <span class="ml-1 text-xs text-slate-500">(μƒμ„Έλ³΄κΈ°)</span>
                    </div>
                     <div class="flex items-center">
                        <label class="radio-label"><input type="radio" name="discountType" value="separateFamilyBundle" class="radio-input"> λ”°λ΅ μ‚΄μ•„λ„ κ°€μ΅±κ²°ν•©</label>
                        <label class="toggle-switch">
                            <input type="checkbox" id="separateFamilyDetailsToggle">
                            <span class="slider"></span>
                        </label>
                        <span class="ml-1 text-xs text-slate-500">(μƒμ„Έλ³΄κΈ°)</span>
                    </div>
                </div>

                <div id="totalAmountDetailsContainer" class="mt-3 hidden discount-details">
                    <p class="font-semibold mb-1">μ΄μ•΅κ²°ν•© μƒμ„Έ (μƒλ‹΄μ› μ°Έκ³ μ©):</p>
                    <p>μΈν„°λ„· ν• μΈ: <span id="detailInternetDiscount" class="font-bold">0</span>μ›</p>
                    <p>ν΄λ€ν° ν• μΈ (μ°Έκ³ μ©): <span id="detailMobileDiscount" class="font-bold">0</span>μ›</p>
                    <p>μ΄ ν• μΈ κΈμ•΅ (μ°Έκ³ μ©): <span id="detailTotalDiscount" class="font-bold">0</span>μ›</p>
                    <hr class="my-2 border-sky-300">
                    <p class="text-xs mt-2 mb-1 text-sky-700 font-semibold">μ£Όμ” μ°Έκ³ μ‚¬ν•­:</p>
                    <ul class="list-disc list-inside text-xs space-y-0.5">
                        <li>ν• μΈ κΈ°μ¤€: λ¶€κ°€μ„λΉ„μ¤, λ‹¨λ§κΈ° ν• λ¶€κΈ, κΈ°νƒ€ ν• μΈ λ“±μ„ μ μ™Έν• μμ μ”κΈμ μ μ΄μ•΅ κΈ°μ¤€.</li>
                        <li>ννƒ κµ¬μ΅°: μΈν„°λ„·+λ¨λ°”μΌ κ²°ν•© μ‹, κ²°ν•© νμ„ μ΄ λ§μ„μλ΅ ν• μΈ ννƒ μ¦κ°€.</li>
                        <li>λ¨λ°”μΌ ν• μΈ λ°©μ‹: λ€ν‘ 1νμ„ μ— μ „μ•΅ μ μ© λλ” κΈ°μ—¬λ„μ— λ”°λ¥Έ λ¶„ν•  μ¤‘ μ„ νƒ.</li>
                        <li>λ…μμ μ΅°κ±΄:
                            <ul class="list-disc list-inside ml-4">
                                <li>λ™μΌ λ…μμ λ¨λ°”μΌ μµλ€ 2νμ„ κΉμ§€ κ²°ν•© κ°€λ¥.</li>
                                <li>μΈν„°λ„·κ³Ό ν΄λ€ν° λ…μμκ°€ λ‹¬λΌλ„ κ²°ν•© κ°€λ¥ (λ€ν‘μ κΈ°μ¤€ μ§κ³„κ°€μ΅± λ²”μ„ λ‚΄).</li>
                            </ul>
                        </li>
                        <li>κ²°ν•© νμ„  μ: μµλ€ μΈν„°λ„· 1νμ„  + ν΄λ€ν° 5νμ„ .</li>
                        <li>μ¤‘λ³µ κ°€μ… λ¶κ°€: κΈ°μ΅΄ λ¬΄μ„ κ°„ ν΄λ€ν° κ²°ν•© μƒν’κ³Ό μ¤‘λ³µ λ¶κ°€.</li>
                    </ul>
                </div>
                <div id="premiumFamilyDetailsContainer" class="mt-3 hidden discount-details">
                    <p class="font-semibold mb-1">ν”„λ¦¬λ―Έμ—„ κ°€μ΅±κ²°ν•© μƒμ„Έ (μƒλ‹΄μ› μ°Έκ³ μ©):</p>
                    <p>μΈν„°λ„· ν• μΈ: <span id="detailPfInternetDiscount" class="font-bold">0</span>μ›</p>
                    <div id="detailPfMobileDiscountsContainer" class="mt-2">
                        <p>λ¨λ°”μΌ ν• μΈ (μ°Έκ³ μ©): μ΅°κ±΄ ν™•μΈ μ¤‘...</p>
                    </div>
                    <hr class="my-2 border-sky-300">
                    <p class="text-xs mt-2 mb-1 text-sky-700 font-semibold">μ£Όμ” μ°Έκ³ μ‚¬ν•­:</p>
                    <ul class="list-disc list-inside text-xs space-y-0.5">
                        <li>μ΅°κ±΄: μΈν„°λ„· 500M μ΄μƒ + μ›” 77,000μ› μ΄μƒ λ¨λ°”μΌ 1νμ„  μ΄μƒ (λ² μ΄μ¤) + μ¶”κ°€ κ³ κ°€ λ¨λ°”μΌ νμ„ (μ„ νƒ).</li>
                        <li>λ² μ΄μ¤ νμ„ : κΈ°λ³Έ 5,500μ› ν• μΈ + μ„ νƒμ•½μ • 25% μ¤‘λ³µ κ°€λ¥.</li>
                        <li>μ¶”κ°€ κ³ κ°€ νμ„  (2λ²μ§Έ, 7.7λ§μ› μ΄μƒ&μ²΄ν¬ μ‹): ν”„λ¦¬λ―Έμ—„ κ°€μ΅±κ²°ν•© 25% + μ„ νƒμ•½μ • 25% μ¤‘λ³µ κ°€λ¥.</li>
                        <li>νμ„  3~7 (λ² μ΄μ¤ λ° 2λ²μ§Έ νμ„  κ³ κ°€ μ΅°κ±΄ μ¶©μ΅± μ‹):
                            <ul class="list-disc list-inside ml-4">
                                <li>7.7λ§μ› μ΄μƒ & μ²΄ν¬ μ‹: 2λ²μ§Έ νμ„ κ³Ό λ™μΌ ν• μΈ.</li>
                                <li>7.7λ§μ› λ―Έλ§: λ‚λ¨Έμ§€ ν•μ„ μ”κΈμ  ν•©μ‚° ν›„, μ΄μ•΅κ²°ν•©ν• μΈν‘(JSON)μ λ¨λ°”μΌ ν• μΈμ•΅ μ μ©.</li>
                            </ul>
                        </li>
                    </ul>
                </div>
                <div id="premiumSingleDetailsContainer" class="mt-3 hidden discount-details">
                    <p class="font-semibold mb-1">ν”„λ¦¬λ―Έμ—„ μ‹±κΈ€κ²°ν•© μƒμ„Έ (μƒλ‹΄μ› μ°Έκ³ μ©):</p>
                    <p>μΈν„°λ„· ν• μΈ: <span id="detailPsInternetDiscount" class="font-bold">0</span>μ›</p>
                    <p>λ¨λ°”μΌ ν• μΈ: <span id="detailPsMobileDiscountText" class="font-bold">μ΅°κ±΄ λ―Έμ¶©μ΅±</span></p>
                    <p>λ¨λ°”μΌ μµμΆ… μ²­κµ¬ κΈμ•΅: <span id="detailPsMobileFinalAmount" class="font-bold">0</span>μ›</p>
                    <hr class="my-2 border-sky-300">
                    <p class="text-xs mt-2 mb-1 text-sky-700 font-semibold">μ£Όμ” μ°Έκ³ μ‚¬ν•­:</p>
                    <ul class="list-disc list-inside text-xs space-y-0.5">
                        <li>μ΅°κ±΄: μΈν„°λ„· 500M μ΄μƒ + ν΄λ€ν° μ›”μ •μ•΅ 77,000μ› μ΄μƒ 1νμ„ .</li>
                        <li>μΈν„°λ„· λ‹¨λ… μ‹: μΈν„°λ„· 5,500μ› ν• μΈ.</li>
                        <li>μΈν„°λ„·+TV/μ§‘μ „ν™” λ²λ“¤ μ‹: μΈν„°λ„· ν• μΈ μ—†μ (λ¨λ°”μΌ 25% ν• μΈλ§ μ μ©. κ³„μ‚°κΈ°μ—λ” μΈν„°λ„· ν• μΈλ§ ν‘μ‹).</li>
                        <li>λ¨λ°”μΌ 25% ν• μΈ: μ„ νƒμ•½μ • μ¤‘λ³µ κ°€λ¥.</li>
                    </ul>
                </div>
                <div id="familyBundleDetailsContainer" class="mt-3 hidden discount-details">
                    <p class="font-semibold mb-1">ν¨λ°€λ¦¬ κ²°ν•© (μΈν„°λ„· μ¶”κ°€νμ„ ) μƒμ„Έ (μƒλ‹΄μ› μ°Έκ³ μ©):</p>
                    <p>μΈν„°λ„· ν• μΈ (μνμ„ ): <span id="detailFbInternetDiscount" class="font-bold">0</span>μ›</p>
                    <hr class="my-2 border-sky-300">
                     <p class="text-xs mt-2 mb-1 text-sky-700 font-semibold">μ£Όμ” μ°Έκ³ μ‚¬ν•­:</p>
                    <ul class="list-disc list-inside text-xs space-y-0.5">
                        <li>μ΅°κ±΄: κΈ°μ΅΄ KT μΈν„°λ„·(λ¨νμ„ ) μ‚¬μ© κ°€μ΅±μ΄ μ‹ κ· μ¥μ†μ— μ¶”κ°€ μΈν„°λ„·(μνμ„ ) μ„¤μΉ μ‹.</li>
                        <li>100M μνμ„ : 5,500μ› ν• μΈ.</li>
                        <li>500M μ΄μƒ μνμ„ : 11,000μ› ν• μΈ.</li>
                        <li>κ°ν†µ ν›„ 1κ°μ›” λ‚΄ κ²°ν•©.</li>
                    </ul>
                </div>
                 <div id="separateFamilyDetailsContainer" class="mt-3 hidden discount-details">
                    <p class="font-semibold mb-1">λ”°λ΅ μ‚΄μ•„λ„ κ°€μ΅±κ²°ν•© μƒμ„Έ (μƒλ‹΄μ› μ°Έκ³ μ©):</p>
                    <p>μΈν„°λ„· ν• μΈ (μ¶”κ°€ νμ„ ): <span id="detailSfInternetDiscount" class="font-bold">0</span>μ›</p>
                    <p>TV ν• μΈ (μ°Έκ³ μ©, μ¶”κ°€ νμ„ ): <span id="detailSfTvDiscount" class="font-bold">0</span>μ›</p>
                    <p>λ¨λ°”μΌ μ¶”κ°€ ν• μΈ (μ°Έκ³ μ©): κ°€λ¥μ„± μμ (μ΄μ•΅κ²°ν•© κΈ°λ°)</p>
                    <hr class="my-2 border-sky-300">
                     <p class="text-xs mt-2 mb-1 text-sky-700 font-semibold">μ£Όμ” μ°Έκ³ μ‚¬ν•­:</p>
                    <ul class="list-disc list-inside text-xs space-y-0.5">
                        <li>λ°©μ‹: λ¨νμ„ μ΄ μ΄μ•΅ κ²°ν•© μ¤‘μΌ λ•, μ¶”κ°€ μΈν„°λ„· νμ„ μ— μ μ© (μ΄μ•΅ κ²°ν•©μ— μ¶”κ°€).</li>
                        <li>100M μΈν„°λ„·: μΈν„°λ„·/TV ν• μΈ μ—†μ.</li>
                        <li>500M μΈν„°λ„·: μΈν„°λ„· 2,200μ› ν• μΈ, TV 2,200μ› ν• μΈ (TV ν• μΈμ€ μ°Έκ³ μ©).</li>
                        <li>1G μΈν„°λ„·: μΈν„°λ„· 3,300μ› ν• μΈ, TV 3,300μ› ν• μΈ (TV ν• μΈμ€ μ°Έκ³ μ©).</li>
                        <li>μ΅°κ±΄: λ² μ΄μ¤ νμ„ (λ¨νμ„ ) μΈ1+λ¨1 μ§€μ • ν•„μ. λ² μ΄μ¤ νμ„  μ μ™Έ μΈν„°λ„· μµλ€ 5κ°κΉμ§€ κ²°ν•© κ°€λ¥.</li>
                        <li>κ°€μ… λ€μƒ: 25λ…„ 3μ›” μ΄ν›„ μΈν„°λ„· μ‹ κ· κ°€μ…μ (κΈ°μ΅΄ κ°€μ…μλ” μ•½μ • μΆ…λ£ ν›„ μ¬μ•½μ • μ‹).</li>
                        <li>μ¤‘λ³µ λ¶κ°€: ν¨λ°€λ¦¬ μνμ„ μ€ μ¤‘λ³µ μ μ© λ¶κ°€.</li>
                        <li>μ‹ μ²­: μ„ κ²° λλ” κ°ν†µ ν›„ μµμ›” λ§κΉμ§€ κ°€λ¥. μ„λ¥ ν•„μ”.</li>
                    </ul>
                </div>
                <div id="mvnoDetailsContainer" class="mt-3 hidden discount-details">
                    <p class="font-semibold mb-1">μ•λ°ν° κ²°ν•© μƒμ„Έ (μƒλ‹΄μ› μ°Έκ³ μ©):</p>
                    <p>μ μ© μΈν„°λ„· ν• μΈ: <span id="detailMvnoInternetDiscount" class="font-bold">0</span>μ›</p>
                    <hr class="my-2 border-sky-300">
                    <p class="text-xs mt-2 mb-1 text-sky-700 font-semibold">μ£Όμ” μ°Έκ³ μ‚¬ν•­:</p>
                    <ul class="list-disc list-inside text-xs space-y-0.5">
                        <li>100Mbps μΈν„°λ„· (λ‹¨λ…/λ²λ“¤): 3,300μ› ν• μΈ.</li>
                        <li>500Mbps~1Gbps μΈν„°λ„· (λ‹¨λ…): 11,000μ› ν• μΈ.</li>
                        <li>500Mbps~1Gbps μΈν„°λ„· (λ²λ“¤): 5,500μ› ν• μΈ.</li>
                        <li>κ°μΈμ‚¬μ—…μ / λ²•μΈμ‚¬μ—…μ κ²°ν•© λ¶κ°€.</li>
                        <li>κ²°ν•© κ°€λ¥ μ•λ°ν° ν†µμ‹ μ‚¬: KT Mλ¨λ°”μΌ, λ―Έλ‹κ²μ΄νΈ(μ‰μ΄ν¬λ¨λ°”μΌ), μ λ‹μ»΄μ¦(λ¨λΉ™), ν† μ¤λ¨λ°”μΌ, κµ­λ―Όμ€ν–‰(λ¦¬λΈλ¨λ°”μΌ), λ”ν”Όμ—”μ—(νΌμ¤νΈλ¨λ°”μΌ), μ—λ¥΄μ—(μ¤νμ¤λ„·λ¨λ°”μΌ), κ³ κ³ ν©ν† λ¦¬, μ¤λ§ν…”, μ¤μΉ΄μ΄λΌμ΄ν”„, μ½”λ“λ¨λ°”μΌ, ν”„λ¦¬ν‹°, λ‹μ¤λΌμ½”λ¦¬μ•„, μ¤ν”ΌμΈ λ¨λ°”μΌ, μ•„μ΄μ¦λΉ„μ „ λ“±.</li>
                        <li>μΈν„°λ„· μ„¤μΉ ν›„ μ•λ° ν†µμ‹ μ‚¬μ— κ²°ν•© μ”μ²­ ν•„μ”.</li>
                        <li>μ•λ°ν° ν†µμ‹ μ‚¬ λ³€κ²½ μ‹ κ²°ν•© ν•΄μ§€ ν›„ μ¬κ²°ν•© λ¶κ°€.</li>
                    </ul>
                </div>
            </div>
        </section>
        
        <section id="displayModeSectionKt" class="mb-8">
            <h2 class="section-title">κ²°μ κΈμ•΅ ν‘μ‹ λ°©μ‹ μ„ νƒ</h2>
            <div class="bg-white p-6 rounded-lg shadow">
                <label class="radio-label">
                    <input type="radio" name="displayModeKt" value="preApplied" class="radio-input" checked>
                    μ„ κ²°ν•© κΈ°μ¤€ (ν• μΈμ΄ μ μ©λ μµμΆ… μ›” λ‚©λ¶€μ•΅)
                </label>
                <label class="radio-label">
                    <input type="radio" name="displayModeKt" value="postApplied" class="radio-input">
                    ν›„κ²°ν•© κΈ°μ¤€ (ν• μΈμ΄ μ μ©λκΈ° μ „ μ΄ μ„λΉ„μ¤ μ›” κΈ°λ³Έλ£)
                </label>
            </div>
        </section>

        <section id="installationSection" class="mb-8">
            <h2 class="section-title">3. μ„¤μΉ μµμ…</h2>
            <div class="input-group bg-white p-6 rounded-lg shadow">
                <label class="input-label">μ„¤μΉ ν¬λ§ μ‹μ  (μ„¤μΉλΉ„ λ³€λ™)</label>
                <div class="space-y-2">
                    <label class="radio-label"><input type="radio" name="installationTime" value="weekday" class="radio-input" checked> ν‰μΌ μ£Όκ°„</label>
                    <label class="radio-label"><input type="radio" name="installationTime" value="weekend" class="radio-input"> μ£Όλ§/μ•Όκ°„ (ν• μ¦ μ μ©)</label>
                </div>
            </div>
        </section>

        <div class="text-center mb-8">
            <button id="calculateButton" class="btn-primary text-lg">μμƒ μ”κΈ κ³„μ‚°ν•κΈ°</button>
        </div>

        <section id="resultSection" class="hidden">
            <h2 class="section-title">π“ κ³„μ‚° κ²°κ³Ό</h2>
            
            <div class="result-card">
                <h3 class="text-xl font-semibold text-sky-600 mb-3">μ”κΈ μ”μ•½ (VAT ν¬ν•¨)</h3>
                <div class="grid md:grid-cols-2 gap-4">
                    <div>
                        <p class="result-label summary-item">μ„ νƒ μΈν„°λ„·: <span id="selectedInternet" class="result-value"></span></p>
                        <p class="result-label summary-item">μ„ νƒ TV (1λ²μ§Έ): <span id="selectedTv" class="result-value"></span></p>
                        <p class="result-label summary-item">μ„ νƒ μ…‹ν†±λ°•μ¤ (1λ²μ§Έ TV): <span id="selectedStb" class="result-value"></span></p>
                        <p class="result-label summary-item">μ„ νƒ μ¶”κ°€ TV (2λ²μ§Έ): <span id="selectedAdditionalTv" class="result-value"></span></p>
                        <p class="result-label summary-item">μ„ νƒ μ§‘μ „ν™”: <span id="selectedPhone" class="result-value"></span></p>
                        <p class="result-label summary-item">λ¨λ°”μΌ νμ„  μ: <span id="selectedMobileCount" class="result-value"></span></p>
                        <p class="result-label summary-item">μ μ© ν• μΈ μ ν•: <span id="selectedDiscountType" class="result-value"></span></p>
                    </div>
                    <div>
                        <p class="result-label summary-item">μ›” μΈν„°λ„· κΈ°λ³Έλ£: <span id="totalBaseInternetCost" class="result-value">0</span> μ›</p>
                        <p class="result-label text-green-600 summary-item">μ›” μΈν„°λ„· κ²°ν•© ν• μΈμ•΅: <span id="totalInternetDiscountAmount" class="result-value text-green-600">0</span> μ›</p>
                        <p class="result-label summary-item">μ›” λ¨λ€ μ„λ€λ£: <span id="internetModemRental" class="result-value">0</span> μ›</p>
                        <p class="result-label summary-item">μ›” μ™€μ΄νμ΄ κ³µμ κΈ° μ„λ€λ£: <span id="wifiRouterRentalCostDisplay" class="result-value">0</span> μ›</p>
                        
                        <div id="tvCostSummaryContainer" class="hidden"> 
                             <hr class="my-1 border-slate-200">
                            <p class="result-label summary-item">μ›” TV κΈ°λ³Έλ£ (1λ²μ§Έ): <span id="tvBaseCostDisplay" class="result-value">0</span> μ›</p>
                            <p class="result-label text-green-600 summary-item">μ›” TV κ²°ν•© ν• μΈμ•΅ (1λ²μ§Έ): <span id="tvDiscountDisplay" class="result-value text-green-600">0</span> μ›</p>
                            <p class="result-label summary-item">μ›” TV μ…‹ν†±λ°•μ¤ μ„λ€λ£ (1λ²μ§Έ): <span id="stbRentalCostDisplay" class="result-value">0</span> μ›</p>
                        </div>
                         <div id="additionalTvCostSummaryContainer" class="hidden">
                             <hr class="my-1 border-slate-200">
                            <p class="result-label summary-item">μ›” μ¶”κ°€ TV μ”κΈ (2λ²μ§Έ, μ…‹ν†±ν¬ν•¨): <span id="additionalTvCostDisplay" class="result-value">0</span> μ›</p>
                        </div>
                        <div id="phoneCostSummaryContainer" class="hidden">
                             <hr class="my-1 border-slate-200">
                            <p class="result-label summary-item">μ›” μ§‘μ „ν™” κΈ°λ³Έλ£: <span id="phoneBaseCostDisplay" class="result-value">0</span> μ›</p>
                            <p class="result-label text-green-600 summary-item">μ›” μ§‘μ „ν™” κ²°ν•© ν• μΈμ•΅: <span id="phoneDiscountDisplay" class="result-value text-green-600">0</span> μ›</p>
                        </div>
                        <div id="addonServicesSummaryContainer" class="hidden">
                            <hr class="my-1 border-slate-200">
                            <p class="result-label summary-item">μ›” λ¶€κ°€μ„λΉ„μ¤ μ΄μ•΅: <span id="addonServicesTotalCostDisplay" class="result-value">0</span> μ›</p>
                        </div>
                        <hr class="my-1 border-sky-300">
                        <p class="mt-2 text-lg font-semibold"><span id="finalCostLabel">μµμΆ… μμƒ μ›” λ‚©λ¶€μ•΅</span>: <span id="finalMonthlyCost" class="total-value">0</span> μ›</p>
                    </div>
                </div>
            </div>

            <div class="result-card">
                <h3 class="text-xl font-semibold text-sky-600 mb-3">π μ‚¬μ€ν’ ννƒ (μμƒ)</h3>
                <p class="result-label summary-item">ν„κΈ μ‚¬μ€ν’ (κΈ°λ³Έ): <span id="giftCash" class="result-value">0</span> μ›</p>
                <p class="result-label summary-item">μƒν’κ¶ μ‚¬μ€ν’ (κΈ°λ³Έ): <span id="giftVoucher" class="result-value">0</span> μ›</p>
                <p class="result-label summary-item">μΌλ°μ „ν™” μ¶”κ°€ μƒν’κ¶: <span id="giftPhoneVoucher" class="result-value">0</span> μ›</p>
                <p class="result-label summary-item">μ¶”κ°€ TV μ‚¬μ€ν’ (ν„κΈ): <span id="giftAdditionalTv" class="result-value">0</span> μ›</p>
                <p class="result-label summary-item hidden" id="dongpanCashContainerKt">λ™ν μ¶”κ°€ ν„κΈ μ‚¬μ€ν’ (KT): <span id="giftDongpanAdditionalCashKt" class="result-value">0</span> μ›</p>
                <hr class="my-1">
                <p class="result-label summary-item font-semibold">μ΄ μ‚¬μ€ν’ κ°€μΉ: <span id="giftTotal" class="result-value text-green-600">0</span> μ›</p>
                <p class="text-xs text-slate-500 mt-2">β… KT μΌλ°μ „ν™” μƒν’κ¶ μ§€λ¥ 2λ§μ› μ¶”κ°€ / μ¶”κ°€μ…‹ν†± 3λ§μ› (μ°Έκ³ )</p>
                <p class="text-xs text-slate-500 mt-1">β… KT λ΅―λ° / LG μ‹ μ„Έκ³„ λ¨λ°”μΌ μƒν’κ¶μ€ ν„κΈ κµν™ κ°€λ¥ (μ°Έκ³ )</p>
                <p class="text-xs text-red-500 mt-1">* μ‚¬μ€ν’ μ •λ³΄λ” λ³€λ™λ  μ μμΌλ‹ κ°€μ… μ‹μ μ— λ°λ“μ‹ μ¬ν™•μΈ λ°”λλ‹λ‹¤.</p>
            </div>

            <div class="result-card">
                <h3 class="text-xl font-semibold text-sky-600 mb-3">μ΄κΈ° μ„¤μΉ λΉ„μ© (μ„ νƒν• λ¨λ“  μ μ„  μ„λΉ„μ¤ κΈ°μ¤€)</h3>
                <p class="result-label">μμƒ μ΄ μ„¤μΉλΉ„: <span id="installationCostResult" class="result-value text-lg">0</span> μ›</p>
                <p class="text-xs text-slate-500 mt-1">* μ„ νƒν•μ‹  μ„¤μΉ μ‹μ (ν‰μΌ/μ£Όλ§) λ° μ„λΉ„μ¤ μ΅°ν•©μ— λ”°λΌ κ³„μ‚°λ©λ‹λ‹¤. ν”„λ΅λ¨μ…μΌλ΅ λ©΄μ λ  μ μμµλ‹λ‹¤.</p>
            </div>
            
             <div class="result-card mt-6">
                <h3 class="text-xl font-semibold text-sky-600 mb-2">μ¶”κ°€ μ•λ‚΄μ‚¬ν•­</h3>
                <ul class="list-disc list-inside text-sm text-slate-600 space-y-1">
                    <li>λ³Έ κ³„μ‚°κΈ°λ” μ κ³µλ KT κ²°ν•©μƒν’ μ •λ³΄λ¥Ό λ°”νƒ•μΌλ΅ ν• μ¶”μ •μΉμ…λ‹λ‹¤.</li>
                    <li>**"μΈν„°λ„·+μΈν„°λ„· ν¨λ°€λ¦¬ κ²°ν•©"** λ° **"λ”°λ΅ μ‚΄μ•„λ„ κ°€μ΅±κ²°ν•©"**μ€ ν„μ¬ κ³„μ‚°κΈ°μ—μ„ 'μ¶”κ°€ νμ„ (μνμ„ )' κΈ°μ¤€μΌλ΅ ν• μΈμ•΅μ„ λ³΄μ—¬μ¤λ‹λ‹¤. λ¨νμ„  μ΅°κ±΄ λ° κΈ°νƒ€ λ³µμ΅ν• λ‹¤νμ„  ν• μΈμ€ ν„μ¬ κ³„μ‚°κΈ° κµ¬μ΅°μƒ λ¨λ‘ λ°μλμ§€ μ•μ•μµλ‹λ‹¤. μ΄λ¬ν• μ ν•μ ν• μΈμ€ λ³„λ„ λ¬Έμκ°€ ν•„μ”ν•©λ‹λ‹¤.</li>
                    <li>μ‹¤μ  μ”κΈμ€ KTμ μµμ‹  μ •μ±…, κ°€μ… μ‹μ μ ν”„λ΅λ¨μ…, μ¶”κ°€ μ„ νƒ μ‚¬ν•­μ— λ”°λΌ λ‹¬λΌμ§ μ μμµλ‹λ‹¤.</li>
                    <li>μ•½μ • κΈ°κ°„ λ‚΄ ν•΄μ§€ μ‹ μ„μ•½κΈμ΄ λ°μƒν•  μ μμµλ‹λ‹¤.</li>
                    <li>λ” μ •ν™•ν• μ •λ³΄λ” KT κ³µμ‹ ν™νμ΄μ§€ λλ” κ³ κ°μ„Όν„°(κµ­λ²μ—†μ΄ 100)λ¥Ό ν†µν•΄ ν™•μΈν•μ‹κΈ° λ°”λλ‹λ‹¤.</li>
                </ul>
            </div>
        </section>
        
        <section id="messageScriptSection" class="hidden mt-12">
            <h2 class="section-title">π“„ κ³ κ° μ•λ‚΄ λ¬Έμ μ¤ν¬λ¦½νΈ (μƒλ‹΄μ› μ°Έκ³ μ©)</h2>
            <div class="result-card">
                <h3 class="text-xl font-semibold text-sky-600 mb-3">1. λ°±λ©”κ°€ μ „μ‚° λ©”λ¨</h3>
                <textarea id="memoScript" class="message-script-area" readonly></textarea>
                <div class="copy-button-container">
                    <button onclick="copyToClipboard('memoScript', 'copyFeedbackMemo')" class="btn-secondary text-xs">λ³µμ‚¬ν•κΈ°</button>
                    <span id="copyFeedbackMemo" class="copy-feedback"></span>
                </div>
            </div>
            <div class="result-card">
                <h3 class="text-xl font-semibold text-sky-600 mb-3">2. μƒν’ μ•λ‚΄ λ¬Έμ</h3>
                <textarea id="infoScript" class="message-script-area" readonly></textarea>
                 <div class="copy-button-container">
                    <button onclick="copyToClipboard('infoScript', 'copyFeedbackInfo')" class="btn-secondary text-xs">λ³µμ‚¬ν•κΈ°</button>
                    <span id="copyFeedbackInfo" class="copy-feedback"></span>
                </div>
            </div>
            <div class="result-card">
                <h3 class="text-xl font-semibold text-sky-600 mb-3">3. κ°€μ… μ™„λ£ λ¬Έμ</h3>
                <textarea id="completeScript" class="message-script-area" readonly></textarea>
                 <div class="copy-button-container">
                    <button onclick="copyToClipboard('completeScript', 'copyFeedbackComplete')" class="btn-secondary text-xs">λ³µμ‚¬ν•κΈ°</button>
                    <span id="copyFeedbackComplete" class="copy-feedback"></span>
                </div>
            </div>
             <div class="result-card">
                <h3 class="text-xl font-semibold text-sky-600 mb-3">4. λ°±λ©”κ°€ μ μ‹¬λ™ν λ©”λ¨ (μƒλ‹΄μ›μ©)</h3>
                <textarea id="dongpanMemoScript" class="message-script-area" readonly></textarea>
                <div class="copy-button-container">
                    <button onclick="copyToClipboard('dongpanMemoScript', 'copyFeedbackDongpanMemo')" class="btn-secondary text-xs">λ³µμ‚¬ν•κΈ°</button>
                    <span id="copyFeedbackDongpanMemo" class="copy-feedback"></span>
                </div>
            </div>
            <div class="result-card">
                <h3 class="text-xl font-semibold text-sky-600 mb-3">5. λ―Όκ°μ •λ³΄ μ „μ†΅μ© λ§ν¬ (κ³ κ° λ°μ†΅μ©)</h3>
                <textarea id="sensitiveInfoLinkScript" class="message-script-area" readonly></textarea>
                <div class="copy-button-container">
                    <button onclick="copyToClipboard('sensitiveInfoLinkScript', 'copyFeedbackSensitiveInfo')" class="btn-secondary text-xs">λ³µμ‚¬ν•κΈ°</button>
                    <span id="copyFeedbackSensitiveInfo" class="copy-feedback"></span>
                </div>
            </div>
        </section>
    </main>

    <footer class="text-center p-6 mt-12 bg-sky-800 text-sky-200 text-sm">
        <p>λ³Έ κ³„μ‚°κΈ°λ” KT λ―Έμ†μ—μ„ μ κ³µν•©λ‹λ‹¤.</p>
        <p>&copy; 2024 KT κ²°ν•© ν• μΈ κ³„μ‚°κΈ°. λ¨λ“  μ •λ³΄λ” μ°Έκ³ μ©μ…λ‹λ‹¤.</p>
    </footer>

    <script>
        const internetPlans_KT = { 
            "KTμΈν„°λ„·(λ‹¨λ…) 100mb": { basePrice: 22000, speed: 100, type: "100M" },
            "KTμΈν„°λ„·(λ‹¨λ…) 500mb": { basePrice: 33000, speed: 500, type: "500M" },
            "KTμΈν„°λ„·(λ‹¨λ…) 1GB": { basePrice: 38500, speed: 1000, type: "1G" },
            "KTμΈν„°λ„·λ²λ“¤100mb": { basePrice: 22000, speed: 100, type: "100M" }, 
            "KTμΈν„°λ„·λ²λ“¤500mb": { basePrice: 27500, speed: 500, type: "500M" }, 
            "KTμΈν„°λ„·λ²λ“¤1GB": { basePrice: 33000, speed: 1000, type: "1G" }   
        };

        const tvPlans_KT = { 
            "KTTVλ² μ΄μ§": { basePrice: 15400, category: "λ² μ΄μ§", stbIncluded: "κΈ°κ°€μ§€λ‹A" },
            "KTTVλΌμ΄νΈ": { basePrice: 16500, category: "λΌμ΄νΈ", stbIncluded: "κΈ°κ°€μ§€λ‹A" },
            "KTTVμ—μ„Όμ¤": { basePrice: 19800, category: "μ—μ„Όμ¤", stbIncluded: "κΈ°κ°€μ§€λ‹A" },
            "KTTVμ—μ„Όμ¤ ν”λ¬μ¤": { basePrice: 24200, category: "μ—μ„Όμ¤ ν”λ¬μ¤", stbIncluded: "κΈ°κ°€μ§€λ‹A" }, 
            "KTTVλ„·ν”λ¦­μ¤ HD": { basePrice: 31100, category: "λ„·ν”λ¦­μ¤ HD", stbIncluded: "κΈ°κ°€μ§€λ‹A" }, 
            "KTTVλ„·ν”λ¦­μ¤ UHD": { basePrice: 34600, category: "λ„·ν”λ¦­μ¤ UHD", stbIncluded: "κΈ°κ°€μ§€λ‹A" }, 
            "KTTVν‚¤μ¦λλ“ν©μ΄μ΄μ¤": { basePrice: 20900, category: "ν‚¤μ¦λλ“", stbIncluded: "κΈ°κ°€μ§€λ‹A" } 
        };
        
        const additionalTvPlans_KT = {
            "none": { basePrice: 0, name: "μ„ νƒ μ•ν•¨" },
            "KTTV μ¶”κ°€λ² μ΄μ§": { basePrice: 10670, name: "λ² μ΄μ§ (236μ±„λ„) + κΈ°κ°€μ§€λ‹A" },
            "KTTV μ¶”κ°€λΌμ΄νΈ": { basePrice: 11220, name: "λΌμ΄νΈ (240μ±„λ„) + κΈ°κ°€μ§€λ‹A" },
            "KTTV μ¶”κ°€μ—μ„Όμ¤": { basePrice: 13420, name: "μ—μ„Όμ¤ (266μ±„λ„) + κΈ°κ°€μ§€λ‹A" }
        };
        
        const phonePlans_KT = { 
            "KTμΌλ° μ „ν™”μΌλ° μ „ν™”": { basePrice: 6050 },
            "KTμΌλ° μ „ν™”μΈν„°λ„· μ „ν™” (λ¨μ„μ¤ν†¤)": { basePrice: 5940 },
            "KTμΌλ° μ „ν™”μΈν„°λ„· (λ‹¨λ…) 500mb μ΄μƒ + μΈν„°λ„· μ „ν™”": { basePrice: 3850 }
        };

        const wifiOptions_KT = {
            "KTκ³µμ κΈ°": { fee: 1100, name: "KTκ³µμ κΈ°" },
            "KTκ³µμ κΈ° λ¬΄λ£ (μΈλ‹¨λ… 1GB)": { fee: 0, name: "KTκ³µμ κΈ° λ¬΄λ£ (μΈλ‹¨λ… 1GB)" },
            "KTκ³µμ κΈ° X": { fee: 0, name: "KTκ³µμ κΈ° X" }
        };
        
        const ktAddonServices = {
            "κΈ°κ°€μ§€λ‹3A": { price: 1100, name: "κΈ°κ°€μ§€λ‹3A (AI μ…‹ν†±λ°•μ¤)"},
            "AI μ§€λ‹ TV μ¬μΈμ› μ‚¬μ΄λ“λ°”": { price: 5500, name: "AI μ§€λ‹ TV μ¬μΈμ› μ‚¬μ΄λ“λ°”"},
            "λ²„λ””μ¦ν­κΈ°": { price: 1650, name: "λ²„λ””μ¦ν­κΈ°"},
            "κΈ°κ°€μ§€λ‹ 4A": { price: 3300, name: "κΈ°κ°€μ§€λ‹ 4A"}
        };

        const newKtDiscountRules = {
            "μ΄μ•΅κ²°ν•©ν• μΈ": {
                "100M": { 
                    "λ‹¨λ…": {"λ¨λ°”μΌ_22000λ―Έλ§": 1650, "λ¨λ°”μΌ_64900λ―Έλ§": 3300, "λ¨λ°”μΌ_64900μ΄μƒ": 5500},
                    "TV":   {"λ¨λ°”μΌ_22000λ―Έλ§": 1650, "λ¨λ°”μΌ_64900λ―Έλ§": 3300, "λ¨λ°”μΌ_64900μ΄μƒ": 5500}
                },
                "500M": {
                    "λ‹¨λ…": {"λ¨λ°”μΌ_22000λ―Έλ§": 7700, "λ¨λ°”μΌ_22000μ΄μƒ": 11000},
                    "TV":   {"λ¨λ°”μΌ_22000λ―Έλ§": 2200, "λ¨λ°”μΌ_22000μ΄μƒ": 5500}
                },
                "1G": { 
                    "λ‹¨λ…": {"λ¨λ°”μΌ_22000λ―Έλ§": 7700, "λ¨λ°”μΌ_22000μ΄μƒ": 11000},
                    "TV":   {"λ¨λ°”μΌ_κ²°ν•©μ‹": 5500} 
                }
            },
            "ν”„λ¦¬λ―Έμ—„κ°€μ΅±κ²°ν•©": { 
                "500M_TV": 5500, "1G_TV": 5500, 
                "500M_λ‹¨λ…": 5500, "1G_λ‹¨λ…": 11000 
            },
            "ν”„λ¦¬λ―Έμ—„μ‹±κΈ€κ²°ν•©": { 
                "500M_λ‹¨λ…": 5500, "1G_λ‹¨λ…": 5500    
            },
            "ν¨λ°€λ¦¬κ²°ν•©": { 
                "100M_TV": 5500, "100M_λ‹¨λ…": 5500,
                "500M_TV": 5500, "500M_λ‹¨λ…": 11000, 
                "1G_TV": 5500,   "1G_λ‹¨λ…": 11000
            },
            "μ•λ°ν°κ²°ν•©": {
                "100M_TV": 3300, "100M_λ‹¨λ…": 3300,
                "500M_TV": 5500, "500M_λ‹¨λ…": 11000, 
                "1G_TV": 5500,   "1G_λ‹¨λ…": 11000
            },
            "λ”°λ΅μ‚΄μ•„λ„ κ°€μ΅±κ²°ν•©": { 
                "500M_TV": { "λ¨λ°”μΌ_22000λ―Έλ§": 9900, "λ¨λ°”μΌ_22000μ΄μƒ": 13200, "tvDiscount": 2200 }, 
                "1G_TV": { "λ¨λ°”μΌ_22000λ―Έλ§": 11000, "λ¨λ°”μΌ_22000μ΄μƒ": 14300, "tvDiscount": 3300 }
            }
        };
        
        const dongpanAdditionalGiftTable_KT = {
            "37K": { 
                "100M_λ‹¨λ…": 150000, "500M_λ‹¨λ…": 160000, "1G_λ‹¨λ…": 170000,
                "100M_TVλ²λ“¤": 200000, "500M_TVλ²λ“¤": 220000, "1G_TVλ²λ“¤": 240000
            },
            "61K": { 
                "100M_λ‹¨λ…": 270000, "500M_λ‹¨λ…": 280000, "1G_λ‹¨λ…": 290000,
                "100M_TVλ²λ“¤": 320000, "500M_TVλ²λ“¤": 340000, "1G_TVλ²λ“¤": 360000
            },
            "90K": { 
                "100M_λ‹¨λ…": 310000, "500M_λ‹¨λ…": 320000, "1G_λ‹¨λ…": 330000,
                "100M_TVλ²λ“¤": 360000, "500M_TVλ²λ“¤": 380000, "1G_TVλ²λ“¤": 400000
            }
        };

        const ktInstallationFees_new = { 
            internet_only: { weekday: 36000, weekend: 45000 }, 
            tv_only: { weekday: 34100, weekend: 42625 }, 
            phone_only: { weekday: 27500, weekend: 34375 }, 
            internet_tv: { weekday: 56200, weekend: 71250 }, 
            internet_phone_general: { weekday: 68000, weekend: 86000 }, 
            internet_phone_070: { weekday: 60000, weekend: 78000 },
            internet_tv_phone_general: { weekday: 88200, weekend: 112250 },
            internet_tv_phone_070: { weekday: 80200, weekend: 104250 },
            internet_tv_addTv: { weekday: 71600, weekend: 90500 } 
        };
         const giftTable = { 
            "λ² μ΄μ§": { 
                "100λ‹¨λ…": { cash: 50000, voucher: 40000 }, "500λ‹¨λ…": { cash: 100000, voucher: 40000 }, "1Gλ‹¨λ…": { cash: 90000, voucher: 50000 },
                "100λ²λ“¤": { cash: 310000, voucher: 60000 }, "500λ²λ“¤": { cash: 390000, voucher: 60000 }, "κΈ°κ°€λ²λ“¤": { cash: 360000, voucher: 90000 }
            },
            "λΌμ΄νΈ": {
                "100λ‹¨λ…": { cash: 50000, voucher: 40000 }, "500λ‹¨λ…": { cash: 100000, voucher: 40000 }, "1Gλ‹¨λ…": { cash: 90000, voucher: 50000 },
                "100λ²λ“¤": { cash: 310000, voucher: 60000 }, "500λ²λ“¤": { cash: 380000, voucher: 70000 }, "κΈ°κ°€λ²λ“¤": { cash: 350000, voucher: 100000 }
            },
            "μ—μ„Όμ¤": { 
                "100λ‹¨λ…": { cash: 50000, voucher: 40000 }, "500λ‹¨λ…": { cash: 100000, voucher: 40000 }, "1Gλ‹¨λ…": { cash: 90000, voucher: 50000 },
                "100λ²λ“¤": { cash: 310000, voucher: 60000 }, "500λ²λ“¤": { cash: 420000, voucher: 30000 }, "κΈ°κ°€λ²λ“¤": { cash: 320000, voucher: 30000 }
            },
            "μ—μ„Όμ¤ ν”λ¬μ¤": { 
                "100λ‹¨λ…": { cash: 50000, voucher: 40000 }, "500λ‹¨λ…": { cash: 100000, voucher: 40000 }, "1Gλ‹¨λ…": { cash: 90000, voucher: 50000 },
                "100λ²λ“¤": { cash: 310000, voucher: 60000 }, "500λ²λ“¤": { cash: 420000, voucher: 30000 }, "κΈ°κ°€λ²λ“¤": { cash: 320000, voucher: 30000 }
            },
            "λ„·ν”λ¦­μ¤ HD": { 
                "100λ‹¨λ…": { cash: 50000, voucher: 40000 }, "500λ‹¨λ…": { cash: 100000, voucher: 40000 }, "1Gλ‹¨λ…": { cash: 90000, voucher: 50000 },
                "100λ²λ“¤": { cash: 310000, voucher: 60000 }, "500λ²λ“¤": { cash: 390000, voucher: 60000 }, "κΈ°κ°€λ²λ“¤": { cash: 360000, voucher: 90000 }
            },
            "λ„·ν”λ¦­μ¤ UHD": { 
                "100λ‹¨λ…": { cash: 50000, voucher: 40000 }, "500λ‹¨λ…": { cash: 100000, voucher: 40000 }, "1Gλ‹¨λ…": { cash: 90000, voucher: 50000 },
                "100λ²λ“¤": { cash: 310000, voucher: 60000 }, "500λ²λ“¤": { cash: 390000, voucher: 60000 }, "κΈ°κ°€λ²λ“¤": { cash: 360000, voucher: 90000 }
            },
            "ν‚¤μ¦λλ“": { 
                "100λ‹¨λ…": { cash: 50000, voucher: 40000 }, "500λ‹¨λ…": { cash: 100000, voucher: 40000 }, "1Gλ‹¨λ…": { cash: 90000, voucher: 50000 },
                "100λ²λ“¤": { cash: 310000, voucher: 60000 }, "500λ²λ“¤": { cash: 390000, voucher: 60000 }, "κΈ°κ°€λ²λ“¤": { cash: 360000, voucher: 90000 }
            }
        };
        
        const kt_total_mobile_fee_discounts = {
            "100M": {
              "tier1_under_22000": { "internet_discount": 1650, "mobile_discount": 0, "total_discount": 1650 },
              "tier2_22000_to_64899": { "internet_discount": 3300, "mobile_discount": 0, "total_discount": 3300 },
              "tier3_64900_to_108899": { "internet_discount": 5500, "mobile_discount": 3300, "total_discount": 8800 },
              "tier4_108900_to_141899": { "internet_discount": 5500, "mobile_discount": 14300, "total_discount": 19800 },
              "tier5_141900_to_174899": { "internet_discount": 5500, "mobile_discount": 18700, "total_discount": 24200 },
              "tier6_over_174900": { "internet_discount": 5500, "mobile_discount": 23100, "total_discount": 28600 }
            },
            "500M_1G": { 
              "tier1_under_22000": { "internet_discount": 2200, "mobile_discount": 0, "total_discount": 2200 },
              "tier2_22000_to_64899": { "internet_discount": 5500, "mobile_discount": 5500, "total_discount": 11000 },
              "tier3_64900_to_108899": { "internet_discount": 5500, "mobile_discount": 5500, "total_discount": 11000 }, 
              "tier4_108900_to_141899": { "internet_discount": 5500, "mobile_discount": 16610, "total_discount": 22110 },
              "tier5_141900_to_174899": { "internet_discount": 5500, "mobile_discount": 22100, "total_discount": 27610 },
              "tier6_over_174900": { "internet_discount": 5500, "mobile_discount": 27610, "total_discount": 33110 }
            }
        };


        const internetPlanEl = document.getElementById('internetPlan');
        const wifiRouterRentalEl = document.getElementById('wifiRouterRental');
        const tvPlanEl = document.getElementById('tvPlan');
        const additionalTvPlanEl = document.getElementById('additionalTvPlan');
        const phonePlanEl = document.getElementById('phonePlan');
        const addonServicesContainerEl = document.getElementById('addonServicesContainer');
        const mobileLinesCountEl = document.getElementById('mobileLinesCount');
        const mobileLinesContainerEl = document.getElementById('mobileLinesContainer');
        const dongpanSalesCheckKtEl = document.getElementById('dongpanSalesCheckKt');
        const dongpanPolicyDetailsContainerKtEl = document.getElementById('dongpanPolicyDetailsContainerKt');
        const discountTypeRadios = document.querySelectorAll('input[name="discountType"]');
        const displayModeKtRadios = document.querySelectorAll('input[name="displayModeKt"]');
        
        const totalAmountDetailsToggleEl = document.getElementById('totalAmountDetailsToggle');
        const totalAmountDetailsContainerEl = document.getElementById('totalAmountDetailsContainer');
        const detailInternetDiscountEl = document.getElementById('detailInternetDiscount');
        const detailMobileDiscountEl = document.getElementById('detailMobileDiscount');
        const detailTotalDiscountEl = document.getElementById('detailTotalDiscount');

        const premiumFamilyDetailsToggleEl = document.getElementById('premiumFamilyDetailsToggle');
        const premiumFamilyDetailsContainerEl = document.getElementById('premiumFamilyDetailsContainer');
        const detailPfInternetDiscountEl = document.getElementById('detailPfInternetDiscount');
        const detailPfMobileDiscountsContainerEl = document.getElementById('detailPfMobileDiscountsContainer');


        const premiumSingleDetailsToggleEl = document.getElementById('premiumSingleDetailsToggle');
        const premiumSingleDetailsContainerEl = document.getElementById('premiumSingleDetailsContainer');
        const detailPsInternetDiscountEl = document.getElementById('detailPsInternetDiscount');
        const detailPsMobileDiscountTextEl = document.getElementById('detailPsMobileDiscountText');
        const detailPsMobileFinalAmountEl = document.getElementById('detailPsMobileFinalAmount');


        const familyBundleDetailsToggleEl = document.getElementById('familyBundleDetailsToggle');
        const familyBundleDetailsContainerEl = document.getElementById('familyBundleDetailsContainer');
        const detailFbInternetDiscountEl = document.getElementById('detailFbInternetDiscount');
        
        const separateFamilyDetailsToggleEl = document.getElementById('separateFamilyDetailsToggle');
        const separateFamilyDetailsContainerEl = document.getElementById('separateFamilyDetailsContainer');
        const detailSfInternetDiscountEl = document.getElementById('detailSfInternetDiscount');
        const detailSfTvDiscountEl = document.getElementById('detailSfTvDiscount');

        const mvnoDetailsToggleEl = document.getElementById('mvnoDetailsToggle'); 
        const mvnoDetailsContainerEl = document.getElementById('mvnoDetailsContainer'); 
        const detailMvnoInternetDiscountEl = document.getElementById('detailMvnoInternetDiscount'); 

        const calculateButton = document.getElementById('calculateButton');
        const resultSection = document.getElementById('resultSection');
        
        const selectedInternetEl = document.getElementById('selectedInternet');
        const selectedTvEl = document.getElementById('selectedTv');
        const selectedStbEl = document.getElementById('selectedStb'); 
        const selectedAdditionalTvEl = document.getElementById('selectedAdditionalTv');
        const selectedPhoneEl = document.getElementById('selectedPhone');
        const selectedMobileCountEl = document.getElementById('selectedMobileCount');
        const selectedDiscountTypeEl = document.getElementById('selectedDiscountType');
        
        const totalBaseInternetCostEl = document.getElementById('totalBaseInternetCost');
        const totalInternetDiscountAmountEl = document.getElementById('totalInternetDiscountAmount');
        const internetModemRentalEl = document.getElementById('internetModemRental');
        const wifiRouterRentalCostDisplayEl = document.getElementById('wifiRouterRentalCostDisplay');
        
        const tvCostSummaryContainerEl = document.getElementById('tvCostSummaryContainer');
        const tvBaseCostDisplayEl = document.getElementById('tvBaseCostDisplay');
        const tvDiscountDisplayEl = document.getElementById('tvDiscountDisplay');
        const stbRentalCostDisplayEl = document.getElementById('stbRentalCostDisplay');

        const additionalTvCostSummaryContainerEl = document.getElementById('additionalTvCostSummaryContainer');
        const additionalTvCostDisplayEl = document.getElementById('additionalTvCostDisplay');

        const phoneCostSummaryContainerEl = document.getElementById('phoneCostSummaryContainer');
        const phoneBaseCostDisplayEl = document.getElementById('phoneBaseCostDisplay');
        const phoneDiscountDisplayEl = document.getElementById('phoneDiscountDisplay');
        
        const addonServicesSummaryContainerEl = document.getElementById('addonServicesSummaryContainer');
        const addonServicesTotalCostDisplayEl = document.getElementById('addonServicesTotalCostDisplay');


        const finalMonthlyCostEl = document.getElementById('finalMonthlyCost');
        const finalCostLabelEl = document.getElementById('finalCostLabel');
        const installationCostResultEl = document.getElementById('installationCostResult');

        const giftCashEl = document.getElementById('giftCash');
        const giftVoucherEl = document.getElementById('giftVoucher');
        const giftPhoneVoucherEl = document.getElementById('giftPhoneVoucher');
        const giftAdditionalTvEl = document.getElementById('giftAdditionalTv');
        const dongpanCashContainerKtEl = document.getElementById('dongpanCashContainerKt');
        const giftDongpanAdditionalCashKtEl = document.getElementById('giftDongpanAdditionalCashKt');
        const giftTotalEl = document.getElementById('giftTotal');

        const messageScriptSectionEl = document.getElementById('messageScriptSection');
        const memoScriptEl = document.getElementById('memoScript');
        const infoScriptEl = document.getElementById('infoScript');
        const completeScriptEl = document.getElementById('completeScript');
        const dongpanMemoScriptEl = document.getElementById('dongpanMemoScript');
        const sensitiveInfoLinkScriptEl = document.getElementById('sensitiveInfoLinkScript');


        mobileLinesCountEl.addEventListener('input', updateMobileLinesInputs);
        calculateButton.addEventListener('click', calculateAndDisplayResults);
        if(dongpanSalesCheckKtEl) {
            dongpanSalesCheckKtEl.addEventListener('change', function() {
                if (dongpanPolicyDetailsContainerKtEl) {
                    dongpanPolicyDetailsContainerKtEl.classList.toggle('hidden', !this.checked);
                }
                 if (!resultSection.classList.contains('hidden')) { 
                    calculateAndDisplayResults(); 
                }
            });
        }
        
        const allDetailSections = [
            { radioValue: 'totalAmountBundle', toggleEl: totalAmountDetailsToggleEl, containerEl: totalAmountDetailsContainerEl, updateFn: updateTotalAmountDetails },
            { radioValue: 'premiumFamilyBundle', toggleEl: premiumFamilyDetailsToggleEl, containerEl: premiumFamilyDetailsContainerEl, updateFn: updatePremiumFamilyDetails },
            { radioValue: 'premiumSingleBundle', toggleEl: premiumSingleDetailsToggleEl, containerEl: premiumSingleDetailsContainerEl, updateFn: updatePremiumSingleDetails },
            { radioValue: 'familyBundle', toggleEl: familyBundleDetailsToggleEl, containerEl: familyBundleDetailsContainerEl, updateFn: updateFamilyBundleDetails },
            { radioValue: 'separateFamilyBundle', toggleEl: separateFamilyDetailsToggleEl, containerEl: separateFamilyDetailsContainerEl, updateFn: updateSeparateFamilyDetails },
            { radioValue: 'mvnoBundle', toggleEl: mvnoDetailsToggleEl, containerEl: mvnoDetailsContainerEl, updateFn: updateMvnoDetails } 
        ];

        discountTypeRadios.forEach(radio => {
            radio.addEventListener('change', function() {
                const newlySelectedRadioValue = this.value;
                allDetailSections.forEach(section => {
                    if (section.containerEl && section.toggleEl) { 
                        let isVisible = false;
                        if (newlySelectedRadioValue === section.radioValue) { 
                            isVisible = section.toggleEl.checked; 
                            if (isVisible && section.updateFn) {
                                section.updateFn();
                            }
                        } else { 
                            section.toggleEl.checked = false; 
                            isVisible = false; 
                        }
                        section.containerEl.classList.toggle('hidden', !isVisible);
                    }
                });
                
                // λ¨λ°”μΌ νμ„  μ μλ™ μ„¤μ •
                if (newlySelectedRadioValue === "none" || newlySelectedRadioValue === "familyBundle") {
                    mobileLinesCountEl.value = 0;
                    mobileLinesCountEl.disabled = true;
                } else { 
                    mobileLinesCountEl.value = 1;
                    mobileLinesCountEl.disabled = false;
                }
                updateMobileLinesInputs();
            });
        });
        
        allDetailSections.forEach(section => {
            if (section.toggleEl && section.containerEl && section.updateFn) { 
                section.toggleEl.addEventListener('change', function() {
                    const radioForThisToggle = document.querySelector(`input[name="discountType"][value="${section.radioValue}"]`);
                    if (radioForThisToggle && radioForThisToggle.checked) { 
                        section.containerEl.classList.toggle('hidden', !this.checked);
                        if (this.checked) {
                            section.updateFn();
                        }
                    } else {
                        section.containerEl.classList.add('hidden');
                        this.checked = false;
                    }
                });
            }
        });

        const internetTypeRadios = document.querySelectorAll('input[name="internetType"]');
        internetTypeRadios.forEach(radio => {
            radio.addEventListener('change', function() {
                populateInternetPlans();
                handleInternetTypeChange();
            });
        });
        
        function populateInternetPlans() {
            const selectedInternetType = document.querySelector('input[name="internetType"]:checked').value;
            internetPlanEl.innerHTML = '<option value="none">μ„ νƒ μ•ν•¨</option>'; 

            for (const planKey in internetPlans_KT) {
                const plan = internetPlans_KT[planKey];
                let displayText = "";
                let matchesType = false;

                if (selectedInternetType === "bundle") {
                    if (planKey.includes("λ²λ“¤")) { 
                        displayText = `μΈν„°λ„· ${plan.speed}M (TV κ²°ν•© μ‹) (μ›” ${plan.basePrice.toLocaleString()}μ›)`;
                        matchesType = true;
                    }
                } else { // standalone
                    if (planKey.includes("(λ‹¨λ…)")) {
                        displayText = `μΈν„°λ„·(λ‹¨λ…) ${plan.speed}M (μ›” ${plan.basePrice.toLocaleString()}μ›)`;
                        matchesType = true;
                    }
                }

                if (matchesType) {
                    const option = document.createElement('option');
                    option.value = planKey;
                    option.textContent = displayText;
                    option.dataset.price = plan.basePrice;
                    option.dataset.speed = plan.speed;
                    option.dataset.type = plan.type; 
                    internetPlanEl.appendChild(option);
                }
            }
            const internetChangeEvent = new Event('change');
            internetPlanEl.dispatchEvent(internetChangeEvent);
        }

        function handleInternetTypeChange() {
            const selectedInternetType = document.querySelector('input[name="internetType"]:checked').value;
            const isStandalone = selectedInternetType === 'standalone';

            tvPlanEl.disabled = isStandalone;
            additionalTvPlanEl.disabled = isStandalone;
            phonePlanEl.disabled = isStandalone; 
            
            if (isStandalone) {
                tvPlanEl.value = "none";
                additionalTvPlanEl.value = "none";
                phonePlanEl.value = "none"; 
            } else { 
                 if (tvPlanEl.value === "none") { 
                    tvPlanEl.value = "KTTVλ² μ΄μ§";
                 }
            }
            const tvChangeEvent = new Event('change');
            tvPlanEl.dispatchEvent(tvChangeEvent); 

            const internetChangeEvent = new Event('change');
            internetPlanEl.dispatchEvent(internetChangeEvent);
        }


        internetPlanEl.addEventListener('change', function() {
            const selectedOption = this.options[this.selectedIndex];
             if (!selectedOption || selectedOption.value === 'none') {
                wifiRouterRentalEl.disabled = false;
                 Array.from(wifiRouterRentalEl.options).forEach(opt => opt.hidden = false);
                return;
            }

            const isDanDok = selectedOption.text.includes("(λ‹¨λ…)");
            const internetSpeed = parseInt(selectedOption.dataset.speed);
            
            const freeWifiOption = Array.from(wifiRouterRentalEl.options).find(opt => opt.dataset.name === "KTκ³µμ κΈ° λ¬΄λ£ (μΈλ‹¨λ… 1GB)");
            const noWifiOption = Array.from(wifiRouterRentalEl.options).find(opt => opt.dataset.name === "KTκ³µμ κΈ° X");

            if (isDanDok && internetSpeed === 1000 && freeWifiOption) {
                wifiRouterRentalEl.value = freeWifiOption.value;
                wifiRouterRentalEl.disabled = true;
                Array.from(wifiRouterRentalEl.options).forEach(opt => {
                    opt.hidden = (opt.dataset.name !== "KTκ³µμ κΈ° λ¬΄λ£ (μΈλ‹¨λ… 1GB)");
                });
            } else {
                wifiRouterRentalEl.disabled = false;
                Array.from(wifiRouterRentalEl.options).forEach(opt => {
                    if (opt.dataset.name === "KTκ³µμ κΈ° λ¬΄λ£ (μΈλ‹¨λ… 1GB)") {
                        opt.hidden = true;
                    } else {
                        opt.hidden = false;
                    }
                });
                 if (wifiRouterRentalEl.options[wifiRouterRentalEl.selectedIndex]?.dataset.name === "KTκ³µμ κΈ° λ¬΄λ£ (μΈλ‹¨λ… 1GB)") {
                     if(noWifiOption) wifiRouterRentalEl.value = noWifiOption.value;
                }
            }
        });


        tvPlanEl.addEventListener('change', () => { 
            const isTvSelected = tvPlanEl.value !== 'none';
            // No tvStbHiddenInfo to manage
        });

        additionalTvPlanEl.addEventListener('change', () => {
            if (tvPlanEl.value === 'none' && additionalTvPlanEl.value !== 'none') {
                alert('μ²« λ²μ§Έ TVλ¥Ό λ¨Όμ € μ„ νƒν•΄μ£Όμ„Έμ”.');
                additionalTvPlanEl.value = 'none';
            }
        });


        function updateMobileLinesInputs() {
            const count = parseInt(mobileLinesCountEl.value) || 0;
            mobileLinesContainerEl.innerHTML = '';
            for (let i = 0; i < count; i++) {
                const div = document.createElement('div');
                div.className = 'mobile-line-item grid grid-cols-1 md:grid-cols-2 gap-4 items-center';
                div.innerHTML = `
                    <div>
                        <label for="mobileCost${i}" class="block text-sm font-medium text-slate-600">νμ„  ${i + 1} μ›”μ •μ•΅ (VATν¬ν•¨, ν• μΈ μ „)</label>
                        <input type="number" id="mobileCost${i}" class="input-field mt-1" placeholder="μ: 80000" value="0">
                    </div>
                    <div>
                        <label class="flex items-center mt-1 md:mt-5">
                            <input type="checkbox" id="mobileHighTier${i}" class="radio-input h-4 w-4">
                            <span class="ml-2 text-sm text-slate-600">μ›” 7.7λ§μ› μ΄μƒ 5G/LTE (ν”„λ¦¬λ―Έμ—„ κ°€μ΅±/μ‹±κΈ€κ²°ν•©μ©)</span>
                        </label>
                    </div>
                `;
                mobileLinesContainerEl.appendChild(div);
            }
        }
        
        function getSelectedInternetInfo(planName) {
            if (!planName || planName === 'none' || !internetPlans_KT[planName]) {
                 return { basePrice: 0, modemFee: 0, type: "none", speed: 0 };
            }
            
            let basePrice = internetPlans_KT[planName].basePrice; 
            const selectedOption = internetPlanEl.options[internetPlanEl.selectedIndex];
            if (selectedOption && selectedOption.value !== 'none' && selectedOption.text.includes("KTμΈν„°λ„·λ²λ“¤")) {
                 basePrice = internetPlans_KT[planName].basePrice;
            }
            
            return { ...internetPlans_KT[planName], basePrice: basePrice };
        }
        
        function getMobileTierKey(totalMobileBaseCost, numMobileLines, internetSpeedType) {
            if (numMobileLines === 0 || totalMobileBaseCost === 0) return null;
            if (internetSpeedType === "100M") {
                if (totalMobileBaseCost < 22000) return "λ¨λ°”μΌ_22000λ―Έλ§";
                if (totalMobileBaseCost < 64900) return "λ¨λ°”μΌ_64900λ―Έλ§"; 
                return "λ¨λ°”μΌ_64900μ΄μƒ"; 
            } else { 
                if (totalMobileBaseCost < 22000) return "λ¨λ°”μΌ_22000λ―Έλ§";
                return "λ¨λ°”μΌ_22000μ΄μƒ";
            }
        }
        
        function getMobileTierKeyFor500MUp(totalMobileBaseCost, numMobileLines){
            if (numMobileLines === 0 || totalMobileBaseCost === 0) return null;
            if (totalMobileBaseCost < 22000) return "λ¨λ°”μΌ_22000λ―Έλ§";
            return "λ¨λ°”μΌ_22000μ΄μƒ";
        }
        
        function getMobileTierKeyForSeparateFamily(totalMobileBaseCost, numMobileLines){
            if (numMobileLines === 0 || totalMobileBaseCost === 0) return null;
            if (totalMobileBaseCost < 22000) return "λ¨λ°”μΌ_22000λ―Έλ§";
            return "λ¨λ°”μΌ_22000μ΄μƒ";
        }

        function updateTotalAmountDetails() {
            const internetPlanName = internetPlanEl.value;
            const numMobileLines = parseInt(mobileLinesCountEl.value) || 0;
            let totalMobileBaseCost = 0;
            for (let i = 0; i < numMobileLines; i++) {
                const costInput = document.getElementById(`mobileCost${i}`);
                if (costInput) totalMobileBaseCost += parseInt(costInput.value) || 0;
            }
            
            let detailInternetD = 0;
            let detailMobileD = 0; 
            let detailTotalD = 0;

            if (internetPlanName !== 'none' && numMobileLines > 0 && totalMobileBaseCost > 0) {
                const currentInternet = getSelectedInternetInfo(internetPlanName);
                const internetSpeedType = currentInternet.speed === 100 ? "100M" : (currentInternet.speed === 500 ? "500M" : "1G");
                const isBundled = tvPlanEl.value !== 'none' || phonePlanEl.value !== 'none';
                const bundleTypeKey = isBundled ? "TV" : "λ‹¨λ…"; 
                
                let mobileTierKey;
                if (internetSpeedType === "100M") {
                    mobileTierKey = getMobileTierKey(totalMobileBaseCost, numMobileLines, internetSpeedType);
                } else {
                    mobileTierKey = getMobileTierKeyFor500MUp(totalMobileBaseCost, numMobileLines);
                }

                if (mobileTierKey && newKtDiscountRules.μ΄μ•΅κ²°ν•©ν• μΈ?.[internetSpeedType]?.[bundleTypeKey]?.[mobileTierKey]) {
                    detailInternetD = newKtDiscountRules.μ΄μ•΅κ²°ν•©ν• μΈ[internetSpeedType][bundleTypeKey][mobileTierKey];
                } else if (internetSpeedType === "1G" && bundleTypeKey === "TV" && newKtDiscountRules.μ΄μ•΅κ²°ν•©ν• μΈ?.["1G"]?.TV?.["λ¨λ°”μΌ_κ²°ν•©μ‹"]) { 
                    detailInternetD = newKtDiscountRules.μ΄μ•΅κ²°ν•©ν• μΈ["1G"]["TV"]["λ¨λ°”μΌ_κ²°ν•©μ‹"];
                }
                
                let mobileTierKeyForJson = null;
                if (totalMobileBaseCost < 22000) { mobileTierKeyForJson = "tier1_under_22000"; }
                else if (totalMobileBaseCost < 64900) { mobileTierKeyForJson = "tier2_22000_to_64899"; }
                else if (totalMobileBaseCost < 108900) { mobileTierKeyForJson = "tier3_64900_to_108899"; }
                else if (totalMobileBaseCost < 141900) { mobileTierKeyForJson = "tier4_108900_to_141899"; }
                else if (totalMobileBaseCost < 174900) { mobileTierKeyForJson = "tier5_141900_to_174899"; }
                else { mobileTierKeyForJson = "tier6_over_174900"; }

                const internetSpeedKeyForJson = (currentInternet.speed >= 500) ? "500M_1G" : "100M";

                if (mobileTierKeyForJson && kt_total_mobile_fee_discounts?.[internetSpeedKeyForJson]?.[mobileTierKeyForJson]) {
                    detailMobileD = kt_total_mobile_fee_discounts[internetSpeedKeyForJson][mobileTierKeyForJson].mobile_discount || 0;
                }
                
                detailTotalD = detailInternetD + detailMobileD; 
            }
            if(detailInternetDiscountEl) detailInternetDiscountEl.textContent = detailInternetD.toLocaleString();
            if(detailMobileDiscountEl) detailMobileDiscountEl.textContent = detailMobileD.toLocaleString();
            if(detailTotalDiscountEl) detailTotalDiscountEl.textContent = detailTotalD.toLocaleString();
        }
        
        function updatePremiumFamilyDetails() {
            let internetDiscount = 0;
            const currentInternet = getSelectedInternetInfo(internetPlanEl.value);
            const numMobileLines = parseInt(mobileLinesCountEl.value) || 0;
            let mobileDiscountDetailsHtml = '<p>λ¨λ°”μΌ ν• μΈ (μ°Έκ³ μ©):</p>';
            let totalCalculatedMobileDiscount = 0;
            
            let mobileLinesDataForDetails = [];
            for (let i = 0; i < numMobileLines; i++) {
                const costInput = document.getElementById(`mobileCost${i}`);
                const highTierInput = document.getElementById(`mobileHighTier${i}`);
                mobileLinesDataForDetails.push({
                    cost: costInput ? (parseFloat(costInput.value) || 0) : 0,
                    isHighTier: highTierInput ? highTierInput.checked : false
                });
            }

            const firstMobileCost = numMobileLines > 0 ? mobileLinesDataForDetails[0].cost : 0;
            const firstMobileIsHighTierEligible = firstMobileCost >= 77000;

            if (firstMobileIsHighTierEligible && currentInternet.speed >= 500) {
                const isBundled = tvPlanEl.value !== 'none' || phonePlanEl.value !== 'none';
                const speedKeyPart = currentInternet.speed >= 1000 ? "1G" : "500M";
                const bundleKey = isBundled ? "_TV" : "_λ‹¨λ…";
                const fullKey = speedKeyPart + bundleKey;
                internetDiscount = newKtDiscountRules.ν”„λ¦¬λ―Έμ—„κ°€μ΅±κ²°ν•©?.[fullKey] || 0;
            }
            
            if (numMobileLines > 0) {
                // Line 1 (Base)
                if (firstMobileIsHighTierEligible) {
                    const baseLineDiscountFixed = 5500;
                    const baseLineSelectiveDiscount = firstMobileCost * 0.25;
                    const baseLineTotalDiscount = baseLineDiscountFixed + baseLineSelectiveDiscount;
                    totalCalculatedMobileDiscount += baseLineTotalDiscount;
                    mobileDiscountDetailsHtml += `<p class="text-xs">νμ„  1 (${firstMobileCost.toLocaleString()}μ›): ${baseLineTotalDiscount.toLocaleString()}μ› ν• μΈ (κΈ°λ³Έ ${baseLineDiscountFixed.toLocaleString()} + μ„ νƒμ•½μ • ${baseLineSelectiveDiscount.toLocaleString()}μ›)</p>`;
                } else {
                    mobileDiscountDetailsHtml += `<p class="text-xs">νμ„  1 (${firstMobileCost.toLocaleString()}μ›): μ΅°κ±΄ λ―Έμ¶©μ΅± (μ›” 7.7λ§μ› λ―Έλ§)</p>`;
                }

                // Line 2
                let secondMobileIsHighTierEligible = false;
                if (numMobileLines >= 2) {
                    const secondMobileCost = mobileLinesDataForDetails[1].cost;
                    const secondMobileIsHighTierChecked = mobileLinesDataForDetails[1].isHighTier;
                    if (secondMobileCost >= 77000 && secondMobileIsHighTierChecked) {
                        secondMobileIsHighTierEligible = true;
                        const premiumMobileDiscount = secondMobileCost * 0.25;
                        const selectiveContractMobileDiscount = secondMobileCost * 0.25;
                        const line2TotalDiscount = premiumMobileDiscount + selectiveContractMobileDiscount;
                        totalCalculatedMobileDiscount += line2TotalDiscount;
                        mobileDiscountDetailsHtml += `<p class="text-xs">νμ„  2 (${secondMobileCost.toLocaleString()}μ›): ${line2TotalDiscount.toLocaleString()}μ› ν• μΈ (ν”„λ¦¬λ―Έμ—„ ${premiumMobileDiscount.toLocaleString()} + μ„ νƒμ•½μ • ${selectiveContractMobileDiscount.toLocaleString()}μ›)</p>`;
                    } else {
                        mobileDiscountDetailsHtml += `<p class="text-xs">νμ„  2 (${secondMobileCost.toLocaleString()}μ›): μ΅°κ±΄ λ―Έμ¶©μ΅± (μ›” 7.7λ§μ› λ―Έλ§ λλ” κ³ κ°€μ”κΈμ  λ―Έμ²΄ν¬)</p>`;
                    }
                }

                // Lines 3 to 7
                let sumOfLowerTierLinesAfterLine2 = 0;
                let lowerTierLinesDetails = [];
                if (firstMobileIsHighTierEligible && secondMobileIsHighTierEligible) { // Only apply further discounts if first two lines meet criteria
                    for (let i = 2; i < numMobileLines; i++) {
                        const lineCost = mobileLinesDataForDetails[i].cost;
                        const isHighTierChecked = mobileLinesDataForDetails[i].isHighTier;
                        if (lineCost >= 77000 && isHighTierChecked) { // High-tier line 3+
                            const premiumMobileDiscount = lineCost * 0.25;
                            const selectiveContractMobileDiscount = lineCost * 0.25;
                            const lineTotalDiscount = premiumMobileDiscount + selectiveContractMobileDiscount;
                            totalCalculatedMobileDiscount += lineTotalDiscount;
                            mobileDiscountDetailsHtml += `<p class="text-xs">νμ„  ${i + 1} (${lineCost.toLocaleString()}μ›): ${lineTotalDiscount.toLocaleString()}μ› ν• μΈ (ν”„λ¦¬λ―Έμ—„ ${premiumMobileDiscount.toLocaleString()} + μ„ νƒμ•½μ • ${selectiveContractMobileDiscount.toLocaleString()}μ›)</p>`;
                        } else { // Lower-tier line 3+
                            sumOfLowerTierLinesAfterLine2 += lineCost;
                            lowerTierLinesDetails.push(`νμ„  ${i + 1} (${lineCost.toLocaleString()}μ›)`);
                        }
                    }

                    if (sumOfLowerTierLinesAfterLine2 > 0 && lowerTierLinesDetails.length > 0) {
                        let jsonMobileDiscount = 0;
                        let mobileTierKeyForJson = null;
                        if (sumOfLowerTierLinesAfterLine2 < 22000) { mobileTierKeyForJson = "tier1_under_22000"; }
                        else if (sumOfLowerTierLinesAfterLine2 < 64900) { mobileTierKeyForJson = "tier2_22000_to_64899"; }
                        else if (sumOfLowerTierLinesAfterLine2 < 108900) { mobileTierKeyForJson = "tier3_64900_to_108899"; }
                        else if (sumOfLowerTierLinesAfterLine2 < 141900) { mobileTierKeyForJson = "tier4_108900_to_141899"; }
                        else if (sumOfLowerTierLinesAfterLine2 < 174900) { mobileTierKeyForJson = "tier5_141900_to_174899"; }
                        else { mobileTierKeyForJson = "tier6_over_174900"; }
                        
                        const internetSpeedKeyForJson = (currentInternet.speed >= 500) ? "500M_1G" : "100M"; // Assuming 500M/1G for this json lookup

                        if (mobileTierKeyForJson && kt_total_mobile_fee_discounts?.[internetSpeedKeyForJson]?.[mobileTierKeyForJson]) {
                            jsonMobileDiscount = kt_total_mobile_fee_discounts[internetSpeedKeyForJson][mobileTierKeyForJson].mobile_discount || 0;
                        }
                        totalCalculatedMobileDiscount += jsonMobileDiscount;
                        mobileDiscountDetailsHtml += `<p class="text-xs">${lowerTierLinesDetails.join(', ')} ν•©μ‚° (${sumOfLowerTierLinesAfterLine2.toLocaleString()}μ›): μ΄μ•΅κ²°ν•© κΈ°μ¤€ ${jsonMobileDiscount.toLocaleString()}μ› μ¶”κ°€ ν• μΈ</p>`;
                    }
                } else if (numMobileLines > 2) {
                     mobileDiscountDetailsHtml += `<p class="text-xs">νμ„  3λ¶€ν„°μ μ¶”κ°€ ν• μΈμ€ νμ„  1, 2κ°€ λ¨λ‘ κ³ κ°€μ”κΈμ  μ΅°κ±΄μ„ μ¶©μ΅±ν•΄μ•Ό μ μ©λ©λ‹λ‹¤.</p>`;
                }
            } else {
                 mobileDiscountDetailsHtml += '<p class="text-xs">λ¨λ°”μΌ νμ„  μ •λ³΄ μ—†μ</p>';
            }
            mobileDiscountDetailsHtml += `<p class="font-semibold mt-1">μ΄ λ¨λ°”μΌ ν• μΈμ•΅ (μ°Έκ³ μ©): ${totalCalculatedMobileDiscount.toLocaleString()}μ›</p>`;

            if(detailPfInternetDiscountEl) detailPfInternetDiscountEl.textContent = internetDiscount.toLocaleString();
            if(detailPfMobileDiscountsContainerEl) detailPfMobileDiscountsContainerEl.innerHTML = mobileDiscountDetailsHtml;
        }

        function updatePremiumSingleDetails() {
            let internetDiscount = 0;
            let mobileDiscountText = "μ΅°κ±΄ λ―Έμ¶©μ΅±"; 
            let mobileFinalAmount = 0;

            const currentInternet = getSelectedInternetInfo(internetPlanEl.value);
            const numMobileLines = parseInt(mobileLinesCountEl.value) || 0;
            const isTvSelected = tvPlanEl.value !== 'none';
            const isPhoneSelected = phonePlanEl.value !== 'none';
            const isAdditionalTvSelected = additionalTvPlanEl.value !== 'none';
            const isInternetOnlyBundle = !isTvSelected && !isPhoneSelected && !isAdditionalTvSelected; 

            if (currentInternet.speed >= 500 && numMobileLines === 1) {
                const mobileCost0Input = document.getElementById('mobileCost0');
                const mobileCost = mobileCost0Input ? (parseFloat(mobileCost0Input.value) || 0) : 0;
                
                if (mobileCost >= 77000) { 
                    if (isInternetOnlyBundle) { 
                        const speedKey = currentInternet.speed === 500 ? "500M_λ‹¨λ…" : "1G_λ‹¨λ…";
                        internetDiscount = newKtDiscountRules.ν”„λ¦¬λ―Έμ—„μ‹±κΈ€κ²°ν•©?.[speedKey] || 0;
                    } else { 
                        internetDiscount = 0; 
                    }
                    const premiumSingleMobileDiscount = mobileCost * 0.25;
                    const selectiveContractMobileDiscount = mobileCost * 0.25; 
                    const totalMobileDiscountValue = premiumSingleMobileDiscount + selectiveContractMobileDiscount;
                    mobileDiscountText = `ν”„λ¦¬λ―Έμ—„ μ‹±κΈ€κ²°ν•© 25% (${premiumSingleMobileDiscount.toLocaleString()}μ›) / μ„ νƒμ•½μ • 25% (${selectiveContractMobileDiscount.toLocaleString()}μ›) = μ΄ λ¨λ°”μΌ ν• μΈμ•΅: ${totalMobileDiscountValue.toLocaleString()}μ›`;
                    mobileFinalAmount = mobileCost - totalMobileDiscountValue;
                }
            }
            if(detailPsInternetDiscountEl) detailPsInternetDiscountEl.textContent = internetDiscount.toLocaleString();
            if(detailPsMobileDiscountTextEl) detailPsMobileDiscountTextEl.textContent = mobileDiscountText;
            if(detailPsMobileFinalAmountEl) detailPsMobileFinalAmountEl.textContent = mobileFinalAmount.toLocaleString() + "μ›";
        }

        function updateFamilyBundleDetails() { 
            const internetPlanName = internetPlanEl.value;
            let internetDiscount = 0;
            if (internetPlanName !== 'none') {
                const currentInternet = getSelectedInternetInfo(internetPlanName);
                const isBundled = tvPlanEl.value !== 'none' || phonePlanEl.value !== 'none';
                let speedKey = "";
                if (currentInternet.speed === 100) speedKey = "100M";
                else if (currentInternet.speed === 500) speedKey = "500M";
                else if (currentInternet.speed >= 1000) speedKey = "1G";
                
                const bundleKey = isBundled ? "_TV" : "_λ‹¨λ…";
                if (newKtDiscountRules.ν¨λ°€λ¦¬κ²°ν•©?.[speedKey + bundleKey]) {
                    internetDiscount = newKtDiscountRules.ν¨λ°€λ¦¬κ²°ν•©[speedKey + bundleKey];
                }
            }
            if(detailFbInternetDiscountEl) detailFbInternetDiscountEl.textContent = internetDiscount.toLocaleString();
        }
        
        function updateSeparateFamilyDetails() {
            const internetPlanName = internetPlanEl.value;
            let internetDiscount = 0;
            let tvDiscountRef = 0; 
            const currentInternet = getSelectedInternetInfo(internetPlanName);
            const numMobileLines = parseInt(mobileLinesCountEl.value) || 0;
            let totalMobileBaseCost = 0;
            const mobileCost0Input = document.getElementById('mobileCost0');
            if (numMobileLines > 0 && mobileCost0Input) totalMobileBaseCost = parseInt(mobileCost0Input.value) || 0; 

            let mobileTierKey = getMobileTierKeyForSeparateFamily(totalMobileBaseCost, numMobileLines);

            let speedKeyForλ”°μ‚΄ = "";
            if (currentInternet.speed === 500) speedKeyForλ”°μ‚΄ = "500M_TV"; 
            else if (currentInternet.speed >= 1000) speedKeyForλ”°μ‚΄ = "1G_TV";
            
            if (speedKeyForλ”°μ‚΄ && mobileTierKey && newKtDiscountRules["λ”°λ΅μ‚΄μ•„λ„ κ°€μ΅±κ²°ν•©"]?.[speedKeyForλ”°μ‚΄]?.[mobileTierKey]) {
                 internetDiscount = newKtDiscountRules["λ”°λ΅μ‚΄μ•„λ„ κ°€μ΅±κ²°ν•©"][speedKeyForλ”°μ‚΄][mobileTierKey];
                 tvDiscountRef = newKtDiscountRules["λ”°λ΅μ‚΄μ•„λ„ κ°€μ΅±κ²°ν•©"][speedKeyForλ”°μ‚΄].tvDiscount || 0;
            }
            
            if(detailSfInternetDiscountEl) detailSfInternetDiscountEl.textContent = internetDiscount.toLocaleString();
            if(detailSfTvDiscountEl) detailSfTvDiscountEl.textContent = tvDiscountRef.toLocaleString();
        }

        function updateMvnoDetails() {
            const internetPlanName = internetPlanEl.value;
            let internetDiscount = 0;
            if (internetPlanName !== 'none') {
                const currentInternet = getSelectedInternetInfo(internetPlanName);
                const isBundled = tvPlanEl.value !== 'none' || phonePlanEl.value !== 'none';
                let speedKey = "";
                if (currentInternet.speed === 100) speedKey = "100M";
                else if (currentInternet.speed === 500) speedKey = "500M";
                else if (currentInternet.speed >= 1000) speedKey = "1G";

                if (speedKey) {
                    const bundleKey = isBundled ? "_TV" : "_λ‹¨λ…";
                    const fullKey = speedKey + bundleKey;
                    internetDiscount = newKtDiscountRules.μ•λ°ν°κ²°ν•©?.[fullKey] || 0;
                }
            }
            if(detailMvnoInternetDiscountEl) detailMvnoInternetDiscountEl.textContent = internetDiscount.toLocaleString();
        }


        function calculateAndDisplayResults() {
            try {
                const internetType = document.querySelector('input[name="internetType"]:checked').value;
                const internetPlanName = internetPlanEl.value;
                const selectedWifiOption = wifiRouterRentalEl.options[wifiRouterRentalEl.selectedIndex];
                const selectedWifiOptionName = selectedWifiOption ? selectedWifiOption.dataset.name : "KTκ³µμ κΈ° X";

                const tvPlanName = tvPlanEl.value;
                const additionalTvPlanKey = additionalTvPlanEl.value;
                const phonePlanName = phonePlanEl.value;
                const numMobileLines = parseInt(mobileLinesCountEl.value) || 0;
                const isDongpanChecked = dongpanSalesCheckKtEl ? dongpanSalesCheckKtEl.checked : false;
                const discountType = document.querySelector('input[name="discountType"]:checked').value;
                const displayMode = document.querySelector('input[name="displayModeKt"]:checked').value;
                const installationTime = document.querySelector('input[name="installationTime"]:checked').value;
                const selectedAddonCheckboxes = document.querySelectorAll('#addonServicesContainer input[type="checkbox"]:checked');


                let mobileLinesData = [];
                let totalMobileBaseCost = 0;
                let highTierMobileLinesCount = 0;
                
                for (let i = 0; i < numMobileLines; i++) {
                    const costInput = document.getElementById(`mobileCost${i}`);
                    const highTierInput = document.getElementById(`mobileHighTier${i}`);
                    const cost = costInput ? (parseInt(costInput.value) || 0) : 0;
                    const isHighTier = highTierInput ? highTierInput.checked : false;
                    mobileLinesData.push({ cost: cost, isHighTier: isHighTier });
                    totalMobileBaseCost += cost;
                    if (isHighTier) {
                        highTierMobileLinesCount++;
                    }
                }

                let currentInternet = getSelectedInternetInfo(internetPlanName);
                let internetBase = internetPlanName !== 'none' ? (parseFloat(currentInternet.basePrice) || 0) : 0;
                let modemRental = 0; 
                let internetDiscount = 0;
                let actualWifiRouterFee = 0;
                
                let tvBase = 0;
                let currentTvDiscount = 0; 
                let stbRental = 0; 
                let phoneBase = 0;
                let phoneDiscount = 0; 
                let additionalTvCost = 0;
                let addonServicesTotalCost = 0;

                if (internetPlanName !== 'none') {
                     if (currentInternet.speed >= 1000 && internetType === 'standalone' && selectedWifiOptionName === "KTκ³µμ κΈ° λ¬΄λ£ (μΈλ‹¨λ… 1GB)") {
                         actualWifiRouterFee = 0; 
                    } else if (wifiOptions_KT[selectedWifiOptionName]) {
                        actualWifiRouterFee = parseFloat(wifiOptions_KT[selectedWifiOptionName].fee) || 0;
                    }
                }
                
                selectedAddonCheckboxes.forEach(checkbox => {
                    addonServicesTotalCost += (parseFloat(checkbox.dataset.price) || 0);
                });
                
                let specificBundleInternetDiscountVal = 0;
                const isTvOrPhoneBundled = tvPlanName !== 'none' || phonePlanEl.value !== 'none';

                if (discountType === 'none' || internetPlanName === 'none') { 
                    internetDiscount = 0; 
                    currentTvDiscount = 0; 
                } else {
                     if (discountType === 'totalAmountBundle') {
                        const internetSpeedType = currentInternet.speed === 100 ? "100M" : (currentInternet.speed === 500 ? "500M" : "1G");
                        const bundleTypeForDiscountRule = isTvOrPhoneBundled ? "TV" : "λ‹¨λ…"; 
                        let mobileTierKey = "";

                        if (numMobileLines > 0 && totalMobileBaseCost > 0) {
                             if (internetSpeedType === "100M") {
                               mobileTierKey = getMobileTierKey(totalMobileBaseCost, numMobileLines, internetSpeedType);
                            } else {
                               mobileTierKey = getMobileTierKeyFor500MUp(totalMobileBaseCost, numMobileLines);
                            }
                        }
                        
                        if (mobileTierKey && newKtDiscountRules.μ΄μ•΅κ²°ν•©ν• μΈ?.[internetSpeedType]?.[bundleTypeForDiscountRule]?.[mobileTierKey]) {
                             specificBundleInternetDiscountVal = parseFloat(newKtDiscountRules.μ΄μ•΅κ²°ν•©ν• μΈ[internetSpeedType][bundleTypeForDiscountRule][mobileTierKey]) || 0;
                        } else if (internetSpeedType === "1G" && bundleTypeForDiscountRule === "TV" && newKtDiscountRules.μ΄μ•΅κ²°ν•©ν• μΈ?.["1G"]?.TV?.["λ¨λ°”μΌ_κ²°ν•©μ‹"] && numMobileLines > 0) { 
                            specificBundleInternetDiscountVal = parseFloat(newKtDiscountRules.μ΄μ•΅κ²°ν•©ν• μΈ["1G"]["TV"]["λ¨λ°”μΌ_κ²°ν•©μ‹"]) || 0;
                        }

                    } else if (discountType === 'premiumFamilyBundle') {
                         if (numMobileLines > 0 && mobileLinesData.length > 0 && (mobileLinesData[0].cost >= 77000) && currentInternet.speed >= 500) {
                            const bundleTypeForDiscountRule = isTvOrPhoneBundled ? "_TV" : "_λ‹¨λ…";
                            const speedKeyPart = currentInternet.speed >= 1000 ? "1G" : "500M";
                            const fullKey = speedKeyPart + bundleTypeForDiscountRule;
                            specificBundleInternetDiscountVal = parseFloat(newKtDiscountRules.ν”„λ¦¬λ―Έμ—„κ°€μ΅±κ²°ν•©?.[fullKey]) || 0;
                        }
                    } else if (discountType === 'premiumSingleBundle') {
                         const isInternetOnlyBundleForPS = !isTvOrPhoneBundled && additionalTvPlanKey === 'none';
                        if (currentInternet.speed >= 500 && numMobileLines === 1 && 
                            mobileLinesData.length > 0 && 
                            mobileLinesData[0].cost >= 77000) { 
                            if (isInternetOnlyBundleForPS) { 
                                const speedKey = currentInternet.speed === 500 ? "500M_λ‹¨λ…" : "1G_λ‹¨λ…";
                               specificBundleInternetDiscountVal = parseFloat(newKtDiscountRules.ν”„λ¦¬λ―Έμ—„μ‹±κΈ€κ²°ν•©?.[speedKey]) || 0;
                            }
                        }
                    } else if (discountType === 'mvnoBundle') {
                        let speedKey = "";
                        if (currentInternet.speed === 100) speedKey = "100M";
                        else if (currentInternet.speed === 500) speedKey = "500M";
                        else if (currentInternet.speed >= 1000) speedKey = "1G";

                        if (speedKey) {
                            const bundleTypeForDiscountRule = isTvOrPhoneBundled ? "_TV" : "_λ‹¨λ…";
                            const fullKey = speedKey + bundleTypeForDiscountRule;
                            specificBundleInternetDiscountVal = parseFloat(newKtDiscountRules.μ•λ°ν°κ²°ν•©?.[fullKey]) || 0;
                        }
                    } else if (discountType === 'familyBundle') { 
                        let speedKey = "";
                        if (currentInternet.speed === 100) speedKey = "100M";
                        else if (currentInternet.speed === 500) speedKey = "500M";
                        else if (currentInternet.speed >= 1000) speedKey = "1G";
                        const bundleTypeForDiscountRule = isTvOrPhoneBundled ? "_TV" : "_λ‹¨λ…";
                        
                        if (newKtDiscountRules.ν¨λ°€λ¦¬κ²°ν•©?.[speedKey + bundleTypeForDiscountRule]) {
                             specificBundleInternetDiscountVal = parseFloat(newKtDiscountRules.ν¨λ°€λ¦¬κ²°ν•©[speedKey + bundleTypeForDiscountRule]) || 0;
                        }
                    } else if (discountType === 'separateFamilyBundle') { 
                        if (isTvOrPhoneBundled) { 
                            let speedKeyForλ”°μ‚΄ = "";
                            if (currentInternet.speed === 500) speedKeyForλ”°μ‚΄ = "500M_TV";
                            else if (currentInternet.speed >= 1000) speedKeyForλ”°μ‚΄ = "1G_TV";
                            
                            let mobileTierKeyForλ”°μ‚΄ = getMobileTierKeyForSeparateFamily(totalMobileBaseCost, numMobileLines);

                            if (speedKeyForλ”°μ‚΄ && mobileTierKeyForλ”°μ‚΄ && newKtDiscountRules["λ”°λ΅μ‚΄μ•„λ„ κ°€μ΅±κ²°ν•©"]?.[speedKeyForλ”°μ‚΄]?.[mobileTierKeyForλ”°μ‚΄]) {
                                 specificBundleInternetDiscountVal = parseFloat(newKtDiscountRules["λ”°λ΅μ‚΄μ•„λ„ κ°€μ΅±κ²°ν•©"][speedKeyForλ”°μ‚΄][mobileTierKeyForλ”°μ‚΄]) || 0;
                                 currentTvDiscount = parseFloat(newKtDiscountRules["λ”°λ΅μ‚΄μ•„λ„ κ°€μ΅±κ²°ν•©"][speedKeyForλ”°μ‚΄].tvDiscount) || 0;
                            }
                        }
                    }
                     internetDiscount = parseFloat(specificBundleInternetDiscountVal) || 0; 
                }
                
                allDetailSections.forEach(section => {
                    const radio = document.querySelector(`input[name="discountType"][value="${section.radioValue}"]`);
                    if (radio && radio.checked && section.toggleEl && section.toggleEl.checked && section.updateFn) {
                        section.updateFn();
                    }
                });
                
                internetDiscount = Math.min(internetDiscount, internetBase); 
                const finalInternetComponentCost_NoDiscount = internetBase + modemRental + actualWifiRouterFee;
                const finalInternetComponentCost_WithDiscount = internetBase - internetDiscount + modemRental + actualWifiRouterFee;

                let finalTvComponentCost_NoDiscount = 0;
                let finalTvComponentCost_WithDiscount = 0;
                if (tvPlanName !== 'none') {
                    const currentTvPlan = tvPlans_KT[tvPlanName] || { basePrice: 0 };
                    stbRental = 0; 
                    tvBase = parseFloat(currentTvPlan.basePrice) || 0; 
                    currentTvDiscount = Math.min(parseFloat(currentTvDiscount) || 0, tvBase); 
                    finalTvComponentCost_NoDiscount = tvBase + stbRental;
                    finalTvComponentCost_WithDiscount = tvBase - currentTvDiscount + stbRental;
                }
                
                let additionalTvComponentCost_NoDiscount = 0;
                let additionalTvComponentCost_WithDiscount = 0; 
                if (additionalTvPlanKey !== 'none' && additionalTvPlans_KT[additionalTvPlanKey]) {
                     additionalTvCost = parseFloat(additionalTvPlans_KT[additionalTvPlanKey].basePrice) || 0;
                     additionalTvComponentCost_NoDiscount = additionalTvCost;
                     additionalTvComponentCost_WithDiscount = additionalTvCost;
                }

                let finalPhoneComponentCost_NoDiscount = 0;
                let finalPhoneComponentCost_WithDiscount = 0;
                if (phonePlanName !== 'none') {
                    const currentPhonePlan = phonePlans_KT[phonePlanName] || { basePrice: 0 };
                    phoneBase = parseFloat(currentPhonePlan.basePrice) || 0;
                    finalPhoneComponentCost_NoDiscount = phoneBase; 
                    finalPhoneComponentCost_WithDiscount = phoneBase - (parseFloat(phoneDiscount) || 0); 
                }
                
                let finalAddonServicesCost = addonServicesTotalCost;

                let finalMonthlyDisplayCost;
                let finalCostLabelText;
                
                if (displayMode === 'preApplied') {
                    finalMonthlyDisplayCost = finalInternetComponentCost_WithDiscount + finalTvComponentCost_WithDiscount + additionalTvComponentCost_WithDiscount + finalPhoneComponentCost_WithDiscount + finalAddonServicesCost;
                    finalCostLabelText = "μµμΆ… μμƒ μ›” λ‚©λ¶€μ•΅ (ν• μΈ μ μ©)";
                } else { // postApplied
                    finalMonthlyDisplayCost = finalInternetComponentCost_NoDiscount + finalTvComponentCost_NoDiscount + additionalTvComponentCost_NoDiscount + finalPhoneComponentCost_NoDiscount + finalAddonServicesCost;
                    finalCostLabelText = "μμƒ μ›” κΈ°λ³Έλ£ μ΄μ•΅ (ν• μΈ μ μ© μ „)";
                }


                totalBaseInternetCostEl.textContent = internetBase.toLocaleString();
                totalInternetDiscountAmountEl.textContent = internetDiscount.toLocaleString();
                internetModemRentalEl.textContent = modemRental.toLocaleString();
                wifiRouterRentalCostDisplayEl.textContent = actualWifiRouterFee.toLocaleString();

                if (tvPlanName !== 'none') {
                    tvCostSummaryContainerEl.classList.remove('hidden');
                    tvBaseCostDisplayEl.textContent = tvBase.toLocaleString();
                    tvDiscountDisplayEl.textContent = currentTvDiscount.toLocaleString();
                    stbRentalCostDisplayEl.textContent = stbRental.toLocaleString(); 
                } else {
                    tvCostSummaryContainerEl.classList.add('hidden');
                }
                
                if (additionalTvPlanKey !== 'none') {
                    additionalTvCostSummaryContainerEl.classList.remove('hidden');
                    additionalTvCostDisplayEl.textContent = additionalTvCost.toLocaleString();
                } else {
                    additionalTvCostSummaryContainerEl.classList.add('hidden');
                }

                if (phonePlanName !== 'none') {
                    phoneCostSummaryContainerEl.classList.remove('hidden');
                    phoneBaseCostDisplayEl.textContent = phoneBase.toLocaleString();
                    phoneDiscountDisplayEl.textContent = phoneDiscount.toLocaleString();
                } else {
                    phoneCostSummaryContainerEl.classList.add('hidden');
                }
                
                addonServicesSummaryContainerEl.classList.toggle('hidden', addonServicesTotalCost === 0);
                if (addonServicesTotalCost > 0) {
                    addonServicesTotalCostDisplayEl.textContent = addonServicesTotalCost.toLocaleString();
                }
                
                finalMonthlyCostEl.textContent = finalMonthlyDisplayCost.toLocaleString();
                finalCostLabelEl.textContent = finalCostLabelText;


                let calculatedInstallationFee = 0;
                const hasInternet = internetPlanName !== 'none';
                const hasTv = tvPlanName !== 'none';
                const hasAdditionalTv = additionalTvPlanKey !== 'none';
                const hasPhone = phonePlanName !== 'none';
                const isGeneralPhone = phonePlanName === "KTμΌλ° μ „ν™”μΌλ° μ „ν™”";
                const is070Phone = phonePlanName === "KTμΌλ° μ „ν™”μΈν„°λ„· μ „ν™” (λ¨μ„μ¤ν†¤)" || phonePlanName === "KTμΌλ° μ „ν™”μΈν„°λ„· (λ‹¨λ…) 500mb μ΄μƒ + μΈν„°λ„· μ „ν™”";


                if (hasInternet && hasTv && hasAdditionalTv) { 
                    calculatedInstallationFee = ktInstallationFees_new.internet_tv_addTv?.[installationTime] || 0;
                } else if (hasInternet && hasTv && hasPhone) {
                    if (isGeneralPhone) calculatedInstallationFee = ktInstallationFees_new.internet_tv_phone_general?.[installationTime] || 0;
                    else if (is070Phone) calculatedInstallationFee = ktInstallationFees_new.internet_tv_phone_070?.[installationTime] || 0;
                    else calculatedInstallationFee = ktInstallationFees_new.internet_tv?.[installationTime] || 0; 
                } else if (hasInternet && hasTv) { 
                    calculatedInstallationFee = ktInstallationFees_new.internet_tv?.[installationTime] || 0;
                } else if (hasInternet && hasPhone) { 
                     if (isGeneralPhone) calculatedInstallationFee = ktInstallationFees_new.internet_phone_general?.[installationTime] || 0;
                     else if (is070Phone) calculatedInstallationFee = ktInstallationFees_new.internet_phone_070?.[installationTime] || 0;
                     else calculatedInstallationFee = ktInstallationFees_new.internet_only?.[installationTime] || 0; 
                } else if (hasInternet) { 
                    calculatedInstallationFee = ktInstallationFees_new.internet_only?.[installationTime] || 0;
                } else if (hasTv && !hasAdditionalTv && !hasPhone) { 
                    calculatedInstallationFee = ktInstallationFees_new.tv_only?.[installationTime] || 0;
                } else if (hasPhone && !hasInternet && !hasTv && !hasAdditionalTv ) { 
                    calculatedInstallationFee = ktInstallationFees_new.phone_only?.[installationTime] || 0;
                }
                

                selectedInternetEl.textContent = internetPlanName !== 'none' ? internetPlanEl.options[internetPlanEl.selectedIndex].text.split(" (")[0] : 'λ―Έμ„ νƒ';
                selectedTvEl.textContent = tvPlanName !== 'none' ? tvPlanEl.options[tvPlanEl.selectedIndex].text.split(" (")[0] : 'λ―Έμ„ νƒ';
                selectedStbEl.textContent = (tvPlanName !== 'none' && tvPlans_KT[tvPlanName]?.stbIncluded) ? tvPlans_KT[tvPlanName].stbIncluded : 'λ―Έμ„ νƒ';
                selectedAdditionalTvEl.textContent = additionalTvPlanKey !== 'none' ? additionalTvPlans_KT[additionalTvPlanKey].name : 'λ―Έμ„ νƒ';
                selectedPhoneEl.textContent = phonePlanName !== 'none' ? phonePlanEl.options[phonePlanEl.selectedIndex].text.split(" (")[0] : 'λ―Έμ„ νƒ';
                selectedMobileCountEl.textContent = numMobileLines;
                
                const discountTypeMap = {
                    none: "κ²°ν•© ν• μΈ μ—†μ",
                    totalAmountBundle: "μ΄μ•΅ κ²°ν•©ν• μΈ",
                    premiumFamilyBundle: "ν”„λ¦¬λ―Έμ—„ κ°€μ΅±κ²°ν•©",
                    premiumSingleBundle: "ν”„λ¦¬λ―Έμ—„ μ‹±κΈ€κ²°ν•©",
                    mvnoBundle: "μ•λ°ν° κ²°ν•©",
                    familyBundle: "ν¨λ°€λ¦¬ κ²°ν•© (μΈν„°λ„· μ¶”κ°€νμ„ )",
                    separateFamilyBundle: "λ”°λ΅ μ‚΄μ•„λ„ κ°€μ΅±κ²°ν•©"
                };
                selectedDiscountTypeEl.textContent = discountTypeMap[discountType] || "μ• μ μ—†μ";
                installationCostResultEl.textContent = calculatedInstallationFee.toLocaleString();

                let giftCash = 0;
                let giftVoucher = 0;
                let giftPhoneVoucherAmount = 0;
                let giftAdditionalTvAmount = 0;
                let giftDongpanAdditionalCashAmount = 0;

                if (internetPlanName !== 'none') {
                    const internetSpeed = currentInternet.speed;
                    let tvCategoryForGift = "λ² μ΄μ§"; 
                    let giftKeyPrefix = "";
                    const isTvSelectedForGift = tvPlanName !== 'none';

                    if (!isTvSelectedForGift) { 
                        tvCategoryForGift = "λ² μ΄μ§"; 
                        if (internetSpeed === 100) giftKeyPrefix = "100λ‹¨λ…";
                        else if (internetSpeed === 500) giftKeyPrefix = "500λ‹¨λ…";
                        else if (internetSpeed >= 1000) giftKeyPrefix = "1Gλ‹¨λ…";
                    } else { 
                        const selectedTvOption = tvPlanEl.options[tvPlanEl.selectedIndex];
                        tvCategoryForGift = selectedTvOption.dataset.category || "λ² μ΄μ§";
                        if (internetSpeed === 100) giftKeyPrefix = "100λ²λ“¤";
                        else if (internetSpeed === 500) giftKeyPrefix = "500λ²λ“¤";
                        else if (internetSpeed >= 1000) giftKeyPrefix = "κΈ°κ°€λ²λ“¤";
                    }
                    
                    if (giftTable[tvCategoryForGift] && giftTable[tvCategoryForGift][giftKeyPrefix]) {
                        giftCash = giftTable[tvCategoryForGift][giftKeyPrefix].cash;
                        giftVoucher = giftTable[tvCategoryForGift][giftKeyPrefix].voucher;
                    }

                    if (isDongpanChecked && numMobileLines > 0) {
                        const isTvBundledForDongpan = tvPlanName !== 'none';
                        const dongpanBundleType = isTvBundledForDongpan ? "TVλ²λ“¤" : "λ‹¨λ…";
                        let internetGiftKeyPart = "";
                        if (internetSpeed === 100) internetGiftKeyPart = "100M";
                        else if (internetSpeed === 500) internetGiftKeyPart = "500M";
                        else if (internetSpeed >= 1000) internetGiftKeyPart = "1G";

                        const maxDongpanLines = isTvBundledForDongpan ? 3 : 1;

                        for (let i = 0; i < Math.min(numMobileLines, maxDongpanLines); i++) {
                             const mobileLineFeeInput = document.getElementById(`mobileCost${i}`);
                             const mobileLineFee = mobileLineFeeInput ? (parseInt(mobileLineFeeInput.value) || 0) : 0;
                             let mobileFeeTierKey = null;
                             if (mobileLineFee >= 37000 && mobileLineFee <= 58000) mobileFeeTierKey = "37K";
                             else if (mobileLineFee >= 61000 && mobileLineFee <= 89000) mobileFeeTierKey = "61K";
                             else if (mobileLineFee >= 90000 && mobileLineFee <= 110000) mobileFeeTierKey = "90K";

                             if (mobileFeeTierKey && internetGiftKeyPart) {
                                const giftKey = internetGiftKeyPart + "_" + dongpanBundleType;
                                if (dongpanAdditionalGiftTable_KT[mobileFeeTierKey] && dongpanAdditionalGiftTable_KT[mobileFeeTierKey][giftKey]) {
                                    giftDongpanAdditionalCashAmount += dongpanAdditionalGiftTable_KT[mobileFeeTierKey][giftKey];
                                }
                            }
                        }
                    }
                }

                if (phonePlanName !== 'none') {
                    giftPhoneVoucherAmount = 20000;
                }
                if (additionalTvPlanKey !== 'none') {
                    giftAdditionalTvAmount = 30000; 
                }

                dongpanCashContainerKtEl.classList.toggle('hidden', !isDongpanChecked || giftDongpanAdditionalCashAmount === 0);
                giftDongpanAdditionalCashKtEl.textContent = giftDongpanAdditionalCashAmount.toLocaleString();

                giftCashEl.textContent = giftCash.toLocaleString();
                giftVoucherEl.textContent = giftVoucher.toLocaleString();
                giftPhoneVoucherEl.textContent = giftPhoneVoucherAmount.toLocaleString();
                giftAdditionalTvEl.textContent = giftAdditionalTvAmount.toLocaleString();
                giftTotalEl.textContent = (giftCash + giftVoucher + giftPhoneVoucherAmount + giftAdditionalTvAmount + giftDongpanAdditionalCashAmount).toLocaleString();
                
                resultSection.classList.remove('hidden');
                messageScriptSectionEl.classList.remove('hidden');
                generateMessageScripts(displayMode, installationTime, discountType, isDongpanChecked, numMobileLines, finalInternetComponentCost_NoDiscount + finalTvComponentCost_NoDiscount + additionalTvComponentCost_NoDiscount + finalPhoneComponentCost_NoDiscount + finalAddonServicesCost, finalMonthlyCostEl.textContent); 
            } catch (error) {
                console.error("κ³„μ‚° μ¤‘ μ¤λ¥ λ°μƒ:", error);
                alert("κ³„μ‚° μ¤‘ μ¤λ¥κ°€ λ°μƒν–μµλ‹λ‹¤. μ…λ ¥ κ°’μ„ ν™•μΈν•κ±°λ‚ μ μ‹ ν›„ λ‹¤μ‹ μ‹λ„ν•΄μ£Όμ„Έμ”. λ¬Έμ κ°€ μ§€μ†λλ©΄ κ°λ°μ μ½μ†”(F12)μ μ¤λ¥ λ©”μ‹μ§€λ¥Ό ν™•μΈν•΄μ£Όμ„Έμ”.");
            }
        }

        function generateMessageScripts(displayModeParam, installTimeParam, discountTypeParam, isDongpanCheckedParam, numMobileLinesParam, totalPreDiscountCost, monthlyFeeForSummaryParam) { 
            const internetOption = internetPlanEl.options[internetPlanEl.selectedIndex];
            const internetPlanText = internetOption.value !== 'none' ? internetOption.text.split(' (')[0] : 'μΈν„°λ„· λ―Έμ„ νƒ';
            
            const tvOption = tvPlanEl.options[tvPlanEl.selectedIndex];
            let firstTvText = "λ―Έμ„ νƒ";
            if (tvOption.value !== 'none' && tvPlans_KT[tvOption.value]) { firstTvText = tvOption.text.split(' (')[0];} 
            
            const additionalTvPlanKey = additionalTvPlanEl.value;
            const additionalTvText = additionalTvPlanKey !== 'none' ? ` + (μ¶”κ°€) ${additionalTvPlans_KT[additionalTvPlanKey].name}` : "";
            
            const phoneOption = phonePlanEl.options[phonePlanEl.selectedIndex];
            let phoneText = "λ―Έμ„ νƒ";
            if (phoneOption.value !== 'none' && phonePlans_KT[phoneOption.value]) {phoneText = phoneOption.text.split(' (')[0];}

            const wifiOption = wifiRouterRentalEl.options[wifiRouterRentalEl.selectedIndex];
            const wifiName = wifiOption ? wifiOption.dataset.name : "λ―Έμ„ νƒ";


            const giftAmount = giftTotalEl.textContent;
            const baseGift = (parseInt(giftCashEl.textContent.replace(/,/g, '')) || 0) + 
                             (parseInt(giftVoucherEl.textContent.replace(/,/g, '')) || 0) + 
                             (parseInt(giftPhoneVoucherEl.textContent.replace(/,/g, '')) || 0) + 
                             (parseInt(giftAdditionalTvEl.textContent.replace(/,/g, '')) || 0);
            const dongpanGift = parseInt(giftDongpanAdditionalCashKtEl.textContent.replace(/,/g, '')) || 0;

            const installFee = installationCostResultEl.textContent;
            const installTime = installTimeParam; 
            
            let installFeeForWeekendMessage = "";
            const hasInternet = internetPlanEl.value !== 'none';
            const hasTv = tvPlanEl.value !== 'none';
            const hasAdditionalTv = additionalTvPlanKey !== 'none';

            if (hasInternet && hasTv && hasAdditionalTv && ktInstallationFees_new.internet_tv_addTv) {
                 installFeeForWeekendMessage = ktInstallationFees_new.internet_tv_addTv.weekend.toLocaleString();
            } else if (hasInternet && hasTv && ktInstallationFees_new.internet_tv) {
                 installFeeForWeekendMessage = ktInstallationFees_new.internet_tv.weekend.toLocaleString();
            } else if (hasInternet && ktInstallationFees_new.internet_only) {
                 installFeeForWeekendMessage = ktInstallationFees_new.internet_only.weekend.toLocaleString();
            }
             else {
                installFeeForWeekendMessage = "λ³„λ„ λ¬Έμ";
            }


            let productDescriptionMemo = internetPlanText;
            if (wifiName !== "KTκ³µμ κΈ° X") {
                 productDescriptionMemo += ` + ${wifiName}`;
            }
            if (firstTvText !== "λ―Έμ„ νƒ") productDescriptionMemo += ` + ${firstTvText}`;
            productDescriptionMemo += additionalTvText;
            if (phoneText !== "λ―Έμ„ νƒ") productDescriptionMemo += ` + ${phoneText}`;

            let memoDisplayModeText = "";
            let memoMonthlyFee = monthlyFeeForSummaryParam; 

            switch(discountTypeParam) {
                case "premiumFamilyBundle":
                case "premiumSingleBundle":
                case "mvnoBundle":
                case "totalAmountBundle":
                case "none":
                    memoDisplayModeText = "[ν›„κ²°ν•©]";
                    memoMonthlyFee = totalPreDiscountCost.toLocaleString(); 
                    break;
                case "familyBundle":
                case "separateFamilyBundle":
                    memoDisplayModeText = "[μ„ κ²°ν•©]";
                    memoMonthlyFee = monthlyFeeForSummaryParam; 
                    break;
                default: 
                     memoDisplayModeText = "[ν›„κ²°ν•©]"; 
                     memoMonthlyFee = totalPreDiscountCost.toLocaleString(); 
                    break;
            }


            memoScriptEl.value = `[KT λ―Έμ† μƒλ‹΄ λ©”λ¨]
1. μƒν’ : ${productDescriptionMemo}
2. μ”κΈ : ${memoMonthlyFee}μ› ${memoDisplayModeText}
3. μ‚¬μ€ν’ μ΄μ•΅ : ${giftAmount}μ› (κΈ°λ³Έ ${baseGift.toLocaleString()}μ› + λ™νμ¶”κ°€(λ¨λ°”μΌμ—°λ™) ${dongpanGift.toLocaleString()}μ›) (μμƒ)
4. μ„¤μΉλΉ„ : ${installFee}μ› (${installTime === 'weekday' ? 'ν‰μΌ' : 'μ£Όλ§/μ•Όκ°„'}) (KT μ‹¤μ  λΉ„μ© ν™•μΈ ν•„μ”, μ£Όλ§/μ•Όκ°„ ν• μ¦ κ°€λ¥)
5. κ²°ν•©μ μ©μ‹μ : ${document.querySelector('input[name="displayModeKt"]:checked').parentElement.textContent.trim().split(' (')[0]}
6. κΈ°νƒ€ : μ΄μ‚¬ μ—¬λ¶€ [ ] / ν¬λ§μ„¤μΉμΌμ [    λ…„   μ›”   μΌ]
7. ν• μΈμ ν•: ${selectedDiscountTypeEl.textContent}
9. λ¨λ°”μΌκ²°ν•©νμ„ : ${numMobileLinesParam}κ°
10. λ™ννλ§¤κ°€μ μ©: ${isDongpanCheckedParam ? 'Y' : 'N'}`;
            
            let productDescriptionInfo = `β–¶οΈ ${internetPlanText}`;
            if (firstTvText !== "λ―Έμ„ νƒ") productDescriptionInfo += `\nβ–¶οΈ ${firstTvText}`;
            if(additionalTvText) productDescriptionInfo += `\nβ–¶οΈ (μ¶”κ°€) ${additionalTvPlans_KT[additionalTvPlanKey].name}`;
            if (phoneText !== "λ―Έμ„ νƒ") productDescriptionInfo += `\nβ–¶οΈ ${phoneText}`;


            infoScriptEl.value = `[λ―Έμ†] μƒν’ & μ‚¬μ€ν’ μ”μ•½ μ•λ‚΄
μ•λ…•ν•μ„Έμ”, λ―Έμ† μΈν„°λ„· μ…λ‹λ‹¤.
κ³ κ°λ‹κ»μ„ μ¤λ μƒλ‹΄ λ°›μΌμ‹  μƒν’ μ•λ‚΄λ“λ¦½λ‹λ‹¤.
${productDescriptionInfo}
β–¶οΈ μ›” ${monthlyFeeForSummaryParam}μ› ${displayModeParam === 'preApplied' ? '(ν• μΈ μ μ©λ μµμΆ… κΈμ•΅)' : '(ν• μΈ μ μ© μ „ κΈ°λ³Έλ£)'}
β–¶οΈ μ‚¬μ€ν’ ${giftAmount}μ›
* ννƒμ€ μ‹¤μ‹κ°„μΌλ΅ λ°”λ€” μ μλ‹¤λ” μ  μ•λ‚΄λ“λ¦½λ‹λ‹¤.
* 3λ…„ μ•½μ • κΈ°μ¤€
λ―Έμ† λ“λ¦Ό.`;
            
            let productDescriptionComplete = `β–¶οΈ ${internetPlanText}`;
            if (firstTvText !== "λ―Έμ„ νƒ") productDescriptionComplete += `\nβ–¶οΈ ${firstTvText}`;
            if(additionalTvText) productDescriptionComplete += `\nβ–¶οΈ (μ¶”κ°€) ${additionalTvPlans_KT[additionalTvPlanKey].name}`;
            if (phoneText !== "λ―Έμ„ νƒ") productDescriptionComplete += `\nβ–¶οΈ ${phoneText}`;


            completeScriptEl.value = `[λ―Έμ†] κ°€μ… μ™„λ£ μ•λ‚΄
μ•λ…•ν•μ„Έμ”, κ³ κ°λ‹.
λ―Έμ† μΈν„°λ„· λ¶€μ„μ…λ‹λ‹¤.
β… κ³„μ•½μ΄ μ™„λ£λμ—μ–΄μ”, μ•„λ λ‚΄μ©μ€ κ³„μ•½μ„μ™€ λ™μΌν• ν¨λ ¥μ΄ μμΌλ‹ κΌΌκΌΌν μ½μ–΄μ£Όμ„Έμ”.
β οΈ 3λ…„ μ•½μ •μ΄λ©°, μ•„λμ™€ κ°™μ€ μƒν™©μ— ν•΄λ‹Ήν•λ©΄ λ°›μΌμ…¨λ μ‚¬μ€ν’μ€ ν™μ λ©λ‹λ‹¤.
β‘  1λ…„ μ΄λ‚΄ ν•΄μ§€
β‘΅ 3κ°μ›” (90μΌ) μ΄μƒ μ •μ§€
β‘Ά 1λ…„ μ΄λ‚΄ μ”κΈμ  ν•ν–¥ (μƒν–¥ μ‹μ—λ” ν™μ λμ§€ μ•μµλ‹λ‹¤!)
β‘£ 3κ°μ›” μ΄λ‚΄ λ…μλ³€κ²½
β‘¤ κ°ν†µ 1κ°μ›” μ΄λ‚΄ κ²°μ μλ‹¨ μ§€λ΅μ²­κµ¬μ„λ΅ λ³€κ²½
β οΈ μ‹ κ· κ°€μ… ν›„ κΈ°μ΅΄μ— μΈν„°λ„·μ€ κΌ­ ν•΄μ§€ ν•΄μ£Όμ„Έμ”. μλ™ν•΄μ§€λμ§€ μ•μΌλ©° μ΄λ΄ κ²½μ° μ”κΈμ΄ μ΄μ¤‘ λ¶€κ³Όλμ–΄μ”.
β οΈ 3λ…„ μ΄λ‚΄ ν•΄μ§€ μ‹ ν†µμ‹ μ‚¬ λ³Έμ‚¬μ— μ„μ•½κΈ (ν• μΈ λ°ν™κΈ) λ° ν†µμ‹ μ‚¬μ— λ”°λΌ λ©΄μ λ μ™€μ΄νμ΄ / ν†µμ‹ κΈ°κΈ° μ„¤μΉλΉ„ λ°ν™μ΄ ν•„μ”ν•  μ μμ–΄μ”.
β… κ°€μ… μƒν’ μ•λ‚΄
${productDescriptionComplete}
β–¶οΈ μ›” ${monthlyFeeForSummaryParam}μ› ${displayModeParam === 'preApplied' ? '(ν• μΈ μ μ©λ μµμΆ… κΈμ•΅)' : '(ν• μΈ μ μ© μ „ κΈ°λ³Έλ£)'}
β–¶οΈ μ„¤μΉλΉ„ ${installFee}μ› μ²« λ‹¬ λ¶€κ³Ό ${installTime === 'weekday' ? '' : `(μ£Όλ§/μ•Όκ°„ μ„¤μΉ μ‹ ${installFeeForWeekendMessage}μ›)`}
β–¶οΈ μ‚¬μ€ν’ ${giftAmount}μ›
β…μ‚¬μ€ν’μ€ μ„¤μΉ ν›„ 7μΌ μ΄λ‚΄ μλ™μΌλ΅ μ§€κΈ‰λλ‚ ν‰μΌκΈ°μ¤€ 5μ‹ μ΄μ „ κ°ν†µ λ°›μ•λ‹¤κ³  λ¬Έμ μ£Όμ‹λ©΄ λ‹ΉμΌμ…κΈ λ„μ›€λ“λ¦¬κ² μµλ‹λ‹¤.
${installTime !== 'weekday' ? `-> μ£Όλ§/μ•Όκ°„ μ„¤μΉλΉ„λ” ${installFeeForWeekendMessage}μ› μ΄μ‹­λ‹λ‹¤.` : ''}
π” ν•΄λ‹Ή μ—°λ½μ²λ΅ μ—°λ½μ΄ μ–΄λ ¤μΈ κ²½μ° κ±±μ •ν•μ§€ λ§μ„Έμ”! μ•„λ λ€ν‘λ²νΈλ΅ λ¬Έμμ£Όμ‹λ©΄ ν™•μΈν•μ—¬ μ—°λ½λ“λ¦¬κ² μµλ‹λ‹¤. μ‹κ°„ μ–‘ν•΄ λ¶€νƒλ“λ ¤μ”.
[λ―Έμ†λ¥Ό μ†κ°ν•΄μ£Όμ„Έμ”]
μ§€μΈμ΄ λ―Έμ†μ—μ„ μΈν„°λ„· μ„¤μΉν•λ©΄ μ†κ°ν•΄μ£Όμ‹  λ¶„μ—κ² 3λ§μ› λ“λ ¤μ”.
β–¶ μ§€μΈμ—κ² μ¶”μ²ν•κ³  3O,OOOμ› λ°›κΈ° (β†“)
https://get.miso.kr/pZbfsUPthzb
λ―Έμ† λ“λ¦Ό.`;

            if (dongpanMemoScriptEl) {
                dongpanMemoScriptEl.value = `<λ°±λ©”κ°€ μ μ‹¬λ™ν λ©”λ¨ μ–‘μ‹>
κ³ κ°λ… :
λ™νμ μ„ λ…μμ :
μ—°λ½μ² :
κΈ°μ΅΄ν†µμ‹ μ‚¬ :
μ μ‹¬λ°μ†΅μ£Όμ† :
μ„ νƒμ•½μ •μ—¬λ¶€ (12κ°μ›”/24κ°μ›”) :
μ”κΈμ  :
μ μ‹¬λΉ„ ν›„μ²­κµ¬ λ™μ (Y/N) :
β… κ²°ν•©μ—¬λ¶€ (ν”„λ¦¬λ―Έμ—„κ°€μ΅±/ν”„λ¦¬λ―Έμ—„μ‹±κΈ€/μ΄μ•΅) :
β… ν• μΈμ§€μ •(μ§€μ •ν• μΈorκΈ°μ—¬λ„) :
β… λ™ν κ²°ν•©μΈμ¦ (URL μ™„λ£μ—¬λ¶€) :
β… ν¨μ¤orμ‹ μ©μΉ΄λ“ μΈμ¦ :`;
            }
             if (sensitiveInfoLinkScriptEl) {
                sensitiveInfoLinkScriptEl.value = `[KT] μ•„λλ§ν¬μ— κ³ κ°λ‹μ λ―Όκ°μ •λ³΄λ¥Ό μ…λ ¥ν•μ‹λ©΄ KTλ΅ κ³ κ°λ‹μ λ―Όκ°μ •λ³΄κ°€ μ§μ ‘ μ „μ†΅λ©λ‹λ‹¤
https://miso.kr/booking/forms/secure-details?querystring=κ³ κ°λ‹ μ „ν™”λ²νΈ`;
            }
        }

        function copyToClipboard(elementId, feedbackElementId) {
            const textarea = document.getElementById(elementId);
            if (!textarea) return; 
            textarea.select();
            textarea.setSelectionRange(0, 99999); 
            try {
                document.execCommand('copy');
                const feedbackEl = document.getElementById(feedbackElementId);
                if (feedbackEl) feedbackEl.textContent = 'λ³µμ‚¬λμ—μµλ‹λ‹¤!';
                setTimeout(() => { if (feedbackEl) feedbackEl.textContent = ''; }, 2000);
            } catch (err) {
                const feedbackEl = document.getElementById(feedbackElementId);
                if (feedbackEl) feedbackEl.textContent = 'λ³µμ‚¬ μ‹¤ν¨';
                 setTimeout(() => { if (feedbackEl) feedbackEl.textContent = ''; }, 2000);
            }
            window.getSelection().removeAllRanges(); 
        }
        
        function setInitialDefaults() {
            populateInternetPlans(); 
            internetPlanEl.value = "KTμΈν„°λ„·λ²λ“¤1GB"; 
            tvPlanEl.value = "KTTVλ² μ΄μ§"; 
            additionalTvPlanEl.value = "none"; 
            phonePlanEl.value = "none"; 
            wifiRouterRentalEl.value = "0"; 
            
            const addonCheckboxes = document.querySelectorAll('#addonServicesContainer input[type="checkbox"]');
            addonCheckboxes.forEach(cb => cb.checked = false);

            mobileLinesCountEl.value = 0; 
            updateMobileLinesInputs();
            document.querySelector('input[name="discountType"][value="totalAmountBundle"]').checked = true;
            document.querySelector('input[name="displayModeKt"][value="preApplied"]').checked = true; 
            document.querySelector('input[name="installationTime"][value="weekday"]').checked = true;
             if (dongpanSalesCheckKtEl) {
                 dongpanSalesCheckKtEl.checked = false;
                if(dongpanPolicyDetailsContainerKtEl) dongpanPolicyDetailsContainerKtEl.classList.add('hidden');
             }


            allDetailSections.forEach(section => {
                if (section.containerEl && section.toggleEl) { 
                    const isSelected = document.querySelector(`input[name="discountType"][value="${section.radioValue}"]`).checked;
                    let shouldBeVisible = false; 
                    if (isSelected) { 
                        section.toggleEl.checked = false; 
                        shouldBeVisible = section.toggleEl.checked; 
                    } else { 
                        section.toggleEl.checked = false;
                    }
                    section.containerEl.classList.toggle('hidden', !shouldBeVisible);
                     if (shouldBeVisible && section.updateFn) { 
                        section.updateFn();
                    }
                }
            });
            const internetTypeChangeEvent = new Event('change');
            document.querySelector('input[name="internetType"]:checked').dispatchEvent(internetTypeChangeEvent);
            const discountTypeChangeEvent = new Event('change'); 
            document.querySelector('input[name="discountType"]:checked').dispatchEvent(discountTypeChangeEvent);
        }
        
        window.onload = setInitialDefaults;

    </script>
</body>
</html>